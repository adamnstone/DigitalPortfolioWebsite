
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../display-mechanics/">
      
      
        <link rel="next" href="../motor-calculations/">
      
      
      <link rel="icon" href="../../../assets/images/favicon/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Display Electronics - Adam Stone Digital Portfoio</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-Z0ZXQ8VL5C"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-Z0ZXQ8VL5C",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-Z0ZXQ8VL5C",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#updating-board-design" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Adam Stone Digital Portfoio" class="md-header__button md-logo" aria-label="Adam Stone Digital Portfoio" data-md-component="logo">
      
  <img src="../../../assets/images/favicon/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Adam Stone Digital Portfoio
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Display Electronics
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/adamnstone/DigitalPortfolioWebsite" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    adamnstone/DigitalPortfolioWebsite
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../about/" class="md-tabs__link">
        
  
    
  
  About

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  STEM

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../arts/" class="md-tabs__link">
          
  
    
  
  Arts

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../advocacy/" class="md-tabs__link">
          
  
    
  
  Advocacy

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Adam Stone Digital Portfoio" class="md-nav__button md-logo" aria-label="Adam Stone Digital Portfoio" data-md-component="logo">
      
  <img src="../../../assets/images/favicon/logo.png" alt="logo">

    </a>
    Adam Stone Digital Portfoio
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/adamnstone/DigitalPortfolioWebsite" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    adamnstone/DigitalPortfolioWebsite
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    STEM
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            STEM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../expert-network-map/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Expert Network Map
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Expert Network Map
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Disability Forewarning System
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Disability Forewarning System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../final-project-planning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Planning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cupholder-mechanism/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cupholder Mechanism
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cupholder-electronics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cupholder Electronics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../display-mechanics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Display Mechanism
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Display Electronics
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Display Electronics
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#choosing-a-microcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      Choosing A Microcontroller
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#different-approach" class="md-nav__link">
    <span class="md-ellipsis">
      Different Approach
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../motor-calculations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Motor Calculations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wireless-communication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wireless Communication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../combining-electronics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Combining Electronics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../project-requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project Summary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../project-reflection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Final Project: Reflection
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../fab-academy/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Fab Academy
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Fab Academy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../panopticom/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Panopticom
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Panopticom
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../bridge-builder/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Bridge Builder
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Bridge Builder
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../test-generator/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Test Generator
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Test Generator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../arts/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Arts
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Arts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../advocacy/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Advocacy
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Advocacy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#choosing-a-microcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      Choosing A Microcontroller
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#different-approach" class="md-nav__link">
    <span class="md-ellipsis">
      Different Approach
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<div><h1 id="updating-board-design">Updating Board Design</h1>
<h2 id="choosing-a-microcontroller">Choosing A Microcontroller</h2>
<p>Since I have two different boards for the driver-side electronics and back-of-car electronics, I need to choose an appropriate microcontroller to design a second board with.</p>
<p><a href="https://www.reddit.com/r/esp32/comments/xq942m/does_anyone_know_how_to_control_servo_motor_by/">This forum</a> revealed to me that the <code>ESP32-C3</code> isn't suitable for controlling servo motors.</p>
<p>In hindsight, it's good that I designed my first board with a microcontroller that can use WiFi and Bluetooth because some part of the board will need to communicate the custom message to display on the screen, which can be updated remotely from an app or website. I might also want to consider handling this functionality on the other board, but I feel it's not necessary.</p>
<p><strong>Prompt</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>I'm designing a PCB board to control a servo motor, an e-paper/e-ink LCD display, and receive signals  over bluetooth (or wifi - they won't be connected to internet so bluetooth is probably a better idea). I am trying to use a microcontroller. I originally was going to use the ESP32-C3 because of the built in bluetooth and wifi, but read some forum posts which revealed that it's not great at controlling a servo motor. I also want to use an integrated circuit and not an arduino or raspberry pi pico, but a board, for example, like the XIAO Seeed rp2040 or an ATTINYMEGA/ATTINY. What do you recommend? Also comment on any choices I've described to you and provide feedback for anything that's not a well-warranted decision or explain why my choices are logical.
</span></code></pre></div>
<p><strong>Response</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>Your requirement to control a servo motor, an e-paper/e-ink LCD display, and receive signals over Bluetooth (or WiFi) can be achieved using various microcontroller options. Since you prefer not to use an Arduino or Raspberry Pi Pico, I will recommend a few alternatives.
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>STM32 microcontrollers: STM32 microcontrollers, particularly the STM32F series (e.g., STM32F103C8T6), offer a good balance of performance, power efficiency, and a variety of peripherals. They can handle servo motor control, e-paper/e-ink displays, and can be paired with a separate Bluetooth module (e.g., HC-05) for communication. You can find various STM32 development boards, such as the Blue Pill, that can be programmed using the Arduino IDE or other development environments.
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>nRF52 series microcontrollers: The nRF52832 and nRF52840 are ARM Cortex-M4-based microcontrollers with built-in Bluetooth Low Energy (BLE) capabilities. They have sufficient processing power and peripherals to control a servo motor and e-paper/e-ink displays. They are designed for low-power applications, which might be beneficial if power consumption is a concern.
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>ATSAMD21/51 microcontrollers: These microcontrollers from Microchip (previously Atmel) are ARM Cortex-M0+/M4 based and have good performance for controlling servo motors and e-paper/e-ink displays. You can pair them with an HC-05 Bluetooth module for communication. The Adafruit Feather M0/M4 boards use these microcontrollers, and you can find a variety of examples for controlling peripherals and communication.
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>Regarding your original choice of ESP32-C3, it is true that it might not be the best option for precise servo motor control due to the
</span></code></pre></div>
<p><strong>Prompt</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>pick up where you left off
</span></code></pre></div>
<p><strong>Response</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>Due to the fact that ESP32-C3 uses an RISC-V based core, it might not be the best option for precise servo motor control as it can have timing-related challenges. It is also designed with WiFi and Bluetooth connectivity as its primary focus, which can be overkill if you only require Bluetooth communication.
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>In summary, based on your requirements, I would recommend considering STM32 microcontrollers, nRF52 series microcontrollers, or ATSAMD21/51 microcontrollers as potential options for your PCB board design. These microcontrollers provide sufficient processing power and peripherals to handle servo motor control, e-paper/e-ink displays, and can be paired with a separate Bluetooth module for communication.
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>Ensure that you verify the specific peripherals and communication interfaces required for your chosen e-paper/e-ink display, servo motor, and Bluetooth module, and make sure the selected microcontroller supports those interfaces. Additionally, consider factors such as power consumption, form factor, and the availability of development resources, libraries, and community support when making your decision.
</span></code></pre></div>
<p><strong>Prompt</strong> </p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>This servo motor which moves the display needs to move the display onto the back window of a car, from the inside. How to you recommend I mount it?
</span></code></pre></div>
<p><strong>Response</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>Mounting a servo motor to move a display inside a car can be done in a few steps. I will outline a general approach, but please note that the specific details may vary depending on the make and model of your car, the size and weight of the display, and the type of servo motor you are using.
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>Determine the best mounting location: Choose a location on the inside of the car's back window where the servo motor can be securely mounted and has sufficient space for the display to move. Make sure there are no obstructions and the window is not tinted in a way that would hinder the visibility of the display.
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>Design a mounting bracket: Create a custom mounting bracket that can securely hold the servo motor and attach it to the car's interior. The bracket should be made from a durable, lightweight material like aluminum or a strong plastic. The design should also consider cable management for the servo motor, display, and any other required connections.
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>Attach the mounting bracket: Attach the mounting bracket to the car's interior using strong adhesives, like automotive-grade double-sided tape or adhesive sealant, or by using screws or other fasteners if the car's design allows for it. Ensure that the mounting is secure and does not interfere with any other vehicle functions.
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>Attach the servo motor to the bracket: Secure the servo motor to the mounting bracket using screws, bolts, or other suitable fasteners. Make sure the servo motor is positioned correctly to move the display as desired.
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>5
</span></code></pre></div>
<p>It didn't finish its response for the last prompt, but that's fine since it advise was far to general to be helpful.</p>
<p>The responses for the microcontroller suggestion were helpful, though.</p>
<p>I took a look at <a href="https://fabacademy.org/2022/labs/digiscope/students/florian-becker/assignments/week11/">Florian Becker</a> and asked ChatGPT 4.0 several other questions.</p>
<p><strong>Prompt</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>which of the three suggested microcontrollers should i use
</span></code></pre></div>
<p><strong>Response</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>Selecting the most suitable microcontroller from the three suggested options depends on your specific requirements, priorities, and design constraints. I will provide a brief comparison to help you decide:
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>STM32 microcontrollers: STM32 microcontrollers, particularly the STM32F series, offer a good balance of performance, power efficiency, and a variety of peripherals. They are widely used in the maker community, and you can find extensive resources, libraries, and examples for various applications. If you want a powerful, well-supported microcontroller and don't mind adding a separate Bluetooth module, the STM32 is a solid choice.
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>nRF52 series microcontrollers: The nRF52832 and nRF52840 are ARM Cortex-M4-based microcontrollers with built-in Bluetooth Low Energy (BLE) capabilities. They are particularly suitable for low-power applications, and their integrated BLE support simplifies the design. If power consumption is a concern or you prefer an integrated Bluetooth solution, the nRF52 series is an excellent option.
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>ATSAMD21/51 microcontrollers: These microcontrollers from Microchip (previously Atmel) are ARM Cortex-M0+/M4 based and have good performance for controlling peripherals. They are less powerful than STM32 microcontrollers but still provide sufficient resources for your application. If you are already familiar with Atmel microcontrollers or prefer a lower-cost solution, consider the ATSAMD21/51 microcontrollers
</span></code></pre></div>
<p>I decided on a STM32F series board and found <a href="https://www.instructables.com/How-to-use-E-ink-display-on-the-stm32/">this Instructables tutorial</a> on how to wire and program an e-paper/e-ink display to the microcontroller. I also downloaded <a href="https://github.com/chiengineer/Eagle-Libraries/blob/master/Processors/Misc/stm32.lbr">this EagleCAD library</a> and imported it into Fusion 360.</p>
<p>I found <a href="https://www.digikey.com/en/maker/blogs/2020/understanding-stm32-naming-conventions?utm_adgroup=STMicroelectronics&amp;utm_source=google&amp;utm_medium=cpc&amp;utm_campaign=Dynamic%20Search_EN_Focus%20Suppliers&amp;utm_term=&amp;utm_content=STMicroelectronics&amp;gclid=CjwKCAjwzuqgBhAcEiwAdj5dRqGDWFl4oWHrIUEmdNNbsnrrBx-EOeSO3mVuDJg3zip7cnMl0IVmbRoCYqQQAvD_BwE">this site</a> which explains naming conventions for the STM32 boards. </p>
<p><img alt="STM32 Naming Convention" src="../../../assets/images/stem/disability-forewarning-system/stm32-naming-convention.jpg"></p>
<p>In the EagleCAD library I saw four boards:</p>
<ul>
<li><em>STM32F10XCXT6</em></li>
<li>STM32F10XRXT6</li>
<li>STM32F10XTXU6</li>
<li>STM32F10XVXT6</li>
</ul>
<p>I decided on the first board, <em>STM32F10XCXT6</em>, since it has the least number of pins (from what I could tell in the EagleCAD schematic) and is surface-mount where the pin headers are exposed (unlike the <em>STM32F10XTXU6</em>).</p>
<p><img alt="Hidden Headers" src="../../../assets/images/stem/disability-forewarning-system/hidden-headers.jpg" style="width:500px;"></p>
<p><img alt="Pins Exposed" src="../../../assets/images/stem/disability-forewarning-system/pins-exposed.jpg" style="width:500px;"></p>
<p>When I put the component in my schematic I at first only saw a small portion of the pins from one port. I then realized that if I kept added components the other pins would be added. I was quickly overwhelmed by the amount of boards and decided to switch to one with less pins.</p>
<p><img alt="STM32 Schematic" src="../../../assets/images/stem/disability-forewarning-system/stm32-schematic.jpg"></p>
<p>Based on the Instructable I decided to assign different pins on a 2x5 SMD pin header I found (<code>PINHD-2X5-SMD</code> in the <code>fab</code> library) to the following.</p>
<table>
<thead>
<tr>
<th>Header Pin</th>
<th>STM32 Pin</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>SDA</td>
</tr>
<tr>
<td>2</td>
<td>SCL</td>
</tr>
<tr>
<td>3</td>
<td>CS</td>
</tr>
<tr>
<td>4</td>
<td>DC</td>
</tr>
<tr>
<td>5</td>
<td>RST</td>
</tr>
<tr>
<td>6</td>
<td>BU</td>
</tr>
<tr>
<td>7</td>
<td>BS</td>
</tr>
</tbody>
</table>
<p><img alt="Wired Schematic STM32" src="../../../assets/images/stem/disability-forewarning-system/wired-schematic-stm32.jpg"></p>
<p><img alt="Auto-Routed" src="../../../assets/images/stem/disability-forewarning-system/auto-routed.jpg"></p>
<p>I realized this chip has even more pins than an RP2040 (<code>ATTINY328P</code>) so I may as well just use that one. I could also use that <a href="https://wiki.seeedstudio.com/XIAO-RP2040/">XIAO Seeed RP2040</a> but am worried it won't have enough pins. <a href="https://embeddedcomputing.weebly.com/driving-a-large-e-paper-display-with-a-compact-xiao-rp2040.html">This example</a> confirms my worries.</p>
<p><img alt="XIAO Seeed to e-Paper" src="../../../assets/images/stem/disability-forewarning-system/xiao-seeed-to-epaper.png"></p>
<p>I instead decided to use an <a href="https://www.digikey.com/en/products/detail/microchip-technology/ATMEGA328P-AN/2357082">ATTINY328P-AN</a>. The DigiKey site linked to <a href="https://www.digikey.com/en/models/2357082">this page</a> where I could download a component that I thought I could import into EagleCAD (I selected the <code>Eaglecad6 Library</code> format in the DigiKey download). That format didn't work so I selected <code>Fusion360 PCB</code> which gave an LBR file, as needed.</p>
<p>After talking to <a href="http://archive.fabacademy.org/fabacademy2016/charlottelatin/students/999/about.html">Mr. Dubick</a>, I decided to use a <a href="https://www.raspberrypi.com/products/raspberry-pi-pico/">Raspberry Pi Pico</a> which allows for me to more easily use an RP2040 with a lot of pins. I downloaded the EagleCAD library <a href="https://github.com/Lobo-T/RPI-Pico-Eagle-lib/blob/main/RpiPico.lbr">here</a>. I used this of the three components since it was the entire Pico board (not just the RP2040 microprocessor) and is surface mount.</p>
<p><img alt="Pico Component" src="../../../assets/images/stem/disability-forewarning-system/pico-component.jpg"></p>
<p>I also found <a href="https://www.waveshare.com/w/upload/8/87/E-Paper-Driver-HAT-Schematic.pdf">this schematic</a> for an e-paper HAT driver linked on <a href="https://www.waveshare.com/wiki/File:E-Paper-Driver-HAT-Schematic.pdf">this page</a> from <a href="https://www.waveshare.com/wiki/E-Paper_Driver_HAT">this website</a>. I also found <a href="https://hackaday.io/project/11537-nekocal-an-e-ink-calendar/log/191001-basics-of-driving-e-paper-displays">this post</a> which compares different methods of operating the e-paper display, and I also skimmed <a href="http://essentialscrap.com/eink/">this article</a>.</p>
<p><a href="https://www.digikey.be/en/maker/projects/raspberry-pi-pico-rp2040-spi-example-with-micropython-and-cc/9706ea0cf3784ee98e35ff49188ee045">This website</a> confirmed that SPI communication can be achieved with the Raspberry Pi Pico, and <a href="https://www.youtube.com/watch?v=s7Lud1Gqrqw">this tutorial</a> eloborates on how to implement it. I also learned that there's a <a href="https://www.waveshare.com/wiki/Pico-ePaper-2.9">specific HAT driver</a> for a smaller e-paper display designed for the Pico, which is concerned as to whether it's possible to use the Pico to operate a larger display. <a href="https://forum.arduino.cc/t/waveshare-e-paper-displays-with-spi/467865/2768?page=139#:~:text=%2DDiagnostic%20Output%20was,5">This website</a> suggested a potential wiring for Arduino to talk to the driver. <a href="https://datasheets.raspberrypi.com/pico/Pico-R3-A4-Pinout.pdf">Here</a> is a detailed pinout sheet for the Pico and <a href="https://images.prismic.io/circuito/8e3a980f0f964cc539b4cbbba2654bb660db6f52_arduino-uno-pinout-diagram.png?auto=compress,format">here</a> is a detailed pinout sheet for the Arduino Uno.</p>
<p>I then watched <a href="https://www.youtube.com/watch?v=4onIqHClh2s">this tutorial</a> to gain a better understanding of e-paper displays. This revealed to me that the other wiring I got wasn't correct.</p>
<p>I wasn't sure whether my display was a <code>7.5"</code>, <code>7.5"B</code>, or <code>7.5"C</code> display, so I guessed <code>7.5"</code> for now. I then downloaded a zip file of the code. I copied the <code>epd7in5</code> folder in the <code>7.5in</code> display folder to the Arduino Library folder (<code>C:\Users\*YOUR_USER*\Documents\Arduino\libraries</code>). Then it appeared in the Arduino IDE!</p>
<p><img alt="Epd Library Arduino IDE" src="../../../assets/images/stem/disability-forewarning-system/epd-lib-ard.jpg"></p>
<p>I clicked in which added the following to the top of my code.</p>
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;epd7in5.h&gt;</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;epdif.h&gt;</span>
</span></code></pre></div>
<p>I then went to <code>File &gt; Examples &gt; epd7in5 &gt; epd7in5-demo</code> but got an error that the path didn't exist. I then realized that this used a different address (which I accidentally put the library in before) so I wanted to copy the folder there, as well. But before I did that, I tried again, clicking the library under <code>Examples from Custom Libraries</code> and the example opened! I uploaded the code but got the following error.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>:\Users\*USER*\AppData\Local\Temp\.arduinoIDE-unsaved2023223-2744-55l82c.2wca4\epd7in5-demo\imagedata.cpp:27:10: fatal error: avr/pgmspace.h: No such file or directory
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a> #include &lt;avr/pgmspace.h&gt;
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>          ^~~~~~~~~~~~~~~~
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>compilation terminated.
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>Using library SPI at version 2.0.0 in folder: C:\Users\*USER*\AppData\Local\Arduino15\packages\esp32\hardware\esp32\2.0.7\libraries\SPI 
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>Using library epd7in5 at version 1.0 in folder: C:\Users\*USER*\Documents\Arduino\libraries\epd7in5 
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>exit status 1
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>Compilation error: avr/pgmspace.h: No such file or directory
</span></code></pre></div>
<p><a href="https://forum.arduino.cc/t/fatal-error-avr-pgmspace-h-no-such-file-or-directory-error-for-esp8266/538262/3#:~:text=I%20found%20the%20answer.%20You%20can%20remove%20%23include%20%3Cavr/pgmspace%3E%20from%20the%20LedControl.h%20header%20file%20or%20just%20create%20the%20dir%20where%20it%20is%20looking%20for%20the%20file.%20I%20took%20the%20easy%20route.">This site</a> recommended that I simply commented out this include statement, so I changed the top of <code>imagedata.cpp</code> to the following.</p>
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">"imagedata.h"</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="c1">//#include &lt;avr/pgmspace.h&gt;</span>
</span></code></pre></div>
<p><a href="https://forum.arduino.cc/t/fatal-error-avr-pgmspace-h-no-such-file-or-directory-error-for-esp8266/538262/5#:~:text=%23if%20defined(AVR)%0A%23include%20%3Cavr/pgmspace.h%3E%0A%23else%C2%A0%20//defined(AVR)%0A%23include%20%3Cpgmspace.h%3E%0A%23endif%C2%A0%20//defined(AVR)">The same post</a> later suggested that I change it to the following, and the compilation was successful, but I got an error that I forgot to select a port. I also changed the board to Arduino Uno.</p>
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">"imagedata.h"</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="c1">//#include &lt;avr/pgmspace.h&gt;</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="cp">#if defined(AVR)</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;avr/pgmspace.h&gt;</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="cp">#else  </span><span class="c1">//defined(AVR)</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pgmspace.h&gt;</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="cp">#endif  </span><span class="c1">//defined(AVR)</span>
</span></code></pre></div>
<p>I then got an error that the sketch was too large.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Sketch too big; see https://support.arduino.cc/hc/en-us/articles/360013825179 for tips on reducing it.
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>Sketch uses 33522 bytes (103%) of program storage space. Maximum is 32256 bytes.
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>Global variables use 185 bytes (9%) of dynamic memory, leaving 1863 bytes for local variables. Maximum is 2048 bytes.
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>text section exceeds available space in board
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>Compilation error: text section exceeds available space in board
</span></code></pre></div>
<p>I then tried to use an Arduino Mega 2560 that had more memory. I was able to upload the sketch but nothing happened on the screen. I tried directly connecting the screen to the hat without the long ribbon cable and I tried the B/C and V2 versions of the examples in the <a href="https://github.com/waveshare/e-Paper/tree/master/Arduino">Waveshare E-Paper</a> library but nothing worked. I tried both the wiring configuration on <a href="https://forum.arduino.cc/t/waveshare-e-paper-displays-with-spi/467865/2982?page=149#:~:text=BUSY%20%2D%3E%207%2C%20RST%20%2D%3E%209%2C%20DC%20%2D%3E%208%2C%20CS%2D%3E%2053%2C%20CLK%20%2D%3E%2052%2C%20DIN%20%2D%3E%2051%2C%20GND%20%2D%3E%20GND%20%2C%20VCC%20%2D%3E%203.3v">this website</a> and the one on <a href="https://www.waveshare.com/wiki/7.5inch_e-Paper_HAT_Manual">this website</a> none of which worked!</p>
<p><img alt="Failed Arduino Mega" src="../../../assets/images/stem/disability-forewarning-system/failed-arduino-mega.jpg"></p>
<p>I copied my documentation thus far into ChatGPT (excluding long parts at the end of some links to reduce the number of tokens) and asked it for advice. It's response wasn't helpful.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>It seems like you have tried several different approaches to get the 7.5" e-paper waveshare display to work with your Raspberry Pi Pico, but haven't had success yet. Here are some suggestions that may help:
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>Double check the wiring connections: It's important to make sure that all the wiring connections between the display and the Pico are correct. Make sure to consult the datasheets and schematics of both the display and the Pico to ensure that you're connecting the correct pins.
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>Check the power supply: Make sure that the display is receiving adequate power. E-paper displays require a high voltage to operate, and it's possible that the power supply you're using isn't providing enough voltage.
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>Try a different library: If you're having trouble with the library you're currently using, try a different one. There are several libraries available for e-paper displays that work with the Raspberry Pi Pico, so try a few to see which one works best for your setup.
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>Verify the code: Make sure that the code you're using is correct and that it's compatible with your display and Pico. Double-check the code and verify that it matches the wiring connections.
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>Try a different display: If you're still having trouble, it's possible that the display itself is faulty. Try using a different display to see if that works with your Pico.
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>I hope these suggestions help you get your e-paper display working with your Raspberry Pi Pico. Good luck!
</span></code></pre></div>
<p>I then installed MicroPython using <a href="https://fabacademy.org/2023/labs/charlotte/students/adam-stone/lessons/week4/programming-microcontrollers/">my old documentation</a> as a tutorial. I had already downloaded a ZIP file of <a href="https://github.com/waveshare/e-Paper">this entire repo</a> so I copied the <code>waveshare_epd</code> folder into the RP2040 disk drive that appears when I plug it in while holding the bootloader button.</p>
<p>I installed MicroPython using my old documentation then followed ChatGPT's advice for writing a program in MicroPython using the Waveshare E-Paper library. I right-clicked a file and clicked <code>Upload to /</code> to move it into the Raspberry Pi Pico's harddrive.</p>
<p><img alt="Upload to Slash" src="../../../assets/images/stem/disability-forewarning-system/upload-to-slash.jpg"></p>
<p>I encountered many errors using ChatGPT and spent several hours going down a rabbit hole telling it everything that wasn't working. It told me that actually this wouldn't work with MircoPython and gave me the files and a workflow for how to install CircuitPython on a Raspberry Pi Pico. I held the bootloader button while plugging it in then dragged a UF2 file into the drive, causing the board to restart. <a href="https://fabacademy.org/2023/labs/charlotte/students/adam-stone/lessons/week9/gpt/">Here</a> is the full text of my conversation with ChatGPT, or just skip it and move on. The formatting may be slightly strange. In essence, there were so many hallucinations, and it was extremely unhelpful. I learned that I can be much more efficient if I just try to do it myself.</p>
<h2 id="different-approach">Different Approach</h2>
<p>I give up - too much hallucination.</p>
<p>Luckily, I found <a href="https://github.com/mcauser/micropython-waveshare-epaper">this library</a> that specifically deals with e-paper in MicroPython, but it doesn't go up to the <code>9.7"</code> display, so for now I'll just focus on the <code>7.5"</code> display.</p>
<p>Board not showing up - Press Bootsel, <a href="https://www.okdo.com/project/raspberry-pi-pico-reset-button/#:~:text=Push%20and%20hold%20the%20reset,Release%20the%20BOOTSEL%20button.">reset button</a>, releaes Bootsel, release reset button.</p>
<p>When I selected <code>&lt; Try to detect port automatically &gt;</code> finally worked. Turns out it wasn't the 3V output plugged into the e-paper display.</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">from</span> <span class="nn">micropython</span> <span class="kn">import</span> <span class="n">const</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep_ms</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="kn">import</span> <span class="nn">ustruct</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="c1"># Display resolution</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="n">EPD_WIDTH</span>  <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mi">640</span><span class="p">)</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="n">EPD_HEIGHT</span> <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mi">384</span><span class="p">)</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="c1"># Display commands</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="n">PANEL_SETTING</span>                  <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="n">POWER_SETTING</span>                  <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="n">POWER_OFF</span>                      <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x02</span><span class="p">)</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="c1">#POWER_OFF_SEQUENCE_SETTING     = const(0x03)</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="n">POWER_ON</span>                       <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x04</span><span class="p">)</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="c1">#POWER_ON_MEASURE               = const(0x05)</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="n">BOOSTER_SOFT_START</span>             <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x06</span><span class="p">)</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="n">DEEP_SLEEP</span>                     <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="n">DATA_START_TRANSMISSION_1</span>      <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="c1">#DATA_STOP                      = const(0x11)</span>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="n">DISPLAY_REFRESH</span>                <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x12</span><span class="p">)</span>
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="c1">#IMAGE_PROCESS                  = const(0x13)</span>
</span><span id="__span-14-22"><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="c1">#LUT_FOR_VCOM                   = const(0x20)</span>
</span><span id="__span-14-23"><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a><span class="c1">#LUT_BLUE                       = const(0x21)</span>
</span><span id="__span-14-24"><a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="c1">#LUT_WHITE                      = const(0x22)</span>
</span><span id="__span-14-25"><a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="c1">#LUT_GRAY_1                     = const(0x23)</span>
</span><span id="__span-14-26"><a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a><span class="c1">#LUT_GRAY_2                     = const(0x24)</span>
</span><span id="__span-14-27"><a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a><span class="c1">#LUT_RED_0                      = const(0x25)</span>
</span><span id="__span-14-28"><a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="c1">#LUT_RED_1                      = const(0x26)</span>
</span><span id="__span-14-29"><a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a><span class="c1">#LUT_RED_2                      = const(0x27)</span>
</span><span id="__span-14-30"><a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a><span class="c1">#LUT_RED_3                      = const(0x28)</span>
</span><span id="__span-14-31"><a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a><span class="c1">#LUT_XON                        = const(0x29)</span>
</span><span id="__span-14-32"><a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a><span class="n">PLL_CONTROL</span>                    <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x30</span><span class="p">)</span>
</span><span id="__span-14-33"><a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a><span class="c1">#TEMPERATURE_SENSOR_COMMAND     = const(0x40)</span>
</span><span id="__span-14-34"><a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a><span class="n">TEMPERATURE_CALIBRATION</span>        <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x41</span><span class="p">)</span>
</span><span id="__span-14-35"><a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a><span class="c1">#TEMPERATURE_SENSOR_WRITE       = const(0x42)</span>
</span><span id="__span-14-36"><a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a><span class="c1">#TEMPERATURE_SENSOR_READ        = const(0x43)</span>
</span><span id="__span-14-37"><a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a><span class="n">VCOM_AND_DATA_INTERVAL_SETTING</span> <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x50</span><span class="p">)</span>
</span><span id="__span-14-38"><a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a><span class="c1">#LOW_POWER_DETECTION            = const(0x51)</span>
</span><span id="__span-14-39"><a id="__codelineno-14-39" name="__codelineno-14-39" href="#__codelineno-14-39"></a><span class="n">TCON_SETTING</span>                   <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x60</span><span class="p">)</span>
</span><span id="__span-14-40"><a id="__codelineno-14-40" name="__codelineno-14-40" href="#__codelineno-14-40"></a><span class="n">TCON_RESOLUTION</span>                <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x61</span><span class="p">)</span>
</span><span id="__span-14-41"><a id="__codelineno-14-41" name="__codelineno-14-41" href="#__codelineno-14-41"></a><span class="c1">#SPI_FLASH_CONTROL              = const(0x65)</span>
</span><span id="__span-14-42"><a id="__codelineno-14-42" name="__codelineno-14-42" href="#__codelineno-14-42"></a><span class="c1">#REVISION                       = const(0x70)</span>
</span><span id="__span-14-43"><a id="__codelineno-14-43" name="__codelineno-14-43" href="#__codelineno-14-43"></a><span class="c1">#GET_STATUS                     = const(0x71)</span>
</span><span id="__span-14-44"><a id="__codelineno-14-44" name="__codelineno-14-44" href="#__codelineno-14-44"></a><span class="c1">#AUTO_MEASUREMENT_VCOM          = const(0x80)</span>
</span><span id="__span-14-45"><a id="__codelineno-14-45" name="__codelineno-14-45" href="#__codelineno-14-45"></a><span class="c1">#READ_VCOM_VALUE                = const(0x81)</span>
</span><span id="__span-14-46"><a id="__codelineno-14-46" name="__codelineno-14-46" href="#__codelineno-14-46"></a><span class="n">VCM_DC_SETTING</span>                 <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x82</span><span class="p">)</span>
</span><span id="__span-14-47"><a id="__codelineno-14-47" name="__codelineno-14-47" href="#__codelineno-14-47"></a><span class="n">FLASH_MODE</span>                     <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0xE5</span><span class="p">)</span>
</span><span id="__span-14-48"><a id="__codelineno-14-48" name="__codelineno-14-48" href="#__codelineno-14-48"></a>
</span><span id="__span-14-49"><a id="__codelineno-14-49" name="__codelineno-14-49" href="#__codelineno-14-49"></a><span class="n">BUSY</span> <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># 0=busy, 1=idle</span>
</span><span id="__span-14-50"><a id="__codelineno-14-50" name="__codelineno-14-50" href="#__codelineno-14-50"></a>
</span><span id="__span-14-51"><a id="__codelineno-14-51" name="__codelineno-14-51" href="#__codelineno-14-51"></a><span class="k">class</span> <span class="nc">EPD</span><span class="p">:</span>
</span><span id="__span-14-52"><a id="__codelineno-14-52" name="__codelineno-14-52" href="#__codelineno-14-52"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spi</span><span class="p">,</span> <span class="n">cs</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">rst</span><span class="p">,</span> <span class="n">busy</span><span class="p">):</span>
</span><span id="__span-14-53"><a id="__codelineno-14-53" name="__codelineno-14-53" href="#__codelineno-14-53"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span> <span class="o">=</span> <span class="n">spi</span>
</span><span id="__span-14-54"><a id="__codelineno-14-54" name="__codelineno-14-54" href="#__codelineno-14-54"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span> <span class="o">=</span> <span class="n">cs</span>
</span><span id="__span-14-55"><a id="__codelineno-14-55" name="__codelineno-14-55" href="#__codelineno-14-55"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc</span> <span class="o">=</span> <span class="n">dc</span>
</span><span id="__span-14-56"><a id="__codelineno-14-56" name="__codelineno-14-56" href="#__codelineno-14-56"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rst</span> <span class="o">=</span> <span class="n">rst</span>
</span><span id="__span-14-57"><a id="__codelineno-14-57" name="__codelineno-14-57" href="#__codelineno-14-57"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">busy</span> <span class="o">=</span> <span class="n">busy</span>
</span><span id="__span-14-58"><a id="__codelineno-14-58" name="__codelineno-14-58" href="#__codelineno-14-58"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-14-59"><a id="__codelineno-14-59" name="__codelineno-14-59" href="#__codelineno-14-59"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-14-60"><a id="__codelineno-14-60" name="__codelineno-14-60" href="#__codelineno-14-60"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rst</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rst</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-14-61"><a id="__codelineno-14-61" name="__codelineno-14-61" href="#__codelineno-14-61"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">busy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">busy</span><span class="o">.</span><span class="n">IN</span><span class="p">)</span>
</span><span id="__span-14-62"><a id="__codelineno-14-62" name="__codelineno-14-62" href="#__codelineno-14-62"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">EPD_WIDTH</span>
</span><span id="__span-14-63"><a id="__codelineno-14-63" name="__codelineno-14-63" href="#__codelineno-14-63"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">EPD_HEIGHT</span>
</span><span id="__span-14-64"><a id="__codelineno-14-64" name="__codelineno-14-64" href="#__codelineno-14-64"></a>
</span><span id="__span-14-65"><a id="__codelineno-14-65" name="__codelineno-14-65" href="#__codelineno-14-65"></a>    <span class="k">def</span> <span class="nf">_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="__span-14-66"><a id="__codelineno-14-66" name="__codelineno-14-66" href="#__codelineno-14-66"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-14-67"><a id="__codelineno-14-67" name="__codelineno-14-67" href="#__codelineno-14-67"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-14-68"><a id="__codelineno-14-68" name="__codelineno-14-68" href="#__codelineno-14-68"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">([</span><span class="n">command</span><span class="p">]))</span>
</span><span id="__span-14-69"><a id="__codelineno-14-69" name="__codelineno-14-69" href="#__codelineno-14-69"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-14-70"><a id="__codelineno-14-70" name="__codelineno-14-70" href="#__codelineno-14-70"></a>        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-14-71"><a id="__codelineno-14-71" name="__codelineno-14-71" href="#__codelineno-14-71"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-14-72"><a id="__codelineno-14-72" name="__codelineno-14-72" href="#__codelineno-14-72"></a>
</span><span id="__span-14-73"><a id="__codelineno-14-73" name="__codelineno-14-73" href="#__codelineno-14-73"></a>    <span class="k">def</span> <span class="nf">_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-14-74"><a id="__codelineno-14-74" name="__codelineno-14-74" href="#__codelineno-14-74"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-14-75"><a id="__codelineno-14-75" name="__codelineno-14-75" href="#__codelineno-14-75"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-14-76"><a id="__codelineno-14-76" name="__codelineno-14-76" href="#__codelineno-14-76"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-14-77"><a id="__codelineno-14-77" name="__codelineno-14-77" href="#__codelineno-14-77"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-14-78"><a id="__codelineno-14-78" name="__codelineno-14-78" href="#__codelineno-14-78"></a>
</span><span id="__span-14-79"><a id="__codelineno-14-79" name="__codelineno-14-79" href="#__codelineno-14-79"></a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-80"><a id="__codelineno-14-80" name="__codelineno-14-80" href="#__codelineno-14-80"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="__span-14-81"><a id="__codelineno-14-81" name="__codelineno-14-81" href="#__codelineno-14-81"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">POWER_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x37\x00</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-14-82"><a id="__codelineno-14-82" name="__codelineno-14-82" href="#__codelineno-14-82"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">PANEL_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\xCF\x08</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-14-83"><a id="__codelineno-14-83" name="__codelineno-14-83" href="#__codelineno-14-83"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">BOOSTER_SOFT_START</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\xC7\xCC\x28</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-14-84"><a id="__codelineno-14-84" name="__codelineno-14-84" href="#__codelineno-14-84"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">POWER_ON</span><span class="p">)</span>
</span><span id="__span-14-85"><a id="__codelineno-14-85" name="__codelineno-14-85" href="#__codelineno-14-85"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">wait_until_idle</span><span class="p">()</span>
</span><span id="__span-14-86"><a id="__codelineno-14-86" name="__codelineno-14-86" href="#__codelineno-14-86"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">PLL_CONTROL</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x3C</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-14-87"><a id="__codelineno-14-87" name="__codelineno-14-87" href="#__codelineno-14-87"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">TEMPERATURE_CALIBRATION</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x00</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-14-88"><a id="__codelineno-14-88" name="__codelineno-14-88" href="#__codelineno-14-88"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">VCOM_AND_DATA_INTERVAL_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x77</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-14-89"><a id="__codelineno-14-89" name="__codelineno-14-89" href="#__codelineno-14-89"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">TCON_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x22</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-14-90"><a id="__codelineno-14-90" name="__codelineno-14-90" href="#__codelineno-14-90"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">TCON_RESOLUTION</span><span class="p">,</span> <span class="n">ustruct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">"&gt;HH"</span><span class="p">,</span> <span class="n">EPD_WIDTH</span><span class="p">,</span> <span class="n">EPD_HEIGHT</span><span class="p">))</span>
</span><span id="__span-14-91"><a id="__codelineno-14-91" name="__codelineno-14-91" href="#__codelineno-14-91"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">VCM_DC_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x1E</span><span class="s1">'</span><span class="p">)</span> <span class="c1"># decide by LUT file</span>
</span><span id="__span-14-92"><a id="__codelineno-14-92" name="__codelineno-14-92" href="#__codelineno-14-92"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">FLASH_MODE</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x03</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-14-93"><a id="__codelineno-14-93" name="__codelineno-14-93" href="#__codelineno-14-93"></a>
</span><span id="__span-14-94"><a id="__codelineno-14-94" name="__codelineno-14-94" href="#__codelineno-14-94"></a>    <span class="k">def</span> <span class="nf">wait_until_idle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-95"><a id="__codelineno-14-95" name="__codelineno-14-95" href="#__codelineno-14-95"></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">busy</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="n">BUSY</span><span class="p">:</span>
</span><span id="__span-14-96"><a id="__codelineno-14-96" name="__codelineno-14-96" href="#__codelineno-14-96"></a>            <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-14-97"><a id="__codelineno-14-97" name="__codelineno-14-97" href="#__codelineno-14-97"></a>
</span><span id="__span-14-98"><a id="__codelineno-14-98" name="__codelineno-14-98" href="#__codelineno-14-98"></a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-99"><a id="__codelineno-14-99" name="__codelineno-14-99" href="#__codelineno-14-99"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rst</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-14-100"><a id="__codelineno-14-100" name="__codelineno-14-100" href="#__codelineno-14-100"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
</span><span id="__span-14-101"><a id="__codelineno-14-101" name="__codelineno-14-101" href="#__codelineno-14-101"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rst</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-14-102"><a id="__codelineno-14-102" name="__codelineno-14-102" href="#__codelineno-14-102"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
</span><span id="__span-14-103"><a id="__codelineno-14-103" name="__codelineno-14-103" href="#__codelineno-14-103"></a>
</span><span id="__span-14-104"><a id="__codelineno-14-104" name="__codelineno-14-104" href="#__codelineno-14-104"></a>    <span class="c1"># draw the current frame memory</span>
</span><span id="__span-14-105"><a id="__codelineno-14-105" name="__codelineno-14-105" href="#__codelineno-14-105"></a>    <span class="k">def</span> <span class="nf">display_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_buffer</span><span class="p">):</span>
</span><span id="__span-14-106"><a id="__codelineno-14-106" name="__codelineno-14-106" href="#__codelineno-14-106"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">DATA_START_TRANSMISSION_1</span><span class="p">)</span>
</span><span id="__span-14-107"><a id="__codelineno-14-107" name="__codelineno-14-107" href="#__codelineno-14-107"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">8</span><span class="p">):</span>
</span><span id="__span-14-108"><a id="__codelineno-14-108" name="__codelineno-14-108" href="#__codelineno-14-108"></a>            <span class="n">temp1</span> <span class="o">=</span> <span class="n">frame_buffer</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="__span-14-109"><a id="__codelineno-14-109" name="__codelineno-14-109" href="#__codelineno-14-109"></a>            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-14-110"><a id="__codelineno-14-110" name="__codelineno-14-110" href="#__codelineno-14-110"></a>            <span class="k">while</span> <span class="p">(</span><span class="n">j</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">):</span>
</span><span id="__span-14-111"><a id="__codelineno-14-111" name="__codelineno-14-111" href="#__codelineno-14-111"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">temp1</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">):</span>
</span><span id="__span-14-112"><a id="__codelineno-14-112" name="__codelineno-14-112" href="#__codelineno-14-112"></a>                    <span class="n">temp2</span> <span class="o">=</span> <span class="mh">0x03</span>
</span><span id="__span-14-113"><a id="__codelineno-14-113" name="__codelineno-14-113" href="#__codelineno-14-113"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-14-114"><a id="__codelineno-14-114" name="__codelineno-14-114" href="#__codelineno-14-114"></a>                    <span class="n">temp2</span> <span class="o">=</span> <span class="mh">0x00</span>
</span><span id="__span-14-115"><a id="__codelineno-14-115" name="__codelineno-14-115" href="#__codelineno-14-115"></a>                <span class="n">temp2</span> <span class="o">=</span> <span class="p">(</span><span class="n">temp2</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
</span><span id="__span-14-116"><a id="__codelineno-14-116" name="__codelineno-14-116" href="#__codelineno-14-116"></a>                <span class="n">temp1</span> <span class="o">=</span> <span class="p">(</span><span class="n">temp1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
</span><span id="__span-14-117"><a id="__codelineno-14-117" name="__codelineno-14-117" href="#__codelineno-14-117"></a>                <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-14-118"><a id="__codelineno-14-118" name="__codelineno-14-118" href="#__codelineno-14-118"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">temp1</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">):</span>
</span><span id="__span-14-119"><a id="__codelineno-14-119" name="__codelineno-14-119" href="#__codelineno-14-119"></a>                    <span class="n">temp2</span> <span class="o">|=</span> <span class="mh">0x03</span>
</span><span id="__span-14-120"><a id="__codelineno-14-120" name="__codelineno-14-120" href="#__codelineno-14-120"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-14-121"><a id="__codelineno-14-121" name="__codelineno-14-121" href="#__codelineno-14-121"></a>                    <span class="n">temp2</span> <span class="o">|=</span> <span class="mh">0x00</span>
</span><span id="__span-14-122"><a id="__codelineno-14-122" name="__codelineno-14-122" href="#__codelineno-14-122"></a>                <span class="n">temp1</span> <span class="o">=</span> <span class="p">(</span><span class="n">temp1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
</span><span id="__span-14-123"><a id="__codelineno-14-123" name="__codelineno-14-123" href="#__codelineno-14-123"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">([</span><span class="n">temp2</span><span class="p">]))</span>
</span><span id="__span-14-124"><a id="__codelineno-14-124" name="__codelineno-14-124" href="#__codelineno-14-124"></a>                <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-14-125"><a id="__codelineno-14-125" name="__codelineno-14-125" href="#__codelineno-14-125"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">DISPLAY_REFRESH</span><span class="p">)</span>
</span><span id="__span-14-126"><a id="__codelineno-14-126" name="__codelineno-14-126" href="#__codelineno-14-126"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-14-127"><a id="__codelineno-14-127" name="__codelineno-14-127" href="#__codelineno-14-127"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">wait_until_idle</span><span class="p">()</span>
</span><span id="__span-14-128"><a id="__codelineno-14-128" name="__codelineno-14-128" href="#__codelineno-14-128"></a>
</span><span id="__span-14-129"><a id="__codelineno-14-129" name="__codelineno-14-129" href="#__codelineno-14-129"></a>    <span class="c1"># to wake call reset() or init()</span>
</span><span id="__span-14-130"><a id="__codelineno-14-130" name="__codelineno-14-130" href="#__codelineno-14-130"></a>    <span class="k">def</span> <span class="nf">sleep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-131"><a id="__codelineno-14-131" name="__codelineno-14-131" href="#__codelineno-14-131"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">POWER_OFF</span><span class="p">)</span>
</span><span id="__span-14-132"><a id="__codelineno-14-132" name="__codelineno-14-132" href="#__codelineno-14-132"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">wait_until_idle</span><span class="p">()</span>
</span><span id="__span-14-133"><a id="__codelineno-14-133" name="__codelineno-14-133" href="#__codelineno-14-133"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">DEEP_SLEEP</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\xA5</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-14-134"><a id="__codelineno-14-134" name="__codelineno-14-134" href="#__codelineno-14-134"></a>
</span><span id="__span-14-135"><a id="__codelineno-14-135" name="__codelineno-14-135" href="#__codelineno-14-135"></a><span class="kn">import</span> <span class="nn">framebuf</span>
</span><span id="__span-14-136"><a id="__codelineno-14-136" name="__codelineno-14-136" href="#__codelineno-14-136"></a>
</span><span id="__span-14-137"><a id="__codelineno-14-137" name="__codelineno-14-137" href="#__codelineno-14-137"></a><span class="n">epd</span> <span class="o">=</span> <span class="n">EPD</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
</span><span id="__span-14-138"><a id="__codelineno-14-138" name="__codelineno-14-138" href="#__codelineno-14-138"></a><span class="c1">#self, spi, cs, dc, rst, busy</span>
</span><span id="__span-14-139"><a id="__codelineno-14-139" name="__codelineno-14-139" href="#__codelineno-14-139"></a><span class="n">epd</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span><span id="__span-14-140"><a id="__codelineno-14-140" name="__codelineno-14-140" href="#__codelineno-14-140"></a><span class="n">buffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">epd</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">epd</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="__span-14-141"><a id="__codelineno-14-141" name="__codelineno-14-141" href="#__codelineno-14-141"></a><span class="n">fb</span> <span class="o">=</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">epd</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">epd</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_HLSB</span><span class="p">)</span>
</span><span id="__span-14-142"><a id="__codelineno-14-142" name="__codelineno-14-142" href="#__codelineno-14-142"></a><span class="n">fb</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-14-143"><a id="__codelineno-14-143" name="__codelineno-14-143" href="#__codelineno-14-143"></a><span class="n">epd</span><span class="o">.</span><span class="n">display_frame</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
</span><span id="__span-14-144"><a id="__codelineno-14-144" name="__codelineno-14-144" href="#__codelineno-14-144"></a>
</span><span id="__span-14-145"><a id="__codelineno-14-145" name="__codelineno-14-145" href="#__codelineno-14-145"></a><span class="n">fb</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">"Hello, World!"</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-14-146"><a id="__codelineno-14-146" name="__codelineno-14-146" href="#__codelineno-14-146"></a><span class="n">epd</span><span class="o">.</span><span class="n">display_frame</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
</span></code></pre></div>
<p>Didn't work because numbers in <code>EPD</code> constructor needed to be Pin and SPI objects.</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">from</span> <span class="nn">micropython</span> <span class="kn">import</span> <span class="n">const</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep_ms</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="kn">import</span> <span class="nn">ustruct</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="c1"># Display resolution</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="n">EPD_WIDTH</span>  <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mi">640</span><span class="p">)</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="n">EPD_HEIGHT</span> <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mi">384</span><span class="p">)</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="c1"># Display commands</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="n">PANEL_SETTING</span>                  <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="n">POWER_SETTING</span>                  <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="n">POWER_OFF</span>                      <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x02</span><span class="p">)</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="c1">#POWER_OFF_SEQUENCE_SETTING     = const(0x03)</span>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="n">POWER_ON</span>                       <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x04</span><span class="p">)</span>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="c1">#POWER_ON_MEASURE               = const(0x05)</span>
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a><span class="n">BOOSTER_SOFT_START</span>             <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x06</span><span class="p">)</span>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="n">DEEP_SLEEP</span>                     <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span>
</span><span id="__span-15-18"><a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a><span class="n">DATA_START_TRANSMISSION_1</span>      <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-15-19"><a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a><span class="c1">#DATA_STOP                      = const(0x11)</span>
</span><span id="__span-15-20"><a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a><span class="n">DISPLAY_REFRESH</span>                <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x12</span><span class="p">)</span>
</span><span id="__span-15-21"><a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a><span class="c1">#IMAGE_PROCESS                  = const(0x13)</span>
</span><span id="__span-15-22"><a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a><span class="c1">#LUT_FOR_VCOM                   = const(0x20)</span>
</span><span id="__span-15-23"><a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a><span class="c1">#LUT_BLUE                       = const(0x21)</span>
</span><span id="__span-15-24"><a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a><span class="c1">#LUT_WHITE                      = const(0x22)</span>
</span><span id="__span-15-25"><a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a><span class="c1">#LUT_GRAY_1                     = const(0x23)</span>
</span><span id="__span-15-26"><a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a><span class="c1">#LUT_GRAY_2                     = const(0x24)</span>
</span><span id="__span-15-27"><a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a><span class="c1">#LUT_RED_0                      = const(0x25)</span>
</span><span id="__span-15-28"><a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a><span class="c1">#LUT_RED_1                      = const(0x26)</span>
</span><span id="__span-15-29"><a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a><span class="c1">#LUT_RED_2                      = const(0x27)</span>
</span><span id="__span-15-30"><a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a><span class="c1">#LUT_RED_3                      = const(0x28)</span>
</span><span id="__span-15-31"><a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a><span class="c1">#LUT_XON                        = const(0x29)</span>
</span><span id="__span-15-32"><a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a><span class="n">PLL_CONTROL</span>                    <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x30</span><span class="p">)</span>
</span><span id="__span-15-33"><a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a><span class="c1">#TEMPERATURE_SENSOR_COMMAND     = const(0x40)</span>
</span><span id="__span-15-34"><a id="__codelineno-15-34" name="__codelineno-15-34" href="#__codelineno-15-34"></a><span class="n">TEMPERATURE_CALIBRATION</span>        <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x41</span><span class="p">)</span>
</span><span id="__span-15-35"><a id="__codelineno-15-35" name="__codelineno-15-35" href="#__codelineno-15-35"></a><span class="c1">#TEMPERATURE_SENSOR_WRITE       = const(0x42)</span>
</span><span id="__span-15-36"><a id="__codelineno-15-36" name="__codelineno-15-36" href="#__codelineno-15-36"></a><span class="c1">#TEMPERATURE_SENSOR_READ        = const(0x43)</span>
</span><span id="__span-15-37"><a id="__codelineno-15-37" name="__codelineno-15-37" href="#__codelineno-15-37"></a><span class="n">VCOM_AND_DATA_INTERVAL_SETTING</span> <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x50</span><span class="p">)</span>
</span><span id="__span-15-38"><a id="__codelineno-15-38" name="__codelineno-15-38" href="#__codelineno-15-38"></a><span class="c1">#LOW_POWER_DETECTION            = const(0x51)</span>
</span><span id="__span-15-39"><a id="__codelineno-15-39" name="__codelineno-15-39" href="#__codelineno-15-39"></a><span class="n">TCON_SETTING</span>                   <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x60</span><span class="p">)</span>
</span><span id="__span-15-40"><a id="__codelineno-15-40" name="__codelineno-15-40" href="#__codelineno-15-40"></a><span class="n">TCON_RESOLUTION</span>                <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x61</span><span class="p">)</span>
</span><span id="__span-15-41"><a id="__codelineno-15-41" name="__codelineno-15-41" href="#__codelineno-15-41"></a><span class="c1">#SPI_FLASH_CONTROL              = const(0x65)</span>
</span><span id="__span-15-42"><a id="__codelineno-15-42" name="__codelineno-15-42" href="#__codelineno-15-42"></a><span class="c1">#REVISION                       = const(0x70)</span>
</span><span id="__span-15-43"><a id="__codelineno-15-43" name="__codelineno-15-43" href="#__codelineno-15-43"></a><span class="c1">#GET_STATUS                     = const(0x71)</span>
</span><span id="__span-15-44"><a id="__codelineno-15-44" name="__codelineno-15-44" href="#__codelineno-15-44"></a><span class="c1">#AUTO_MEASUREMENT_VCOM          = const(0x80)</span>
</span><span id="__span-15-45"><a id="__codelineno-15-45" name="__codelineno-15-45" href="#__codelineno-15-45"></a><span class="c1">#READ_VCOM_VALUE                = const(0x81)</span>
</span><span id="__span-15-46"><a id="__codelineno-15-46" name="__codelineno-15-46" href="#__codelineno-15-46"></a><span class="n">VCM_DC_SETTING</span>                 <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x82</span><span class="p">)</span>
</span><span id="__span-15-47"><a id="__codelineno-15-47" name="__codelineno-15-47" href="#__codelineno-15-47"></a><span class="n">FLASH_MODE</span>                     <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0xE5</span><span class="p">)</span>
</span><span id="__span-15-48"><a id="__codelineno-15-48" name="__codelineno-15-48" href="#__codelineno-15-48"></a>
</span><span id="__span-15-49"><a id="__codelineno-15-49" name="__codelineno-15-49" href="#__codelineno-15-49"></a><span class="n">BUSY</span> <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># 0=busy, 1=idle</span>
</span><span id="__span-15-50"><a id="__codelineno-15-50" name="__codelineno-15-50" href="#__codelineno-15-50"></a>
</span><span id="__span-15-51"><a id="__codelineno-15-51" name="__codelineno-15-51" href="#__codelineno-15-51"></a><span class="k">class</span> <span class="nc">EPD</span><span class="p">:</span>
</span><span id="__span-15-52"><a id="__codelineno-15-52" name="__codelineno-15-52" href="#__codelineno-15-52"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spi</span><span class="p">,</span> <span class="n">cs</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">rst</span><span class="p">,</span> <span class="n">busy</span><span class="p">):</span>
</span><span id="__span-15-53"><a id="__codelineno-15-53" name="__codelineno-15-53" href="#__codelineno-15-53"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span> <span class="o">=</span> <span class="n">spi</span>
</span><span id="__span-15-54"><a id="__codelineno-15-54" name="__codelineno-15-54" href="#__codelineno-15-54"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span> <span class="o">=</span> <span class="n">cs</span>
</span><span id="__span-15-55"><a id="__codelineno-15-55" name="__codelineno-15-55" href="#__codelineno-15-55"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc</span> <span class="o">=</span> <span class="n">dc</span>
</span><span id="__span-15-56"><a id="__codelineno-15-56" name="__codelineno-15-56" href="#__codelineno-15-56"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rst</span> <span class="o">=</span> <span class="n">rst</span>
</span><span id="__span-15-57"><a id="__codelineno-15-57" name="__codelineno-15-57" href="#__codelineno-15-57"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">busy</span> <span class="o">=</span> <span class="n">busy</span>
</span><span id="__span-15-58"><a id="__codelineno-15-58" name="__codelineno-15-58" href="#__codelineno-15-58"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-15-59"><a id="__codelineno-15-59" name="__codelineno-15-59" href="#__codelineno-15-59"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-15-60"><a id="__codelineno-15-60" name="__codelineno-15-60" href="#__codelineno-15-60"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rst</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rst</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-15-61"><a id="__codelineno-15-61" name="__codelineno-15-61" href="#__codelineno-15-61"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">busy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">busy</span><span class="o">.</span><span class="n">IN</span><span class="p">)</span>
</span><span id="__span-15-62"><a id="__codelineno-15-62" name="__codelineno-15-62" href="#__codelineno-15-62"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">EPD_WIDTH</span>
</span><span id="__span-15-63"><a id="__codelineno-15-63" name="__codelineno-15-63" href="#__codelineno-15-63"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">EPD_HEIGHT</span>
</span><span id="__span-15-64"><a id="__codelineno-15-64" name="__codelineno-15-64" href="#__codelineno-15-64"></a>
</span><span id="__span-15-65"><a id="__codelineno-15-65" name="__codelineno-15-65" href="#__codelineno-15-65"></a>    <span class="k">def</span> <span class="nf">_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="__span-15-66"><a id="__codelineno-15-66" name="__codelineno-15-66" href="#__codelineno-15-66"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-15-67"><a id="__codelineno-15-67" name="__codelineno-15-67" href="#__codelineno-15-67"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-15-68"><a id="__codelineno-15-68" name="__codelineno-15-68" href="#__codelineno-15-68"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">([</span><span class="n">command</span><span class="p">]))</span>
</span><span id="__span-15-69"><a id="__codelineno-15-69" name="__codelineno-15-69" href="#__codelineno-15-69"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-15-70"><a id="__codelineno-15-70" name="__codelineno-15-70" href="#__codelineno-15-70"></a>        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-15-71"><a id="__codelineno-15-71" name="__codelineno-15-71" href="#__codelineno-15-71"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-15-72"><a id="__codelineno-15-72" name="__codelineno-15-72" href="#__codelineno-15-72"></a>
</span><span id="__span-15-73"><a id="__codelineno-15-73" name="__codelineno-15-73" href="#__codelineno-15-73"></a>    <span class="k">def</span> <span class="nf">_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-15-74"><a id="__codelineno-15-74" name="__codelineno-15-74" href="#__codelineno-15-74"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-15-75"><a id="__codelineno-15-75" name="__codelineno-15-75" href="#__codelineno-15-75"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-15-76"><a id="__codelineno-15-76" name="__codelineno-15-76" href="#__codelineno-15-76"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-15-77"><a id="__codelineno-15-77" name="__codelineno-15-77" href="#__codelineno-15-77"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-15-78"><a id="__codelineno-15-78" name="__codelineno-15-78" href="#__codelineno-15-78"></a>
</span><span id="__span-15-79"><a id="__codelineno-15-79" name="__codelineno-15-79" href="#__codelineno-15-79"></a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-15-80"><a id="__codelineno-15-80" name="__codelineno-15-80" href="#__codelineno-15-80"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="__span-15-81"><a id="__codelineno-15-81" name="__codelineno-15-81" href="#__codelineno-15-81"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">POWER_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x37\x00</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-15-82"><a id="__codelineno-15-82" name="__codelineno-15-82" href="#__codelineno-15-82"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">PANEL_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\xCF\x08</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-15-83"><a id="__codelineno-15-83" name="__codelineno-15-83" href="#__codelineno-15-83"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">BOOSTER_SOFT_START</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\xC7\xCC\x28</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-15-84"><a id="__codelineno-15-84" name="__codelineno-15-84" href="#__codelineno-15-84"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">POWER_ON</span><span class="p">)</span>
</span><span id="__span-15-85"><a id="__codelineno-15-85" name="__codelineno-15-85" href="#__codelineno-15-85"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">wait_until_idle</span><span class="p">()</span>
</span><span id="__span-15-86"><a id="__codelineno-15-86" name="__codelineno-15-86" href="#__codelineno-15-86"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">PLL_CONTROL</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x3C</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-15-87"><a id="__codelineno-15-87" name="__codelineno-15-87" href="#__codelineno-15-87"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">TEMPERATURE_CALIBRATION</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x00</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-15-88"><a id="__codelineno-15-88" name="__codelineno-15-88" href="#__codelineno-15-88"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">VCOM_AND_DATA_INTERVAL_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x77</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-15-89"><a id="__codelineno-15-89" name="__codelineno-15-89" href="#__codelineno-15-89"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">TCON_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x22</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-15-90"><a id="__codelineno-15-90" name="__codelineno-15-90" href="#__codelineno-15-90"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">TCON_RESOLUTION</span><span class="p">,</span> <span class="n">ustruct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">"&gt;HH"</span><span class="p">,</span> <span class="n">EPD_WIDTH</span><span class="p">,</span> <span class="n">EPD_HEIGHT</span><span class="p">))</span>
</span><span id="__span-15-91"><a id="__codelineno-15-91" name="__codelineno-15-91" href="#__codelineno-15-91"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">VCM_DC_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x1E</span><span class="s1">'</span><span class="p">)</span> <span class="c1"># decide by LUT file</span>
</span><span id="__span-15-92"><a id="__codelineno-15-92" name="__codelineno-15-92" href="#__codelineno-15-92"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">FLASH_MODE</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x03</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-15-93"><a id="__codelineno-15-93" name="__codelineno-15-93" href="#__codelineno-15-93"></a>
</span><span id="__span-15-94"><a id="__codelineno-15-94" name="__codelineno-15-94" href="#__codelineno-15-94"></a>    <span class="k">def</span> <span class="nf">wait_until_idle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-15-95"><a id="__codelineno-15-95" name="__codelineno-15-95" href="#__codelineno-15-95"></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">busy</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="n">BUSY</span><span class="p">:</span>
</span><span id="__span-15-96"><a id="__codelineno-15-96" name="__codelineno-15-96" href="#__codelineno-15-96"></a>            <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-15-97"><a id="__codelineno-15-97" name="__codelineno-15-97" href="#__codelineno-15-97"></a>
</span><span id="__span-15-98"><a id="__codelineno-15-98" name="__codelineno-15-98" href="#__codelineno-15-98"></a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-15-99"><a id="__codelineno-15-99" name="__codelineno-15-99" href="#__codelineno-15-99"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rst</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-15-100"><a id="__codelineno-15-100" name="__codelineno-15-100" href="#__codelineno-15-100"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
</span><span id="__span-15-101"><a id="__codelineno-15-101" name="__codelineno-15-101" href="#__codelineno-15-101"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rst</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-15-102"><a id="__codelineno-15-102" name="__codelineno-15-102" href="#__codelineno-15-102"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
</span><span id="__span-15-103"><a id="__codelineno-15-103" name="__codelineno-15-103" href="#__codelineno-15-103"></a>
</span><span id="__span-15-104"><a id="__codelineno-15-104" name="__codelineno-15-104" href="#__codelineno-15-104"></a>    <span class="c1"># draw the current frame memory</span>
</span><span id="__span-15-105"><a id="__codelineno-15-105" name="__codelineno-15-105" href="#__codelineno-15-105"></a>    <span class="k">def</span> <span class="nf">display_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_buffer</span><span class="p">):</span>
</span><span id="__span-15-106"><a id="__codelineno-15-106" name="__codelineno-15-106" href="#__codelineno-15-106"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">DATA_START_TRANSMISSION_1</span><span class="p">)</span>
</span><span id="__span-15-107"><a id="__codelineno-15-107" name="__codelineno-15-107" href="#__codelineno-15-107"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">8</span><span class="p">):</span>
</span><span id="__span-15-108"><a id="__codelineno-15-108" name="__codelineno-15-108" href="#__codelineno-15-108"></a>            <span class="n">temp1</span> <span class="o">=</span> <span class="n">frame_buffer</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="__span-15-109"><a id="__codelineno-15-109" name="__codelineno-15-109" href="#__codelineno-15-109"></a>            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-15-110"><a id="__codelineno-15-110" name="__codelineno-15-110" href="#__codelineno-15-110"></a>            <span class="k">while</span> <span class="p">(</span><span class="n">j</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">):</span>
</span><span id="__span-15-111"><a id="__codelineno-15-111" name="__codelineno-15-111" href="#__codelineno-15-111"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">temp1</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">):</span>
</span><span id="__span-15-112"><a id="__codelineno-15-112" name="__codelineno-15-112" href="#__codelineno-15-112"></a>                    <span class="n">temp2</span> <span class="o">=</span> <span class="mh">0x03</span>
</span><span id="__span-15-113"><a id="__codelineno-15-113" name="__codelineno-15-113" href="#__codelineno-15-113"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-15-114"><a id="__codelineno-15-114" name="__codelineno-15-114" href="#__codelineno-15-114"></a>                    <span class="n">temp2</span> <span class="o">=</span> <span class="mh">0x00</span>
</span><span id="__span-15-115"><a id="__codelineno-15-115" name="__codelineno-15-115" href="#__codelineno-15-115"></a>                <span class="n">temp2</span> <span class="o">=</span> <span class="p">(</span><span class="n">temp2</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
</span><span id="__span-15-116"><a id="__codelineno-15-116" name="__codelineno-15-116" href="#__codelineno-15-116"></a>                <span class="n">temp1</span> <span class="o">=</span> <span class="p">(</span><span class="n">temp1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
</span><span id="__span-15-117"><a id="__codelineno-15-117" name="__codelineno-15-117" href="#__codelineno-15-117"></a>                <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-15-118"><a id="__codelineno-15-118" name="__codelineno-15-118" href="#__codelineno-15-118"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">temp1</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">):</span>
</span><span id="__span-15-119"><a id="__codelineno-15-119" name="__codelineno-15-119" href="#__codelineno-15-119"></a>                    <span class="n">temp2</span> <span class="o">|=</span> <span class="mh">0x03</span>
</span><span id="__span-15-120"><a id="__codelineno-15-120" name="__codelineno-15-120" href="#__codelineno-15-120"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-15-121"><a id="__codelineno-15-121" name="__codelineno-15-121" href="#__codelineno-15-121"></a>                    <span class="n">temp2</span> <span class="o">|=</span> <span class="mh">0x00</span>
</span><span id="__span-15-122"><a id="__codelineno-15-122" name="__codelineno-15-122" href="#__codelineno-15-122"></a>                <span class="n">temp1</span> <span class="o">=</span> <span class="p">(</span><span class="n">temp1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
</span><span id="__span-15-123"><a id="__codelineno-15-123" name="__codelineno-15-123" href="#__codelineno-15-123"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">([</span><span class="n">temp2</span><span class="p">]))</span>
</span><span id="__span-15-124"><a id="__codelineno-15-124" name="__codelineno-15-124" href="#__codelineno-15-124"></a>                <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-15-125"><a id="__codelineno-15-125" name="__codelineno-15-125" href="#__codelineno-15-125"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">DISPLAY_REFRESH</span><span class="p">)</span>
</span><span id="__span-15-126"><a id="__codelineno-15-126" name="__codelineno-15-126" href="#__codelineno-15-126"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-15-127"><a id="__codelineno-15-127" name="__codelineno-15-127" href="#__codelineno-15-127"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">wait_until_idle</span><span class="p">()</span>
</span><span id="__span-15-128"><a id="__codelineno-15-128" name="__codelineno-15-128" href="#__codelineno-15-128"></a>
</span><span id="__span-15-129"><a id="__codelineno-15-129" name="__codelineno-15-129" href="#__codelineno-15-129"></a>    <span class="c1"># to wake call reset() or init()</span>
</span><span id="__span-15-130"><a id="__codelineno-15-130" name="__codelineno-15-130" href="#__codelineno-15-130"></a>    <span class="k">def</span> <span class="nf">sleep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-15-131"><a id="__codelineno-15-131" name="__codelineno-15-131" href="#__codelineno-15-131"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">POWER_OFF</span><span class="p">)</span>
</span><span id="__span-15-132"><a id="__codelineno-15-132" name="__codelineno-15-132" href="#__codelineno-15-132"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">wait_until_idle</span><span class="p">()</span>
</span><span id="__span-15-133"><a id="__codelineno-15-133" name="__codelineno-15-133" href="#__codelineno-15-133"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">DEEP_SLEEP</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\xA5</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-15-134"><a id="__codelineno-15-134" name="__codelineno-15-134" href="#__codelineno-15-134"></a>
</span><span id="__span-15-135"><a id="__codelineno-15-135" name="__codelineno-15-135" href="#__codelineno-15-135"></a><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">SPI</span>
</span><span id="__span-15-136"><a id="__codelineno-15-136" name="__codelineno-15-136" href="#__codelineno-15-136"></a><span class="kn">import</span> <span class="nn">framebuf</span>
</span><span id="__span-15-137"><a id="__codelineno-15-137" name="__codelineno-15-137" href="#__codelineno-15-137"></a>
</span><span id="__span-15-138"><a id="__codelineno-15-138" name="__codelineno-15-138" href="#__codelineno-15-138"></a><span class="n">spi</span> <span class="o">=</span> <span class="n">SPI</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sck</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="mi">18</span><span class="p">),</span> <span class="n">mosi</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="mi">19</span><span class="p">),</span> <span class="n">miso</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span> <span class="n">baudrate</span><span class="o">=</span><span class="mi">2000000</span><span class="p">)</span>
</span><span id="__span-15-139"><a id="__codelineno-15-139" name="__codelineno-15-139" href="#__codelineno-15-139"></a><span class="n">cs</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-15-140"><a id="__codelineno-15-140" name="__codelineno-15-140" href="#__codelineno-15-140"></a><span class="n">dc</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-15-141"><a id="__codelineno-15-141" name="__codelineno-15-141" href="#__codelineno-15-141"></a><span class="n">rst</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-15-142"><a id="__codelineno-15-142" name="__codelineno-15-142" href="#__codelineno-15-142"></a><span class="n">busy</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">IN</span><span class="p">)</span>
</span><span id="__span-15-143"><a id="__codelineno-15-143" name="__codelineno-15-143" href="#__codelineno-15-143"></a>
</span><span id="__span-15-144"><a id="__codelineno-15-144" name="__codelineno-15-144" href="#__codelineno-15-144"></a><span class="n">epd</span> <span class="o">=</span> <span class="n">EPD</span><span class="p">(</span><span class="n">spi</span><span class="p">,</span> <span class="n">cs</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">rst</span><span class="p">,</span> <span class="n">busy</span><span class="p">)</span>
</span><span id="__span-15-145"><a id="__codelineno-15-145" name="__codelineno-15-145" href="#__codelineno-15-145"></a><span class="c1">#self, spi, cs, dc, rst, busy</span>
</span><span id="__span-15-146"><a id="__codelineno-15-146" name="__codelineno-15-146" href="#__codelineno-15-146"></a><span class="n">epd</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span><span id="__span-15-147"><a id="__codelineno-15-147" name="__codelineno-15-147" href="#__codelineno-15-147"></a><span class="n">buffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">epd</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">epd</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="__span-15-148"><a id="__codelineno-15-148" name="__codelineno-15-148" href="#__codelineno-15-148"></a><span class="n">fb</span> <span class="o">=</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">epd</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">epd</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_HLSB</span><span class="p">)</span>
</span><span id="__span-15-149"><a id="__codelineno-15-149" name="__codelineno-15-149" href="#__codelineno-15-149"></a><span class="n">fb</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-15-150"><a id="__codelineno-15-150" name="__codelineno-15-150" href="#__codelineno-15-150"></a><span class="n">epd</span><span class="o">.</span><span class="n">display_frame</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
</span><span id="__span-15-151"><a id="__codelineno-15-151" name="__codelineno-15-151" href="#__codelineno-15-151"></a>
</span><span id="__span-15-152"><a id="__codelineno-15-152" name="__codelineno-15-152" href="#__codelineno-15-152"></a><span class="n">fb</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">"Hello, World!"</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-15-153"><a id="__codelineno-15-153" name="__codelineno-15-153" href="#__codelineno-15-153"></a><span class="n">epd</span><span class="o">.</span><span class="n">display_frame</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
</span></code></pre></div>
<p>This didn't work:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kn">from</span> <span class="nn">micropython</span> <span class="kn">import</span> <span class="n">const</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep_ms</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="kn">import</span> <span class="nn">ustruct</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="c1"># Display resolution</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="n">EPD_WIDTH</span>  <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mi">640</span><span class="p">)</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="n">EPD_HEIGHT</span> <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mi">384</span><span class="p">)</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="c1"># Display commands</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="n">PANEL_SETTING</span>                  <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="n">POWER_SETTING</span>                  <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="n">POWER_OFF</span>                      <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x02</span><span class="p">)</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="c1">#POWER_OFF_SEQUENCE_SETTING     = const(0x03)</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="n">POWER_ON</span>                       <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x04</span><span class="p">)</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="c1">#POWER_ON_MEASURE               = const(0x05)</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="n">BOOSTER_SOFT_START</span>             <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x06</span><span class="p">)</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="n">DEEP_SLEEP</span>                     <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="n">DATA_START_TRANSMISSION_1</span>      <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a><span class="c1">#DATA_STOP                      = const(0x11)</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a><span class="n">DISPLAY_REFRESH</span>                <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x12</span><span class="p">)</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a><span class="c1">#IMAGE_PROCESS                  = const(0x13)</span>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a><span class="c1">#LUT_FOR_VCOM                   = const(0x20)</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a><span class="c1">#LUT_BLUE                       = const(0x21)</span>
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a><span class="c1">#LUT_WHITE                      = const(0x22)</span>
</span><span id="__span-16-25"><a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a><span class="c1">#LUT_GRAY_1                     = const(0x23)</span>
</span><span id="__span-16-26"><a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a><span class="c1">#LUT_GRAY_2                     = const(0x24)</span>
</span><span id="__span-16-27"><a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a><span class="c1">#LUT_RED_0                      = const(0x25)</span>
</span><span id="__span-16-28"><a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a><span class="c1">#LUT_RED_1                      = const(0x26)</span>
</span><span id="__span-16-29"><a id="__codelineno-16-29" name="__codelineno-16-29" href="#__codelineno-16-29"></a><span class="c1">#LUT_RED_2                      = const(0x27)</span>
</span><span id="__span-16-30"><a id="__codelineno-16-30" name="__codelineno-16-30" href="#__codelineno-16-30"></a><span class="c1">#LUT_RED_3                      = const(0x28)</span>
</span><span id="__span-16-31"><a id="__codelineno-16-31" name="__codelineno-16-31" href="#__codelineno-16-31"></a><span class="c1">#LUT_XON                        = const(0x29)</span>
</span><span id="__span-16-32"><a id="__codelineno-16-32" name="__codelineno-16-32" href="#__codelineno-16-32"></a><span class="n">PLL_CONTROL</span>                    <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x30</span><span class="p">)</span>
</span><span id="__span-16-33"><a id="__codelineno-16-33" name="__codelineno-16-33" href="#__codelineno-16-33"></a><span class="c1">#TEMPERATURE_SENSOR_COMMAND     = const(0x40)</span>
</span><span id="__span-16-34"><a id="__codelineno-16-34" name="__codelineno-16-34" href="#__codelineno-16-34"></a><span class="n">TEMPERATURE_CALIBRATION</span>        <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x41</span><span class="p">)</span>
</span><span id="__span-16-35"><a id="__codelineno-16-35" name="__codelineno-16-35" href="#__codelineno-16-35"></a><span class="c1">#TEMPERATURE_SENSOR_WRITE       = const(0x42)</span>
</span><span id="__span-16-36"><a id="__codelineno-16-36" name="__codelineno-16-36" href="#__codelineno-16-36"></a><span class="c1">#TEMPERATURE_SENSOR_READ        = const(0x43)</span>
</span><span id="__span-16-37"><a id="__codelineno-16-37" name="__codelineno-16-37" href="#__codelineno-16-37"></a><span class="n">VCOM_AND_DATA_INTERVAL_SETTING</span> <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x50</span><span class="p">)</span>
</span><span id="__span-16-38"><a id="__codelineno-16-38" name="__codelineno-16-38" href="#__codelineno-16-38"></a><span class="c1">#LOW_POWER_DETECTION            = const(0x51)</span>
</span><span id="__span-16-39"><a id="__codelineno-16-39" name="__codelineno-16-39" href="#__codelineno-16-39"></a><span class="n">TCON_SETTING</span>                   <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x60</span><span class="p">)</span>
</span><span id="__span-16-40"><a id="__codelineno-16-40" name="__codelineno-16-40" href="#__codelineno-16-40"></a><span class="n">TCON_RESOLUTION</span>                <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x61</span><span class="p">)</span>
</span><span id="__span-16-41"><a id="__codelineno-16-41" name="__codelineno-16-41" href="#__codelineno-16-41"></a><span class="c1">#SPI_FLASH_CONTROL              = const(0x65)</span>
</span><span id="__span-16-42"><a id="__codelineno-16-42" name="__codelineno-16-42" href="#__codelineno-16-42"></a><span class="c1">#REVISION                       = const(0x70)</span>
</span><span id="__span-16-43"><a id="__codelineno-16-43" name="__codelineno-16-43" href="#__codelineno-16-43"></a><span class="c1">#GET_STATUS                     = const(0x71)</span>
</span><span id="__span-16-44"><a id="__codelineno-16-44" name="__codelineno-16-44" href="#__codelineno-16-44"></a><span class="c1">#AUTO_MEASUREMENT_VCOM          = const(0x80)</span>
</span><span id="__span-16-45"><a id="__codelineno-16-45" name="__codelineno-16-45" href="#__codelineno-16-45"></a><span class="c1">#READ_VCOM_VALUE                = const(0x81)</span>
</span><span id="__span-16-46"><a id="__codelineno-16-46" name="__codelineno-16-46" href="#__codelineno-16-46"></a><span class="n">VCM_DC_SETTING</span>                 <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0x82</span><span class="p">)</span>
</span><span id="__span-16-47"><a id="__codelineno-16-47" name="__codelineno-16-47" href="#__codelineno-16-47"></a><span class="n">FLASH_MODE</span>                     <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mh">0xE5</span><span class="p">)</span>
</span><span id="__span-16-48"><a id="__codelineno-16-48" name="__codelineno-16-48" href="#__codelineno-16-48"></a>
</span><span id="__span-16-49"><a id="__codelineno-16-49" name="__codelineno-16-49" href="#__codelineno-16-49"></a><span class="n">BUSY</span> <span class="o">=</span> <span class="n">const</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># 0=busy, 1=idle</span>
</span><span id="__span-16-50"><a id="__codelineno-16-50" name="__codelineno-16-50" href="#__codelineno-16-50"></a>
</span><span id="__span-16-51"><a id="__codelineno-16-51" name="__codelineno-16-51" href="#__codelineno-16-51"></a><span class="k">class</span> <span class="nc">EPD</span><span class="p">:</span>
</span><span id="__span-16-52"><a id="__codelineno-16-52" name="__codelineno-16-52" href="#__codelineno-16-52"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spi</span><span class="p">,</span> <span class="n">cs</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">rst</span><span class="p">,</span> <span class="n">busy</span><span class="p">):</span>
</span><span id="__span-16-53"><a id="__codelineno-16-53" name="__codelineno-16-53" href="#__codelineno-16-53"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span> <span class="o">=</span> <span class="n">spi</span>
</span><span id="__span-16-54"><a id="__codelineno-16-54" name="__codelineno-16-54" href="#__codelineno-16-54"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span> <span class="o">=</span> <span class="n">cs</span>
</span><span id="__span-16-55"><a id="__codelineno-16-55" name="__codelineno-16-55" href="#__codelineno-16-55"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc</span> <span class="o">=</span> <span class="n">dc</span>
</span><span id="__span-16-56"><a id="__codelineno-16-56" name="__codelineno-16-56" href="#__codelineno-16-56"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rst</span> <span class="o">=</span> <span class="n">rst</span>
</span><span id="__span-16-57"><a id="__codelineno-16-57" name="__codelineno-16-57" href="#__codelineno-16-57"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">busy</span> <span class="o">=</span> <span class="n">busy</span>
</span><span id="__span-16-58"><a id="__codelineno-16-58" name="__codelineno-16-58" href="#__codelineno-16-58"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-16-59"><a id="__codelineno-16-59" name="__codelineno-16-59" href="#__codelineno-16-59"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-16-60"><a id="__codelineno-16-60" name="__codelineno-16-60" href="#__codelineno-16-60"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rst</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rst</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-16-61"><a id="__codelineno-16-61" name="__codelineno-16-61" href="#__codelineno-16-61"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">busy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">busy</span><span class="o">.</span><span class="n">IN</span><span class="p">)</span>
</span><span id="__span-16-62"><a id="__codelineno-16-62" name="__codelineno-16-62" href="#__codelineno-16-62"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">EPD_WIDTH</span>
</span><span id="__span-16-63"><a id="__codelineno-16-63" name="__codelineno-16-63" href="#__codelineno-16-63"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">EPD_HEIGHT</span>
</span><span id="__span-16-64"><a id="__codelineno-16-64" name="__codelineno-16-64" href="#__codelineno-16-64"></a>
</span><span id="__span-16-65"><a id="__codelineno-16-65" name="__codelineno-16-65" href="#__codelineno-16-65"></a>    <span class="k">def</span> <span class="nf">_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="__span-16-66"><a id="__codelineno-16-66" name="__codelineno-16-66" href="#__codelineno-16-66"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-16-67"><a id="__codelineno-16-67" name="__codelineno-16-67" href="#__codelineno-16-67"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-16-68"><a id="__codelineno-16-68" name="__codelineno-16-68" href="#__codelineno-16-68"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">([</span><span class="n">command</span><span class="p">]))</span>
</span><span id="__span-16-69"><a id="__codelineno-16-69" name="__codelineno-16-69" href="#__codelineno-16-69"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-16-70"><a id="__codelineno-16-70" name="__codelineno-16-70" href="#__codelineno-16-70"></a>        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-16-71"><a id="__codelineno-16-71" name="__codelineno-16-71" href="#__codelineno-16-71"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-16-72"><a id="__codelineno-16-72" name="__codelineno-16-72" href="#__codelineno-16-72"></a>
</span><span id="__span-16-73"><a id="__codelineno-16-73" name="__codelineno-16-73" href="#__codelineno-16-73"></a>    <span class="k">def</span> <span class="nf">_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-16-74"><a id="__codelineno-16-74" name="__codelineno-16-74" href="#__codelineno-16-74"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-16-75"><a id="__codelineno-16-75" name="__codelineno-16-75" href="#__codelineno-16-75"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-16-76"><a id="__codelineno-16-76" name="__codelineno-16-76" href="#__codelineno-16-76"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-16-77"><a id="__codelineno-16-77" name="__codelineno-16-77" href="#__codelineno-16-77"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-16-78"><a id="__codelineno-16-78" name="__codelineno-16-78" href="#__codelineno-16-78"></a>
</span><span id="__span-16-79"><a id="__codelineno-16-79" name="__codelineno-16-79" href="#__codelineno-16-79"></a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-16-80"><a id="__codelineno-16-80" name="__codelineno-16-80" href="#__codelineno-16-80"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"started restart"</span><span class="p">)</span>
</span><span id="__span-16-81"><a id="__codelineno-16-81" name="__codelineno-16-81" href="#__codelineno-16-81"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="__span-16-82"><a id="__codelineno-16-82" name="__codelineno-16-82" href="#__codelineno-16-82"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"finished restarting"</span><span class="p">)</span>
</span><span id="__span-16-83"><a id="__codelineno-16-83" name="__codelineno-16-83" href="#__codelineno-16-83"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">POWER_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x37\x00</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-16-84"><a id="__codelineno-16-84" name="__codelineno-16-84" href="#__codelineno-16-84"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">PANEL_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\xCF\x08</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-16-85"><a id="__codelineno-16-85" name="__codelineno-16-85" href="#__codelineno-16-85"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">BOOSTER_SOFT_START</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\xC7\xCC\x28</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-16-86"><a id="__codelineno-16-86" name="__codelineno-16-86" href="#__codelineno-16-86"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">POWER_ON</span><span class="p">)</span>
</span><span id="__span-16-87"><a id="__codelineno-16-87" name="__codelineno-16-87" href="#__codelineno-16-87"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"waiting until idle"</span><span class="p">)</span>
</span><span id="__span-16-88"><a id="__codelineno-16-88" name="__codelineno-16-88" href="#__codelineno-16-88"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">wait_until_idle</span><span class="p">()</span>
</span><span id="__span-16-89"><a id="__codelineno-16-89" name="__codelineno-16-89" href="#__codelineno-16-89"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">PLL_CONTROL</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x3C</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-16-90"><a id="__codelineno-16-90" name="__codelineno-16-90" href="#__codelineno-16-90"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">TEMPERATURE_CALIBRATION</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x00</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-16-91"><a id="__codelineno-16-91" name="__codelineno-16-91" href="#__codelineno-16-91"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">VCOM_AND_DATA_INTERVAL_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x77</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-16-92"><a id="__codelineno-16-92" name="__codelineno-16-92" href="#__codelineno-16-92"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">TCON_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x22</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-16-93"><a id="__codelineno-16-93" name="__codelineno-16-93" href="#__codelineno-16-93"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">TCON_RESOLUTION</span><span class="p">,</span> <span class="n">ustruct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">"&gt;HH"</span><span class="p">,</span> <span class="n">EPD_WIDTH</span><span class="p">,</span> <span class="n">EPD_HEIGHT</span><span class="p">))</span>
</span><span id="__span-16-94"><a id="__codelineno-16-94" name="__codelineno-16-94" href="#__codelineno-16-94"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">VCM_DC_SETTING</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x1E</span><span class="s1">'</span><span class="p">)</span> <span class="c1"># decide by LUT file</span>
</span><span id="__span-16-95"><a id="__codelineno-16-95" name="__codelineno-16-95" href="#__codelineno-16-95"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">FLASH_MODE</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\x03</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-16-96"><a id="__codelineno-16-96" name="__codelineno-16-96" href="#__codelineno-16-96"></a>
</span><span id="__span-16-97"><a id="__codelineno-16-97" name="__codelineno-16-97" href="#__codelineno-16-97"></a>    <span class="k">def</span> <span class="nf">wait_until_idle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-16-98"><a id="__codelineno-16-98" name="__codelineno-16-98" href="#__codelineno-16-98"></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">busy</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="n">BUSY</span><span class="p">:</span>
</span><span id="__span-16-99"><a id="__codelineno-16-99" name="__codelineno-16-99" href="#__codelineno-16-99"></a>            <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-16-100"><a id="__codelineno-16-100" name="__codelineno-16-100" href="#__codelineno-16-100"></a>
</span><span id="__span-16-101"><a id="__codelineno-16-101" name="__codelineno-16-101" href="#__codelineno-16-101"></a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-16-102"><a id="__codelineno-16-102" name="__codelineno-16-102" href="#__codelineno-16-102"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rst</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-16-103"><a id="__codelineno-16-103" name="__codelineno-16-103" href="#__codelineno-16-103"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
</span><span id="__span-16-104"><a id="__codelineno-16-104" name="__codelineno-16-104" href="#__codelineno-16-104"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">rst</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-16-105"><a id="__codelineno-16-105" name="__codelineno-16-105" href="#__codelineno-16-105"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
</span><span id="__span-16-106"><a id="__codelineno-16-106" name="__codelineno-16-106" href="#__codelineno-16-106"></a>
</span><span id="__span-16-107"><a id="__codelineno-16-107" name="__codelineno-16-107" href="#__codelineno-16-107"></a>    <span class="c1"># draw the current frame memory</span>
</span><span id="__span-16-108"><a id="__codelineno-16-108" name="__codelineno-16-108" href="#__codelineno-16-108"></a>    <span class="k">def</span> <span class="nf">display_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_buffer</span><span class="p">):</span>
</span><span id="__span-16-109"><a id="__codelineno-16-109" name="__codelineno-16-109" href="#__codelineno-16-109"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">DATA_START_TRANSMISSION_1</span><span class="p">)</span>
</span><span id="__span-16-110"><a id="__codelineno-16-110" name="__codelineno-16-110" href="#__codelineno-16-110"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">8</span><span class="p">):</span>
</span><span id="__span-16-111"><a id="__codelineno-16-111" name="__codelineno-16-111" href="#__codelineno-16-111"></a>            <span class="n">temp1</span> <span class="o">=</span> <span class="n">frame_buffer</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="__span-16-112"><a id="__codelineno-16-112" name="__codelineno-16-112" href="#__codelineno-16-112"></a>            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-16-113"><a id="__codelineno-16-113" name="__codelineno-16-113" href="#__codelineno-16-113"></a>            <span class="k">while</span> <span class="p">(</span><span class="n">j</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">):</span>
</span><span id="__span-16-114"><a id="__codelineno-16-114" name="__codelineno-16-114" href="#__codelineno-16-114"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">temp1</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">):</span>
</span><span id="__span-16-115"><a id="__codelineno-16-115" name="__codelineno-16-115" href="#__codelineno-16-115"></a>                    <span class="n">temp2</span> <span class="o">=</span> <span class="mh">0x03</span>
</span><span id="__span-16-116"><a id="__codelineno-16-116" name="__codelineno-16-116" href="#__codelineno-16-116"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-16-117"><a id="__codelineno-16-117" name="__codelineno-16-117" href="#__codelineno-16-117"></a>                    <span class="n">temp2</span> <span class="o">=</span> <span class="mh">0x00</span>
</span><span id="__span-16-118"><a id="__codelineno-16-118" name="__codelineno-16-118" href="#__codelineno-16-118"></a>                <span class="n">temp2</span> <span class="o">=</span> <span class="p">(</span><span class="n">temp2</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
</span><span id="__span-16-119"><a id="__codelineno-16-119" name="__codelineno-16-119" href="#__codelineno-16-119"></a>                <span class="n">temp1</span> <span class="o">=</span> <span class="p">(</span><span class="n">temp1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
</span><span id="__span-16-120"><a id="__codelineno-16-120" name="__codelineno-16-120" href="#__codelineno-16-120"></a>                <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-16-121"><a id="__codelineno-16-121" name="__codelineno-16-121" href="#__codelineno-16-121"></a>                <span class="k">if</span> <span class="p">(</span><span class="n">temp1</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">):</span>
</span><span id="__span-16-122"><a id="__codelineno-16-122" name="__codelineno-16-122" href="#__codelineno-16-122"></a>                    <span class="n">temp2</span> <span class="o">|=</span> <span class="mh">0x03</span>
</span><span id="__span-16-123"><a id="__codelineno-16-123" name="__codelineno-16-123" href="#__codelineno-16-123"></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="__span-16-124"><a id="__codelineno-16-124" name="__codelineno-16-124" href="#__codelineno-16-124"></a>                    <span class="n">temp2</span> <span class="o">|=</span> <span class="mh">0x00</span>
</span><span id="__span-16-125"><a id="__codelineno-16-125" name="__codelineno-16-125" href="#__codelineno-16-125"></a>                <span class="n">temp1</span> <span class="o">=</span> <span class="p">(</span><span class="n">temp1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
</span><span id="__span-16-126"><a id="__codelineno-16-126" name="__codelineno-16-126" href="#__codelineno-16-126"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">([</span><span class="n">temp2</span><span class="p">]))</span>
</span><span id="__span-16-127"><a id="__codelineno-16-127" name="__codelineno-16-127" href="#__codelineno-16-127"></a>                <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-16-128"><a id="__codelineno-16-128" name="__codelineno-16-128" href="#__codelineno-16-128"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">DISPLAY_REFRESH</span><span class="p">)</span>
</span><span id="__span-16-129"><a id="__codelineno-16-129" name="__codelineno-16-129" href="#__codelineno-16-129"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-16-130"><a id="__codelineno-16-130" name="__codelineno-16-130" href="#__codelineno-16-130"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">wait_until_idle</span><span class="p">()</span>
</span><span id="__span-16-131"><a id="__codelineno-16-131" name="__codelineno-16-131" href="#__codelineno-16-131"></a>
</span><span id="__span-16-132"><a id="__codelineno-16-132" name="__codelineno-16-132" href="#__codelineno-16-132"></a>    <span class="c1"># to wake call reset() or init()</span>
</span><span id="__span-16-133"><a id="__codelineno-16-133" name="__codelineno-16-133" href="#__codelineno-16-133"></a>    <span class="k">def</span> <span class="nf">sleep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-16-134"><a id="__codelineno-16-134" name="__codelineno-16-134" href="#__codelineno-16-134"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">POWER_OFF</span><span class="p">)</span>
</span><span id="__span-16-135"><a id="__codelineno-16-135" name="__codelineno-16-135" href="#__codelineno-16-135"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">wait_until_idle</span><span class="p">()</span>
</span><span id="__span-16-136"><a id="__codelineno-16-136" name="__codelineno-16-136" href="#__codelineno-16-136"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_command</span><span class="p">(</span><span class="n">DEEP_SLEEP</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'</span><span class="se">\xA5</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-16-137"><a id="__codelineno-16-137" name="__codelineno-16-137" href="#__codelineno-16-137"></a>
</span><span id="__span-16-138"><a id="__codelineno-16-138" name="__codelineno-16-138" href="#__codelineno-16-138"></a><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">SPI</span>
</span><span id="__span-16-139"><a id="__codelineno-16-139" name="__codelineno-16-139" href="#__codelineno-16-139"></a><span class="kn">import</span> <span class="nn">framebuf</span>
</span><span id="__span-16-140"><a id="__codelineno-16-140" name="__codelineno-16-140" href="#__codelineno-16-140"></a>
</span><span id="__span-16-141"><a id="__codelineno-16-141" name="__codelineno-16-141" href="#__codelineno-16-141"></a><span class="nb">print</span><span class="p">(</span><span class="s2">"creating objs"</span><span class="p">)</span>
</span><span id="__span-16-142"><a id="__codelineno-16-142" name="__codelineno-16-142" href="#__codelineno-16-142"></a><span class="n">spi</span> <span class="o">=</span> <span class="n">SPI</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sck</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="mi">18</span><span class="p">),</span> <span class="n">mosi</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="mi">19</span><span class="p">),</span> <span class="n">miso</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span> <span class="n">baudrate</span><span class="o">=</span><span class="mi">2000000</span><span class="p">)</span>
</span><span id="__span-16-143"><a id="__codelineno-16-143" name="__codelineno-16-143" href="#__codelineno-16-143"></a><span class="n">cs</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-16-144"><a id="__codelineno-16-144" name="__codelineno-16-144" href="#__codelineno-16-144"></a><span class="n">dc</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-16-145"><a id="__codelineno-16-145" name="__codelineno-16-145" href="#__codelineno-16-145"></a><span class="n">rst</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-16-146"><a id="__codelineno-16-146" name="__codelineno-16-146" href="#__codelineno-16-146"></a><span class="n">busy</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">IN</span><span class="p">)</span>
</span><span id="__span-16-147"><a id="__codelineno-16-147" name="__codelineno-16-147" href="#__codelineno-16-147"></a>
</span><span id="__span-16-148"><a id="__codelineno-16-148" name="__codelineno-16-148" href="#__codelineno-16-148"></a><span class="nb">print</span><span class="p">(</span><span class="s2">"initializing"</span><span class="p">)</span>
</span><span id="__span-16-149"><a id="__codelineno-16-149" name="__codelineno-16-149" href="#__codelineno-16-149"></a><span class="n">epd</span> <span class="o">=</span> <span class="n">EPD</span><span class="p">(</span><span class="n">spi</span><span class="p">,</span> <span class="n">cs</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">rst</span><span class="p">,</span> <span class="n">busy</span><span class="p">)</span>
</span><span id="__span-16-150"><a id="__codelineno-16-150" name="__codelineno-16-150" href="#__codelineno-16-150"></a><span class="c1">#self, spi, cs, dc, rst, busy</span>
</span><span id="__span-16-151"><a id="__codelineno-16-151" name="__codelineno-16-151" href="#__codelineno-16-151"></a><span class="nb">print</span><span class="p">(</span><span class="s2">"epd instance created"</span><span class="p">)</span>
</span><span id="__span-16-152"><a id="__codelineno-16-152" name="__codelineno-16-152" href="#__codelineno-16-152"></a><span class="n">epd</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span><span id="__span-16-153"><a id="__codelineno-16-153" name="__codelineno-16-153" href="#__codelineno-16-153"></a><span class="nb">print</span><span class="p">(</span><span class="s2">"initialized"</span><span class="p">)</span>
</span><span id="__span-16-154"><a id="__codelineno-16-154" name="__codelineno-16-154" href="#__codelineno-16-154"></a><span class="n">buffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">epd</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">epd</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="__span-16-155"><a id="__codelineno-16-155" name="__codelineno-16-155" href="#__codelineno-16-155"></a><span class="n">fb</span> <span class="o">=</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">epd</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">epd</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_HLSB</span><span class="p">)</span>
</span><span id="__span-16-156"><a id="__codelineno-16-156" name="__codelineno-16-156" href="#__codelineno-16-156"></a><span class="n">fb</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-16-157"><a id="__codelineno-16-157" name="__codelineno-16-157" href="#__codelineno-16-157"></a><span class="n">epd</span><span class="o">.</span><span class="n">display_frame</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
</span><span id="__span-16-158"><a id="__codelineno-16-158" name="__codelineno-16-158" href="#__codelineno-16-158"></a>
</span><span id="__span-16-159"><a id="__codelineno-16-159" name="__codelineno-16-159" href="#__codelineno-16-159"></a><span class="nb">print</span><span class="p">(</span><span class="s2">"ready to hello, world!"</span><span class="p">)</span>
</span><span id="__span-16-160"><a id="__codelineno-16-160" name="__codelineno-16-160" href="#__codelineno-16-160"></a><span class="n">fb</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">"Hello, World!"</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-16-161"><a id="__codelineno-16-161" name="__codelineno-16-161" href="#__codelineno-16-161"></a><span class="n">epd</span><span class="o">.</span><span class="n">display_frame</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
</span></code></pre></div>
<p>I thought I maybe had the wrong type of board. I also tried the <code>4.2"</code> e-paper display using the example code and fixing the wiring, and nothing happened. Partway through I noticed that the screen had become red and there were some gray specks, but I couldn't get anything to be controlled. I realized that I had all of the ribbon cables upside down, but they still didn't work when I corrected them. I even tried a different Pico and asked ChatGPT about the wiring, but it was all failing.</p>
<h1 id="milling-the-board">Milling The Board</h1>
<h2 id="moving-on">Moving On</h2>
<p>I decided to move on from the e-paper display for right now to focus on the servo and come back to the display later. I realized that the footprint for the <code>SLIDE-SWITCH</code> component in the <code>fab</code> library had the same SMD pads as I needed for three headers pins.</p>
<p><img alt="New Schematic New" src="../../../assets/images/stem/disability-forewarning-system/new-schematic-new.jpg"></p>
<p>When routing I realized that there were holes in the slide-switch footprint but I simply designed my routes around them and will simply not mill them when I cut out my board.</p>
<p><img alt="New Layout" src="../../../assets/images/stem/disability-forewarning-system/new-layout.jpg"></p>
<p><img alt="New 3D PCB" src="../../../assets/images/stem/disability-forewarning-system/new-3d-pcb.jpg"></p>
<p>I was going to mill this board on the <code>Genmitsu 3020-Pro Max</code> milling machine, so I went to the <code>Manufacturing</code> workspace and created a new <code>Setup</code>. I selected a boxpoint on the <em>top</em> of the stock to where the x and y axes were hugging the stock. I selected all the traces and the top face of the board to be the <code>Model</code>, changed the <code>Stock Top Offset</code> to <code>0mm</code>.</p>
<p>I went back and made the traces larger in the layout then made sure to deselect <code>Solder Masks</code> after I pressed <code>Push to 3D PCB</code>.</p>
<p>I then created a <code>2D Contour</code>. When I selected the tool, I went to <code>Milling Tools (Metric)</code> and copied the smallest <code>Flat Endmill</code> I could find (<code>3mm Flat Endmill</code>). I then copied and pasted it into my <code>Local &gt; Library</code> tools and right-clicked it and selected <code>Edit tool</code>. I changed the <code>Description</code> to <code>0.8mm Flat Endmill</code>, <code>Diameter</code> to <code>0.8mm</code> in the <code>Cutter</code> menu, <code>Spindle speed</code> to <code>12000 rpm</code> in the <code>Cutting data</code> menu, <code>Cutting feedrate</code> to <code>100 mm/min</code> in the same menu, and <code>Plunge feedrate</code> to <code>100 mm/min</code> in the same menu.I then pressed the blue <code>Accept</code> button. I selected the new tool and set the <code>Coolant</code> setting to <code>Disabled</code>. Then for the <code>Contour Selection</code> I pressed the <code>Chain</code> icon and selected one of the traces. I repeated this for the top outline of every trace I wanted milled, which took a fairly large amount of time.</p>
<p><img alt="Chain Selection &amp; Chain Button" src="../../../assets/images/stem/disability-forewarning-system/chain-selection.jpg"></p>
<p>Next, under <code>Top Height</code> I set <code>Offset</code> to <code>0mm</code>. I checked the <code>Multiple Depths</code> option (scroll down under the <code>Passes</code> menu) and set <code>Maximum Roughing Stepdown</code> to <code>0.4mm</code>. I then pressed <code>OK</code> and activated the <code>2D Contour</code> tool again. I selected the bottom outline of the board and used all the same other settings as the previous contour.</p>
<p>As I zoomed in I noticed that there were no blue lines around the second and third pads of the slide-switch component so I had to go back to the layout editor, decrease the DRC rules for minimum distance between a pad and a wire, then move the middle route in between the two switch holes. I also made all of the traces thicker. I then <code>Pushed to 3D PCB</code> again and made sure to uncheck <code>Solder Mask</code>. I got errors under the <code>2D Contour</code>, so to recalculate I </p>
<p>Finally I right-clicked the previously-created <code>Setup</code> in the hierarchy and pressed <code>Post Process</code>. I made sure <code>Post</code> was set to <code>Grbl / grbl</code> and pressed <code>Post</code>. </p>
<p>The milling process was very smooth! I moved the z-axis high and zeroed it, then pressed <code>Send</code> to do an air cut. Everything looked OK so I moved the z-axis down until a piece of paper couldn't move in between the copper and the mill then zeroes the z-axis and moved the bit higher. I moved the x and y axes to the bottom left corner of the copper and zeroed them, as well. Then I pressed <code>Reset</code> and <code>Send</code>, and it worked! I occasionally vaccumed throughout the milling process.</p>
<video src="../../../assets/images/stem/disability-forewarning-system/milling-timelapse-vid.mp4" controls="controls" style="max-width: 730px;">
</video>

<p>Here's the result after rinsing in water!</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/m-milled.jpg"></p>
<p>The soldering process was very smooth.</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/h-soldered-1.JPG"></p>
<p><a href="../../../assets/images/stem/disability-forewarning-system/h-soldered-2.jpg"></a></p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/h-servo-direct.jpg"></p>
<p>Unfortunately I realized that the order of the wires didn't match up with the servo so connecting it directly like this wouldn't work - I'll correct this in the next iteration of the design. For now I'll connect the servo like this.</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/h-servo-correct.jpg"></p>
<p>The next day when I took the board out of my bag to test I noticed the traces ripped! These were thinner than other traces I'd milled so that might be why.</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/h-ripped-traces.jpg"></p>
<p>I tried resoldering with a lot of solder to reach what was left of the traces, but this failed.</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/h-failed-resoldering.jpg"></p>
<p>I then tried to desolder mistakes and failed again - I needed to make a new board.</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/h-failed-desoldering.jpg"></p>
<h2 id="redesigning-again">Redesigning Again</h2>
<p>Just to be sure everything will work OK I made the traces' width <code>50mil</code>.</p>
<p><img alt="New New Layout" src="../../../assets/images/stem/disability-forewarning-system/new-new-layout.jpg"></p>
<p>I milled the board, deburred it, washed it in soap and water, soldered it (very few connections to the pico so I could always unsolder if needed), and connected it to a servo motor. The only learning I had was that when I install a new tool I have to select the new tool button in the Bantam software then re-zero it. Also, I'd originally tried to only solder the corners and test the conections, but even though the other legs were touching, they weren't connected, so I soldered all of the legs that were connected to pin headers.</p>
<video src="../../../assets/images/stem/disability-forewarning-system/n-milling-vid.mp4" controls="controls" style="max-width: 730px;">
</video>

<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/n-milled-board.jpg"></p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/n-washed-board.jpg"></p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/n-plugged-servo.jpg"></p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/n-all-plugged-in.jpg"></p>
<p>I tried plugging the board into my computer and nothing happened! I became very worried that I wasted another Pico, but tried a different chord, and it worked! I installed MicroPython using Thonny then ran the code from <a href="https://how2electronics.com/how-to-control-servo-motor-with-raspberry-pi-pico/">this website</a> to operate a servo motor (I modified it to use <code>GPIO 21</code>). I copied and pasted both files into Thonny then saved them in the base directory of the Pico.</p>
<p><strong>servo.py</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">PWM</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="k">class</span> <span class="nc">Servo</span><span class="p">:</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">    </span><span class="sd">""" A simple class for controlling a 9g servo with the Raspberry Pi Pico.</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="sd">    Attributes:</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="sd">        minVal: An integer denoting the minimum duty value for the servo motor.</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="sd">        maxVal: An integer denoting the maximum duty value for the servo motor.</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="sd">    """</span>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">:</span> <span class="nb">int</span> <span class="ow">or</span> <span class="n">Pin</span> <span class="ow">or</span> <span class="n">PWM</span><span class="p">,</span> <span class="n">minVal</span><span class="o">=</span><span class="mi">2500</span><span class="p">,</span> <span class="n">maxVal</span><span class="o">=</span><span class="mi">7500</span><span class="p">):</span>
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a><span class="w">        </span><span class="sd">""" Creates a new Servo Object.</span>
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a>
</span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a><span class="sd">        args:</span>
</span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a>
</span><span id="__span-17-20"><a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a><span class="sd">            pin (int or machine.Pin or machine.PWM): Either an integer denoting the number of the GPIO pin or an already constructed Pin or PWM object that is connected to the servo.</span>
</span><span id="__span-17-21"><a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a>
</span><span id="__span-17-22"><a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a><span class="sd">            minVal (int): Optional, denotes the minimum duty value to be used for this servo.</span>
</span><span id="__span-17-23"><a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a>
</span><span id="__span-17-24"><a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a><span class="sd">            maxVal (int): Optional, denotes the maximum duty value to be used for this servo.</span>
</span><span id="__span-17-25"><a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a>
</span><span id="__span-17-26"><a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a><span class="sd">        """</span>
</span><span id="__span-17-27"><a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a>
</span><span id="__span-17-28"><a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="__span-17-29"><a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a>            <span class="n">pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-17-30"><a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="n">Pin</span><span class="p">):</span>
</span><span id="__span-17-31"><a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__pwm</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">pin</span><span class="p">)</span>
</span><span id="__span-17-32"><a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pin</span><span class="p">,</span> <span class="n">PWM</span><span class="p">):</span>
</span><span id="__span-17-33"><a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__pwm</span> <span class="o">=</span> <span class="n">pin</span>
</span><span id="__span-17-34"><a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__pwm</span><span class="o">.</span><span class="n">freq</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</span><span id="__span-17-35"><a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">minVal</span> <span class="o">=</span> <span class="n">minVal</span>
</span><span id="__span-17-36"><a id="__codelineno-17-36" name="__codelineno-17-36" href="#__codelineno-17-36"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">maxVal</span> <span class="o">=</span> <span class="n">maxVal</span>
</span><span id="__span-17-37"><a id="__codelineno-17-37" name="__codelineno-17-37" href="#__codelineno-17-37"></a>
</span><span id="__span-17-38"><a id="__codelineno-17-38" name="__codelineno-17-38" href="#__codelineno-17-38"></a>    <span class="k">def</span> <span class="nf">deinit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-17-39"><a id="__codelineno-17-39" name="__codelineno-17-39" href="#__codelineno-17-39"></a><span class="w">        </span><span class="sd">""" Deinitializes the underlying PWM object.</span>
</span><span id="__span-17-40"><a id="__codelineno-17-40" name="__codelineno-17-40" href="#__codelineno-17-40"></a>
</span><span id="__span-17-41"><a id="__codelineno-17-41" name="__codelineno-17-41" href="#__codelineno-17-41"></a><span class="sd">        """</span>
</span><span id="__span-17-42"><a id="__codelineno-17-42" name="__codelineno-17-42" href="#__codelineno-17-42"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__pwm</span><span class="o">.</span><span class="n">deinit</span><span class="p">()</span>
</span><span id="__span-17-43"><a id="__codelineno-17-43" name="__codelineno-17-43" href="#__codelineno-17-43"></a>
</span><span id="__span-17-44"><a id="__codelineno-17-44" name="__codelineno-17-44" href="#__codelineno-17-44"></a>    <span class="k">def</span> <span class="nf">goto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="__span-17-45"><a id="__codelineno-17-45" name="__codelineno-17-45" href="#__codelineno-17-45"></a><span class="w">        </span><span class="sd">""" Moves the servo to the specified position.</span>
</span><span id="__span-17-46"><a id="__codelineno-17-46" name="__codelineno-17-46" href="#__codelineno-17-46"></a>
</span><span id="__span-17-47"><a id="__codelineno-17-47" name="__codelineno-17-47" href="#__codelineno-17-47"></a><span class="sd">        args:</span>
</span><span id="__span-17-48"><a id="__codelineno-17-48" name="__codelineno-17-48" href="#__codelineno-17-48"></a>
</span><span id="__span-17-49"><a id="__codelineno-17-49" name="__codelineno-17-49" href="#__codelineno-17-49"></a><span class="sd">            value (int): The position to move to, represented by a value from 0 to 1024 (inclusive).</span>
</span><span id="__span-17-50"><a id="__codelineno-17-50" name="__codelineno-17-50" href="#__codelineno-17-50"></a>
</span><span id="__span-17-51"><a id="__codelineno-17-51" name="__codelineno-17-51" href="#__codelineno-17-51"></a><span class="sd">        """</span>
</span><span id="__span-17-52"><a id="__codelineno-17-52" name="__codelineno-17-52" href="#__codelineno-17-52"></a>        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-17-53"><a id="__codelineno-17-53" name="__codelineno-17-53" href="#__codelineno-17-53"></a>            <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-17-54"><a id="__codelineno-17-54" name="__codelineno-17-54" href="#__codelineno-17-54"></a>        <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">1024</span><span class="p">:</span>
</span><span id="__span-17-55"><a id="__codelineno-17-55" name="__codelineno-17-55" href="#__codelineno-17-55"></a>            <span class="n">value</span> <span class="o">=</span> <span class="mi">1024</span>
</span><span id="__span-17-56"><a id="__codelineno-17-56" name="__codelineno-17-56" href="#__codelineno-17-56"></a>        <span class="n">delta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxVal</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">minVal</span>
</span><span id="__span-17-57"><a id="__codelineno-17-57" name="__codelineno-17-57" href="#__codelineno-17-57"></a>        <span class="n">target</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minVal</span> <span class="o">+</span> <span class="p">((</span><span class="n">value</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">)</span> <span class="o">*</span> <span class="n">delta</span><span class="p">))</span>
</span><span id="__span-17-58"><a id="__codelineno-17-58" name="__codelineno-17-58" href="#__codelineno-17-58"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__pwm</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
</span><span id="__span-17-59"><a id="__codelineno-17-59" name="__codelineno-17-59" href="#__codelineno-17-59"></a>
</span><span id="__span-17-60"><a id="__codelineno-17-60" name="__codelineno-17-60" href="#__codelineno-17-60"></a>    <span class="k">def</span> <span class="nf">middle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-17-61"><a id="__codelineno-17-61" name="__codelineno-17-61" href="#__codelineno-17-61"></a><span class="w">        </span><span class="sd">""" Moves the servo to the middle.</span>
</span><span id="__span-17-62"><a id="__codelineno-17-62" name="__codelineno-17-62" href="#__codelineno-17-62"></a><span class="sd">        """</span>
</span><span id="__span-17-63"><a id="__codelineno-17-63" name="__codelineno-17-63" href="#__codelineno-17-63"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="mi">512</span><span class="p">)</span>
</span><span id="__span-17-64"><a id="__codelineno-17-64" name="__codelineno-17-64" href="#__codelineno-17-64"></a>
</span><span id="__span-17-65"><a id="__codelineno-17-65" name="__codelineno-17-65" href="#__codelineno-17-65"></a>    <span class="k">def</span> <span class="nf">free</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-17-66"><a id="__codelineno-17-66" name="__codelineno-17-66" href="#__codelineno-17-66"></a><span class="w">        </span><span class="sd">""" Allows the servo to be moved freely.</span>
</span><span id="__span-17-67"><a id="__codelineno-17-67" name="__codelineno-17-67" href="#__codelineno-17-67"></a><span class="sd">        """</span>
</span><span id="__span-17-68"><a id="__codelineno-17-68" name="__codelineno-17-68" href="#__codelineno-17-68"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__pwm</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>main.py</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kn">import</span> <span class="nn">utime</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="kn">from</span> <span class="nn">servo</span> <span class="kn">import</span> <span class="n">Servo</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="n">s1</span> <span class="o">=</span> <span class="n">Servo</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span>       <span class="c1"># Servo pin is connected to GP21</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="k">def</span> <span class="nf">servo_Map</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">in_min</span><span class="p">,</span> <span class="n">in_max</span><span class="p">,</span> <span class="n">out_min</span><span class="p">,</span> <span class="n">out_max</span><span class="p">):</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>    <span class="k">return</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">in_min</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">out_max</span> <span class="o">-</span> <span class="n">out_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">in_max</span> <span class="o">-</span> <span class="n">in_min</span><span class="p">)</span> <span class="o">+</span> <span class="n">out_min</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="k">def</span> <span class="nf">servo_Angle</span><span class="p">(</span><span class="n">angle</span><span class="p">):</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>    <span class="k">if</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>        <span class="n">angle</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>    <span class="k">if</span> <span class="n">angle</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>        <span class="n">angle</span> <span class="o">=</span> <span class="mi">180</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>    <span class="n">s1</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">servo_Map</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">180</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1024</span><span class="p">)))</span> <span class="c1"># Convert range value to angle value</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"Turn left ..."</span><span class="p">)</span>
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">180</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span>
</span><span id="__span-18-20"><a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>            <span class="n">servo_Angle</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="__span-18-21"><a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>            <span class="n">utime</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
</span><span id="__span-18-22"><a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"Turn right ..."</span><span class="p">)</span>
</span><span id="__span-18-23"><a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">180</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">):</span>
</span><span id="__span-18-24"><a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a>            <span class="n">servo_Angle</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="__span-18-25"><a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a>            <span class="n">utime</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
</span></code></pre></div>
<p>It worked! However, the servo movement was very jittery. To make sure this was a software problem and not a hardware problem, I modified <code>main.py</code>, and this reduced the jitteriness!</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kn">import</span> <span class="nn">utime</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="kn">from</span> <span class="nn">servo</span> <span class="kn">import</span> <span class="n">Servo</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="n">s1</span> <span class="o">=</span> <span class="n">Servo</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span>       <span class="c1"># Servo pin is connected to GP21</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="k">def</span> <span class="nf">servo_Map</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">in_min</span><span class="p">,</span> <span class="n">in_max</span><span class="p">,</span> <span class="n">out_min</span><span class="p">,</span> <span class="n">out_max</span><span class="p">):</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>    <span class="k">return</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">in_min</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">out_max</span> <span class="o">-</span> <span class="n">out_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">in_max</span> <span class="o">-</span> <span class="n">in_min</span><span class="p">)</span> <span class="o">+</span> <span class="n">out_min</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="k">def</span> <span class="nf">servo_Angle</span><span class="p">(</span><span class="n">angle</span><span class="p">):</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>    <span class="k">if</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>        <span class="n">angle</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>    <span class="k">if</span> <span class="n">angle</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>        <span class="n">angle</span> <span class="o">=</span> <span class="mi">180</span>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>    <span class="n">s1</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">servo_Map</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">180</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1024</span><span class="p">)))</span> <span class="c1"># Convert range value to angle value</span>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"Turn left ..."</span><span class="p">)</span>
</span><span id="__span-19-19"><a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">180</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>
</span><span id="__span-19-20"><a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a>            <span class="n">servo_Angle</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="__span-19-21"><a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a>            <span class="n">utime</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
</span><span id="__span-19-22"><a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"Turn right ..."</span><span class="p">)</span>
</span><span id="__span-19-23"><a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">180</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">):</span>
</span><span id="__span-19-24"><a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a>            <span class="n">servo_Angle</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="__span-19-25"><a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a>            <span class="n">utime</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
</span></code></pre></div>
<p>I tried making it even more smooth, but the servo wouldn't turn <code>180 deg</code>, which I suspect is because <code>0.001sec</code> is too short of a time for the servo to turn.</p>
<p>I modified the code to the following to test a functionality more similar to what I'll actually use.</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kn">import</span> <span class="nn">utime</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="kn">from</span> <span class="nn">servo</span> <span class="kn">import</span> <span class="n">Servo</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="n">s1</span> <span class="o">=</span> <span class="n">Servo</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span>       <span class="c1"># Servo pin is connected to GP21</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="k">def</span> <span class="nf">servo_Map</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">in_min</span><span class="p">,</span> <span class="n">in_max</span><span class="p">,</span> <span class="n">out_min</span><span class="p">,</span> <span class="n">out_max</span><span class="p">):</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>    <span class="k">return</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">in_min</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">out_max</span> <span class="o">-</span> <span class="n">out_min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">in_max</span> <span class="o">-</span> <span class="n">in_min</span><span class="p">)</span> <span class="o">+</span> <span class="n">out_min</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="k">def</span> <span class="nf">servo_Angle</span><span class="p">(</span><span class="n">angle</span><span class="p">):</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>    <span class="k">if</span> <span class="n">angle</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>        <span class="n">angle</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>    <span class="k">if</span> <span class="n">angle</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>        <span class="n">angle</span> <span class="o">=</span> <span class="mi">180</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>    <span class="n">s1</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">servo_Map</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">180</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1024</span><span class="p">)))</span> <span class="c1"># Convert range value to angle value</span>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a>            <span class="n">servo_Angle</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">"&gt;&gt; Angle? "</span><span class="p">)))</span>
</span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="__span-20-21"><a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">"Error: NaN"</span><span class="p">)</span>
</span></code></pre></div>
<p>This was a critical mistake! The program worked very well, and it moved up until <code>180 deg</code> and wouldn't go below <code>0 deg</code>, but I couldn't exit the program! Even when I tried to soft reboot in Thonny my program simply rejected the message since it wasn't a float. I tried re-entering bootloader mode and reinstalling MicroPython but the program simply started up again. Next I had an idea that if I installed a different version of MicroPython that wasn't compatible with the board it wouldn't know how to run my program, so I installed the Pico WH version of MicroPython and the program stopped! I then reinstalled the correct one and the problem was solved!</p>
<h2 id="redesigning-the-driver-side-board">Redesigning The Driver-Side Board</h2>
<p>I want to redesign my board from <a href="https://fabacademy.org/2023/labs/charlotte/students/adam-stone/lessons/week8/fixing-eaglecad/">Week 8</a> to where I can use one of the pins with a built in pulldown resistor, D4. I'll come back to this if I have time this week and if not in the future.</p>
<h2 id="a-new-display">A New Display</h2>
<p>I accidentally ripped the ribbon cable when opening the box - I learned I should always unplug the HAT Driver from the ribbon cable when I put the display away! I ordered a new one.</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/ripped-ribbon-cable.jpg"></p>
<h2 id="37-display">3.7" Display</h2>
<h3 id="code">Code</h3>
<p><strong>Pico_ePaper.py</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1"># +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="c1">#</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="c1"># LUTs have been copied from original example for Waveshare Pico e-Paper 3.7,</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="c1"># which can be found here:</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="c1"># https://github.com/waveshare/Pico_ePaper_Code/blob/main/python/Pico-ePaper-3.7.py</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="c1">#</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="c1"># +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="n">EPD_3IN7_lut_4Gray_GC</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">([</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>    <span class="mh">0x2A</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 1</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>    <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 2</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>    <span class="mh">0x20</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 3</span>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>    <span class="mh">0x14</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 4</span>
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 5</span>
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x0A</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span>  <span class="c1"># 6</span>
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x0A</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 7</span>
</span><span id="__span-21-18"><a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 8</span>
</span><span id="__span-21-19"><a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 9</span>
</span><span id="__span-21-20"><a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 10</span>
</span><span id="__span-21-21"><a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a>    <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span>
</span><span id="__span-21-22"><a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a><span class="p">])</span>
</span><span id="__span-21-23"><a id="__codelineno-21-23" name="__codelineno-21-23" href="#__codelineno-21-23"></a>
</span><span id="__span-21-24"><a id="__codelineno-21-24" name="__codelineno-21-24" href="#__codelineno-21-24"></a><span class="n">EPD_3IN7_lut_1Gray_GC</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">([</span>
</span><span id="__span-21-25"><a id="__codelineno-21-25" name="__codelineno-21-25" href="#__codelineno-21-25"></a>    <span class="mh">0x2A</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 1</span>
</span><span id="__span-21-26"><a id="__codelineno-21-26" name="__codelineno-21-26" href="#__codelineno-21-26"></a>    <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x2A</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 2</span>
</span><span id="__span-21-27"><a id="__codelineno-21-27" name="__codelineno-21-27" href="#__codelineno-21-27"></a>    <span class="mh">0x2A</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 3</span>
</span><span id="__span-21-28"><a id="__codelineno-21-28" name="__codelineno-21-28" href="#__codelineno-21-28"></a>    <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x0A</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 4</span>
</span><span id="__span-21-29"><a id="__codelineno-21-29" name="__codelineno-21-29" href="#__codelineno-21-29"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 5</span>
</span><span id="__span-21-30"><a id="__codelineno-21-30" name="__codelineno-21-30" href="#__codelineno-21-30"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x0A</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x0A</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 6</span>
</span><span id="__span-21-31"><a id="__codelineno-21-31" name="__codelineno-21-31" href="#__codelineno-21-31"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 7</span>
</span><span id="__span-21-32"><a id="__codelineno-21-32" name="__codelineno-21-32" href="#__codelineno-21-32"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 8</span>
</span><span id="__span-21-33"><a id="__codelineno-21-33" name="__codelineno-21-33" href="#__codelineno-21-33"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 9</span>
</span><span id="__span-21-34"><a id="__codelineno-21-34" name="__codelineno-21-34" href="#__codelineno-21-34"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 10</span>
</span><span id="__span-21-35"><a id="__codelineno-21-35" name="__codelineno-21-35" href="#__codelineno-21-35"></a>    <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span>
</span><span id="__span-21-36"><a id="__codelineno-21-36" name="__codelineno-21-36" href="#__codelineno-21-36"></a><span class="p">])</span>
</span><span id="__span-21-37"><a id="__codelineno-21-37" name="__codelineno-21-37" href="#__codelineno-21-37"></a>
</span><span id="__span-21-38"><a id="__codelineno-21-38" name="__codelineno-21-38" href="#__codelineno-21-38"></a><span class="n">EPD_3IN7_lut_1Gray_DU</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">([</span>
</span><span id="__span-21-39"><a id="__codelineno-21-39" name="__codelineno-21-39" href="#__codelineno-21-39"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 1</span>
</span><span id="__span-21-40"><a id="__codelineno-21-40" name="__codelineno-21-40" href="#__codelineno-21-40"></a>    <span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x2A</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
</span><span id="__span-21-41"><a id="__codelineno-21-41" name="__codelineno-21-41" href="#__codelineno-21-41"></a>    <span class="mh">0x0A</span><span class="p">,</span> <span class="mh">0x55</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 3</span>
</span><span id="__span-21-42"><a id="__codelineno-21-42" name="__codelineno-21-42" href="#__codelineno-21-42"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
</span><span id="__span-21-43"><a id="__codelineno-21-43" name="__codelineno-21-43" href="#__codelineno-21-43"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 5</span>
</span><span id="__span-21-44"><a id="__codelineno-21-44" name="__codelineno-21-44" href="#__codelineno-21-44"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
</span><span id="__span-21-45"><a id="__codelineno-21-45" name="__codelineno-21-45" href="#__codelineno-21-45"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 7</span>
</span><span id="__span-21-46"><a id="__codelineno-21-46" name="__codelineno-21-46" href="#__codelineno-21-46"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
</span><span id="__span-21-47"><a id="__codelineno-21-47" name="__codelineno-21-47" href="#__codelineno-21-47"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 9</span>
</span><span id="__span-21-48"><a id="__codelineno-21-48" name="__codelineno-21-48" href="#__codelineno-21-48"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
</span><span id="__span-21-49"><a id="__codelineno-21-49" name="__codelineno-21-49" href="#__codelineno-21-49"></a>    <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span>
</span><span id="__span-21-50"><a id="__codelineno-21-50" name="__codelineno-21-50" href="#__codelineno-21-50"></a><span class="p">])</span>
</span><span id="__span-21-51"><a id="__codelineno-21-51" name="__codelineno-21-51" href="#__codelineno-21-51"></a>
</span><span id="__span-21-52"><a id="__codelineno-21-52" name="__codelineno-21-52" href="#__codelineno-21-52"></a><span class="n">EPD_3IN7_lut_1Gray_A2</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">([</span>
</span><span id="__span-21-53"><a id="__codelineno-21-53" name="__codelineno-21-53" href="#__codelineno-21-53"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 1</span>
</span><span id="__span-21-54"><a id="__codelineno-21-54" name="__codelineno-21-54" href="#__codelineno-21-54"></a>    <span class="mh">0x0A</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 2</span>
</span><span id="__span-21-55"><a id="__codelineno-21-55" name="__codelineno-21-55" href="#__codelineno-21-55"></a>    <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 3</span>
</span><span id="__span-21-56"><a id="__codelineno-21-56" name="__codelineno-21-56" href="#__codelineno-21-56"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 4</span>
</span><span id="__span-21-57"><a id="__codelineno-21-57" name="__codelineno-21-57" href="#__codelineno-21-57"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 5</span>
</span><span id="__span-21-58"><a id="__codelineno-21-58" name="__codelineno-21-58" href="#__codelineno-21-58"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 6</span>
</span><span id="__span-21-59"><a id="__codelineno-21-59" name="__codelineno-21-59" href="#__codelineno-21-59"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 7</span>
</span><span id="__span-21-60"><a id="__codelineno-21-60" name="__codelineno-21-60" href="#__codelineno-21-60"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 8</span>
</span><span id="__span-21-61"><a id="__codelineno-21-61" name="__codelineno-21-61" href="#__codelineno-21-61"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 9</span>
</span><span id="__span-21-62"><a id="__codelineno-21-62" name="__codelineno-21-62" href="#__codelineno-21-62"></a>    <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>  <span class="c1"># 10</span>
</span><span id="__span-21-63"><a id="__codelineno-21-63" name="__codelineno-21-63" href="#__codelineno-21-63"></a>    <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x22</span>
</span><span id="__span-21-64"><a id="__codelineno-21-64" name="__codelineno-21-64" href="#__codelineno-21-64"></a><span class="p">])</span>
</span><span id="__span-21-65"><a id="__codelineno-21-65" name="__codelineno-21-65" href="#__codelineno-21-65"></a><span class="c1"># +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
</span><span id="__span-21-66"><a id="__codelineno-21-66" name="__codelineno-21-66" href="#__codelineno-21-66"></a>
</span><span id="__span-21-67"><a id="__codelineno-21-67" name="__codelineno-21-67" href="#__codelineno-21-67"></a><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span>
</span><span id="__span-21-68"><a id="__codelineno-21-68" name="__codelineno-21-68" href="#__codelineno-21-68"></a><span class="kn">import</span> <span class="nn">framebuf</span>
</span><span id="__span-21-69"><a id="__codelineno-21-69" name="__codelineno-21-69" href="#__codelineno-21-69"></a><span class="kn">from</span> <span class="nn">utime</span> <span class="kn">import</span> <span class="n">ticks_ms</span><span class="p">,</span> <span class="n">ticks_diff</span><span class="p">,</span> <span class="n">sleep_ms</span>
</span><span id="__span-21-70"><a id="__codelineno-21-70" name="__codelineno-21-70" href="#__codelineno-21-70"></a><span class="kn">from</span> <span class="nn">ustruct</span> <span class="kn">import</span> <span class="n">pack</span>
</span><span id="__span-21-71"><a id="__codelineno-21-71" name="__codelineno-21-71" href="#__codelineno-21-71"></a><span class="kn">import</span> <span class="nn">gc</span>
</span><span id="__span-21-72"><a id="__codelineno-21-72" name="__codelineno-21-72" href="#__codelineno-21-72"></a><span class="kn">import</span> <span class="nn">micropython</span>
</span><span id="__span-21-73"><a id="__codelineno-21-73" name="__codelineno-21-73" href="#__codelineno-21-73"></a>
</span><span id="__span-21-74"><a id="__codelineno-21-74" name="__codelineno-21-74" href="#__codelineno-21-74"></a>
</span><span id="__span-21-75"><a id="__codelineno-21-75" name="__codelineno-21-75" href="#__codelineno-21-75"></a><span class="k">def</span> <span class="nf">profile</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span><span id="__span-21-76"><a id="__codelineno-21-76" name="__codelineno-21-76" href="#__codelineno-21-76"></a>    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-21-77"><a id="__codelineno-21-77" name="__codelineno-21-77" href="#__codelineno-21-77"></a>        <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</span><span id="__span-21-78"><a id="__codelineno-21-78" name="__codelineno-21-78" href="#__codelineno-21-78"></a>        <span class="n">start_mem</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">mem_free</span><span class="p">()</span>
</span><span id="__span-21-79"><a id="__codelineno-21-79" name="__codelineno-21-79" href="#__codelineno-21-79"></a>        <span class="n">start_t</span> <span class="o">=</span> <span class="n">ticks_ms</span><span class="p">()</span>
</span><span id="__span-21-80"><a id="__codelineno-21-80" name="__codelineno-21-80" href="#__codelineno-21-80"></a>        <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-21-81"><a id="__codelineno-21-81" name="__codelineno-21-81" href="#__codelineno-21-81"></a>        <span class="n">fin_t</span> <span class="o">=</span> <span class="n">ticks_ms</span><span class="p">()</span>
</span><span id="__span-21-82"><a id="__codelineno-21-82" name="__codelineno-21-82" href="#__codelineno-21-82"></a>        <span class="n">fin_mem</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">mem_free</span><span class="p">()</span>
</span><span id="__span-21-83"><a id="__codelineno-21-83" name="__codelineno-21-83" href="#__codelineno-21-83"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1"> took: </span><span class="si">{</span><span class="n">ticks_diff</span><span class="p">(</span><span class="n">fin_t</span><span class="p">,</span><span class="w"> </span><span class="n">start_t</span><span class="p">)</span><span class="si">}</span><span class="s1"> ms to finish'</span><span class="p">)</span>
</span><span id="__span-21-84"><a id="__codelineno-21-84" name="__codelineno-21-84" href="#__codelineno-21-84"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1"> used around </span><span class="si">{</span><span class="n">start_mem</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">fin_mem</span><span class="si">}</span><span class="s1"> B of memory'</span><span class="p">)</span>
</span><span id="__span-21-85"><a id="__codelineno-21-85" name="__codelineno-21-85" href="#__codelineno-21-85"></a>
</span><span id="__span-21-86"><a id="__codelineno-21-86" name="__codelineno-21-86" href="#__codelineno-21-86"></a>    <span class="k">return</span> <span class="n">wrapper</span>
</span><span id="__span-21-87"><a id="__codelineno-21-87" name="__codelineno-21-87" href="#__codelineno-21-87"></a>
</span><span id="__span-21-88"><a id="__codelineno-21-88" name="__codelineno-21-88" href="#__codelineno-21-88"></a>
</span><span id="__span-21-89"><a id="__codelineno-21-89" name="__codelineno-21-89" href="#__codelineno-21-89"></a><span class="k">class</span> <span class="nc">EinkBase</span><span class="p">:</span>
</span><span id="__span-21-90"><a id="__codelineno-21-90" name="__codelineno-21-90" href="#__codelineno-21-90"></a>    <span class="n">black</span> <span class="o">=</span> <span class="mb">0b00</span>
</span><span id="__span-21-91"><a id="__codelineno-21-91" name="__codelineno-21-91" href="#__codelineno-21-91"></a>    <span class="n">white</span> <span class="o">=</span> <span class="mb">0b11</span>
</span><span id="__span-21-92"><a id="__codelineno-21-92" name="__codelineno-21-92" href="#__codelineno-21-92"></a>    <span class="n">darkgray</span> <span class="o">=</span> <span class="mb">0b01</span>
</span><span id="__span-21-93"><a id="__codelineno-21-93" name="__codelineno-21-93" href="#__codelineno-21-93"></a>    <span class="n">lightgray</span> <span class="o">=</span> <span class="mb">0b10</span>
</span><span id="__span-21-94"><a id="__codelineno-21-94" name="__codelineno-21-94" href="#__codelineno-21-94"></a>
</span><span id="__span-21-95"><a id="__codelineno-21-95" name="__codelineno-21-95" href="#__codelineno-21-95"></a>    <span class="n">RAM_BW</span> <span class="o">=</span> <span class="mb">0b01</span>
</span><span id="__span-21-96"><a id="__codelineno-21-96" name="__codelineno-21-96" href="#__codelineno-21-96"></a>    <span class="n">RAM_RED</span> <span class="o">=</span> <span class="mb">0b10</span>
</span><span id="__span-21-97"><a id="__codelineno-21-97" name="__codelineno-21-97" href="#__codelineno-21-97"></a>    <span class="n">RAM_RBW</span> <span class="o">=</span> <span class="mb">0b11</span>
</span><span id="__span-21-98"><a id="__codelineno-21-98" name="__codelineno-21-98" href="#__codelineno-21-98"></a>
</span><span id="__span-21-99"><a id="__codelineno-21-99" name="__codelineno-21-99" href="#__codelineno-21-99"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cs_pin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dc_pin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reset_pin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">busy_pin</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="__span-21-100"><a id="__codelineno-21-100" name="__codelineno-21-100" href="#__codelineno-21-100"></a>        <span class="k">if</span> <span class="n">rotation</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">rotation</span> <span class="o">==</span> <span class="mi">180</span><span class="p">:</span>
</span><span id="__span-21-101"><a id="__codelineno-21-101" name="__codelineno-21-101" href="#__codelineno-21-101"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">280</span>
</span><span id="__span-21-102"><a id="__codelineno-21-102" name="__codelineno-21-102" href="#__codelineno-21-102"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">480</span>
</span><span id="__span-21-103"><a id="__codelineno-21-103" name="__codelineno-21-103" href="#__codelineno-21-103"></a>            <span class="n">buf_format</span> <span class="o">=</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_HLSB</span>
</span><span id="__span-21-104"><a id="__codelineno-21-104" name="__codelineno-21-104" href="#__codelineno-21-104"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-21-105"><a id="__codelineno-21-105" name="__codelineno-21-105" href="#__codelineno-21-105"></a>        <span class="k">elif</span> <span class="n">rotation</span> <span class="o">==</span> <span class="mi">90</span> <span class="ow">or</span> <span class="n">rotation</span> <span class="o">==</span> <span class="mi">270</span><span class="p">:</span>
</span><span id="__span-21-106"><a id="__codelineno-21-106" name="__codelineno-21-106" href="#__codelineno-21-106"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">480</span>
</span><span id="__span-21-107"><a id="__codelineno-21-107" name="__codelineno-21-107" href="#__codelineno-21-107"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">280</span>
</span><span id="__span-21-108"><a id="__codelineno-21-108" name="__codelineno-21-108" href="#__codelineno-21-108"></a>            <span class="n">buf_format</span> <span class="o">=</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_VLSB</span>
</span><span id="__span-21-109"><a id="__codelineno-21-109" name="__codelineno-21-109" href="#__codelineno-21-109"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-21-110"><a id="__codelineno-21-110" name="__codelineno-21-110" href="#__codelineno-21-110"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-111"><a id="__codelineno-21-111" name="__codelineno-21-111" href="#__codelineno-21-111"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="__span-21-112"><a id="__codelineno-21-112" name="__codelineno-21-112" href="#__codelineno-21-112"></a>                <span class="sa">f</span><span class="s2">"Incorrect rotation selected (</span><span class="si">{</span><span class="n">rotation</span><span class="si">}</span><span class="s2">). Valid values: 0, 90, 180 and 270."</span><span class="p">)</span>
</span><span id="__span-21-113"><a id="__codelineno-21-113" name="__codelineno-21-113" href="#__codelineno-21-113"></a>
</span><span id="__span-21-114"><a id="__codelineno-21-114" name="__codelineno-21-114" href="#__codelineno-21-114"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">=</span> <span class="n">rotation</span>
</span><span id="__span-21-115"><a id="__codelineno-21-115" name="__codelineno-21-115" href="#__codelineno-21-115"></a>
</span><span id="__span-21-116"><a id="__codelineno-21-116" name="__codelineno-21-116" href="#__codelineno-21-116"></a>        <span class="k">if</span> <span class="n">reset_pin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-21-117"><a id="__codelineno-21-117" name="__codelineno-21-117" href="#__codelineno-21-117"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rst</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-118"><a id="__codelineno-21-118" name="__codelineno-21-118" href="#__codelineno-21-118"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-119"><a id="__codelineno-21-119" name="__codelineno-21-119" href="#__codelineno-21-119"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rst</span> <span class="o">=</span> <span class="n">reset_pin</span>
</span><span id="__span-21-120"><a id="__codelineno-21-120" name="__codelineno-21-120" href="#__codelineno-21-120"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_rst</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-121"><a id="__codelineno-21-121" name="__codelineno-21-121" href="#__codelineno-21-121"></a>
</span><span id="__span-21-122"><a id="__codelineno-21-122" name="__codelineno-21-122" href="#__codelineno-21-122"></a>        <span class="k">if</span> <span class="n">dc_pin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-21-123"><a id="__codelineno-21-123" name="__codelineno-21-123" href="#__codelineno-21-123"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_dc</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-124"><a id="__codelineno-21-124" name="__codelineno-21-124" href="#__codelineno-21-124"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-125"><a id="__codelineno-21-125" name="__codelineno-21-125" href="#__codelineno-21-125"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_dc</span> <span class="o">=</span> <span class="n">dc_pin</span>
</span><span id="__span-21-126"><a id="__codelineno-21-126" name="__codelineno-21-126" href="#__codelineno-21-126"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_dc</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-127"><a id="__codelineno-21-127" name="__codelineno-21-127" href="#__codelineno-21-127"></a>
</span><span id="__span-21-128"><a id="__codelineno-21-128" name="__codelineno-21-128" href="#__codelineno-21-128"></a>        <span class="k">if</span> <span class="n">cs_pin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-21-129"><a id="__codelineno-21-129" name="__codelineno-21-129" href="#__codelineno-21-129"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_cs</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-130"><a id="__codelineno-21-130" name="__codelineno-21-130" href="#__codelineno-21-130"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-131"><a id="__codelineno-21-131" name="__codelineno-21-131" href="#__codelineno-21-131"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_cs</span> <span class="o">=</span> <span class="n">cs_pin</span>
</span><span id="__span-21-132"><a id="__codelineno-21-132" name="__codelineno-21-132" href="#__codelineno-21-132"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_cs</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-133"><a id="__codelineno-21-133" name="__codelineno-21-133" href="#__codelineno-21-133"></a>
</span><span id="__span-21-134"><a id="__codelineno-21-134" name="__codelineno-21-134" href="#__codelineno-21-134"></a>        <span class="k">if</span> <span class="n">busy_pin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-21-135"><a id="__codelineno-21-135" name="__codelineno-21-135" href="#__codelineno-21-135"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_busy</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">IN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">PULL_UP</span><span class="p">)</span>
</span><span id="__span-21-136"><a id="__codelineno-21-136" name="__codelineno-21-136" href="#__codelineno-21-136"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-137"><a id="__codelineno-21-137" name="__codelineno-21-137" href="#__codelineno-21-137"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_busy</span> <span class="o">=</span> <span class="n">busy_pin</span>
</span><span id="__span-21-138"><a id="__codelineno-21-138" name="__codelineno-21-138" href="#__codelineno-21-138"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_busy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">Pin</span><span class="o">.</span><span class="n">IN</span><span class="p">)</span>
</span><span id="__span-21-139"><a id="__codelineno-21-139" name="__codelineno-21-139" href="#__codelineno-21-139"></a>
</span><span id="__span-21-140"><a id="__codelineno-21-140" name="__codelineno-21-140" href="#__codelineno-21-140"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_luts</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="n">EPD_3IN7_lut_4Gray_GC</span><span class="p">,</span>
</span><span id="__span-21-141"><a id="__codelineno-21-141" name="__codelineno-21-141" href="#__codelineno-21-141"></a>                      <span class="mi">1</span><span class="p">:</span> <span class="n">EPD_3IN7_lut_1Gray_GC</span><span class="p">,</span>
</span><span id="__span-21-142"><a id="__codelineno-21-142" name="__codelineno-21-142" href="#__codelineno-21-142"></a>                      <span class="mi">2</span><span class="p">:</span> <span class="n">EPD_3IN7_lut_1Gray_DU</span><span class="p">,</span>
</span><span id="__span-21-143"><a id="__codelineno-21-143" name="__codelineno-21-143" href="#__codelineno-21-143"></a>                      <span class="mi">3</span><span class="p">:</span> <span class="n">EPD_3IN7_lut_1Gray_A2</span><span class="p">}</span>
</span><span id="__span-21-144"><a id="__codelineno-21-144" name="__codelineno-21-144" href="#__codelineno-21-144"></a>
</span><span id="__span-21-145"><a id="__codelineno-21-145" name="__codelineno-21-145" href="#__codelineno-21-145"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_bw</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="__span-21-146"><a id="__codelineno-21-146" name="__codelineno-21-146" href="#__codelineno-21-146"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_red</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="__span-21-147"><a id="__codelineno-21-147" name="__codelineno-21-147" href="#__codelineno-21-147"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bw</span> <span class="o">=</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer_bw</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">buf_format</span><span class="p">)</span>
</span><span id="__span-21-148"><a id="__codelineno-21-148" name="__codelineno-21-148" href="#__codelineno-21-148"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_red</span> <span class="o">=</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer_red</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">buf_format</span><span class="p">)</span>
</span><span id="__span-21-149"><a id="__codelineno-21-149" name="__codelineno-21-149" href="#__codelineno-21-149"></a>
</span><span id="__span-21-150"><a id="__codelineno-21-150" name="__codelineno-21-150" href="#__codelineno-21-150"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fill</span><span class="p">()</span>
</span><span id="__span-21-151"><a id="__codelineno-21-151" name="__codelineno-21-151" href="#__codelineno-21-151"></a>
</span><span id="__span-21-152"><a id="__codelineno-21-152" name="__codelineno-21-152" href="#__codelineno-21-152"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_init_disp</span><span class="p">()</span>
</span><span id="__span-21-153"><a id="__codelineno-21-153" name="__codelineno-21-153" href="#__codelineno-21-153"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
</span><span id="__span-21-154"><a id="__codelineno-21-154" name="__codelineno-21-154" href="#__codelineno-21-154"></a>
</span><span id="__span-21-155"><a id="__codelineno-21-155" name="__codelineno-21-155" href="#__codelineno-21-155"></a>    <span class="k">def</span> <span class="nf">_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-21-156"><a id="__codelineno-21-156" name="__codelineno-21-156" href="#__codelineno-21-156"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rst</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-157"><a id="__codelineno-21-157" name="__codelineno-21-157" href="#__codelineno-21-157"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
</span><span id="__span-21-158"><a id="__codelineno-21-158" name="__codelineno-21-158" href="#__codelineno-21-158"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rst</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-159"><a id="__codelineno-21-159" name="__codelineno-21-159" href="#__codelineno-21-159"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="__span-21-160"><a id="__codelineno-21-160" name="__codelineno-21-160" href="#__codelineno-21-160"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_rst</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-161"><a id="__codelineno-21-161" name="__codelineno-21-161" href="#__codelineno-21-161"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
</span><span id="__span-21-162"><a id="__codelineno-21-162" name="__codelineno-21-162" href="#__codelineno-21-162"></a>
</span><span id="__span-21-163"><a id="__codelineno-21-163" name="__codelineno-21-163" href="#__codelineno-21-163"></a>    <span class="k">def</span> <span class="nf">_send_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
</span><span id="__span-21-164"><a id="__codelineno-21-164" name="__codelineno-21-164" href="#__codelineno-21-164"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</span><span id="__span-21-165"><a id="__codelineno-21-165" name="__codelineno-21-165" href="#__codelineno-21-165"></a>
</span><span id="__span-21-166"><a id="__codelineno-21-166" name="__codelineno-21-166" href="#__codelineno-21-166"></a>    <span class="k">def</span> <span class="nf">_send_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-21-167"><a id="__codelineno-21-167" name="__codelineno-21-167" href="#__codelineno-21-167"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</span><span id="__span-21-168"><a id="__codelineno-21-168" name="__codelineno-21-168" href="#__codelineno-21-168"></a>
</span><span id="__span-21-169"><a id="__codelineno-21-169" name="__codelineno-21-169" href="#__codelineno-21-169"></a>    <span class="k">def</span> <span class="nf">_send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-21-170"><a id="__codelineno-21-170" name="__codelineno-21-170" href="#__codelineno-21-170"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</span><span id="__span-21-171"><a id="__codelineno-21-171" name="__codelineno-21-171" href="#__codelineno-21-171"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-21-172"><a id="__codelineno-21-172" name="__codelineno-21-172" href="#__codelineno-21-172"></a>
</span><span id="__span-21-173"><a id="__codelineno-21-173" name="__codelineno-21-173" href="#__codelineno-21-173"></a>    <span class="k">def</span> <span class="nf">_read_busy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-21-174"><a id="__codelineno-21-174" name="__codelineno-21-174" href="#__codelineno-21-174"></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_busy</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-21-175"><a id="__codelineno-21-175" name="__codelineno-21-175" href="#__codelineno-21-175"></a>            <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span id="__span-21-176"><a id="__codelineno-21-176" name="__codelineno-21-176" href="#__codelineno-21-176"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
</span><span id="__span-21-177"><a id="__codelineno-21-177" name="__codelineno-21-177" href="#__codelineno-21-177"></a>
</span><span id="__span-21-178"><a id="__codelineno-21-178" name="__codelineno-21-178" href="#__codelineno-21-178"></a>    <span class="k">def</span> <span class="nf">_load_LUT</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lut</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="__span-21-179"><a id="__codelineno-21-179" name="__codelineno-21-179" href="#__codelineno-21-179"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x32</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_luts</span><span class="p">[</span><span class="n">lut</span><span class="p">])</span>
</span><span id="__span-21-180"><a id="__codelineno-21-180" name="__codelineno-21-180" href="#__codelineno-21-180"></a>
</span><span id="__span-21-181"><a id="__codelineno-21-181" name="__codelineno-21-181" href="#__codelineno-21-181"></a>    <span class="k">def</span> <span class="nf">_set_cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span id="__span-21-182"><a id="__codelineno-21-182" name="__codelineno-21-182" href="#__codelineno-21-182"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x4e</span><span class="p">,</span> <span class="n">pack</span><span class="p">(</span><span class="s2">"h"</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
</span><span id="__span-21-183"><a id="__codelineno-21-183" name="__codelineno-21-183" href="#__codelineno-21-183"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x4f</span><span class="p">,</span> <span class="n">pack</span><span class="p">(</span><span class="s2">"h"</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</span><span id="__span-21-184"><a id="__codelineno-21-184" name="__codelineno-21-184" href="#__codelineno-21-184"></a>
</span><span id="__span-21-185"><a id="__codelineno-21-185" name="__codelineno-21-185" href="#__codelineno-21-185"></a>    <span class="k">def</span> <span class="nf">_set_window</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_x</span><span class="p">,</span> <span class="n">end_x</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">end_y</span><span class="p">):</span>
</span><span id="__span-21-186"><a id="__codelineno-21-186" name="__codelineno-21-186" href="#__codelineno-21-186"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x44</span><span class="p">,</span> <span class="n">pack</span><span class="p">(</span><span class="s2">"2h"</span><span class="p">,</span> <span class="n">start_x</span><span class="p">,</span> <span class="n">end_x</span><span class="p">))</span>
</span><span id="__span-21-187"><a id="__codelineno-21-187" name="__codelineno-21-187" href="#__codelineno-21-187"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x45</span><span class="p">,</span> <span class="n">pack</span><span class="p">(</span><span class="s2">"2h"</span><span class="p">,</span> <span class="n">start_y</span><span class="p">,</span> <span class="n">end_y</span><span class="p">))</span>
</span><span id="__span-21-188"><a id="__codelineno-21-188" name="__codelineno-21-188" href="#__codelineno-21-188"></a>
</span><span id="__span-21-189"><a id="__codelineno-21-189" name="__codelineno-21-189" href="#__codelineno-21-189"></a>    <span class="k">def</span> <span class="nf">_clear_ram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bw</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">red</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="__span-21-190"><a id="__codelineno-21-190" name="__codelineno-21-190" href="#__codelineno-21-190"></a>        <span class="k">if</span> <span class="n">red</span><span class="p">:</span>
</span><span id="__span-21-191"><a id="__codelineno-21-191" name="__codelineno-21-191" href="#__codelineno-21-191"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x46</span><span class="p">,</span> <span class="mh">0xf7</span><span class="p">)</span>
</span><span id="__span-21-192"><a id="__codelineno-21-192" name="__codelineno-21-192" href="#__codelineno-21-192"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_read_busy</span><span class="p">()</span>
</span><span id="__span-21-193"><a id="__codelineno-21-193" name="__codelineno-21-193" href="#__codelineno-21-193"></a>        <span class="k">if</span> <span class="n">bw</span><span class="p">:</span>
</span><span id="__span-21-194"><a id="__codelineno-21-194" name="__codelineno-21-194" href="#__codelineno-21-194"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x47</span><span class="p">,</span> <span class="mh">0xf7</span><span class="p">)</span>
</span><span id="__span-21-195"><a id="__codelineno-21-195" name="__codelineno-21-195" href="#__codelineno-21-195"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_read_busy</span><span class="p">()</span>
</span><span id="__span-21-196"><a id="__codelineno-21-196" name="__codelineno-21-196" href="#__codelineno-21-196"></a>
</span><span id="__span-21-197"><a id="__codelineno-21-197" name="__codelineno-21-197" href="#__codelineno-21-197"></a>    <span class="k">def</span> <span class="nf">_init_disp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-21-198"><a id="__codelineno-21-198" name="__codelineno-21-198" href="#__codelineno-21-198"></a>        <span class="c1"># HW reset.</span>
</span><span id="__span-21-199"><a id="__codelineno-21-199" name="__codelineno-21-199" href="#__codelineno-21-199"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reset</span><span class="p">()</span>
</span><span id="__span-21-200"><a id="__codelineno-21-200" name="__codelineno-21-200" href="#__codelineno-21-200"></a>
</span><span id="__span-21-201"><a id="__codelineno-21-201" name="__codelineno-21-201" href="#__codelineno-21-201"></a>        <span class="c1"># SW reset.</span>
</span><span id="__span-21-202"><a id="__codelineno-21-202" name="__codelineno-21-202" href="#__codelineno-21-202"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="mh">0x12</span><span class="p">)</span>
</span><span id="__span-21-203"><a id="__codelineno-21-203" name="__codelineno-21-203" href="#__codelineno-21-203"></a>        <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">300</span><span class="p">)</span>
</span><span id="__span-21-204"><a id="__codelineno-21-204" name="__codelineno-21-204" href="#__codelineno-21-204"></a>
</span><span id="__span-21-205"><a id="__codelineno-21-205" name="__codelineno-21-205" href="#__codelineno-21-205"></a>        <span class="c1"># Clear BW and RED RAMs.</span>
</span><span id="__span-21-206"><a id="__codelineno-21-206" name="__codelineno-21-206" href="#__codelineno-21-206"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_clear_ram</span><span class="p">()</span>
</span><span id="__span-21-207"><a id="__codelineno-21-207" name="__codelineno-21-207" href="#__codelineno-21-207"></a>
</span><span id="__span-21-208"><a id="__codelineno-21-208" name="__codelineno-21-208" href="#__codelineno-21-208"></a>        <span class="c1"># Set gate number.</span>
</span><span id="__span-21-209"><a id="__codelineno-21-209" name="__codelineno-21-209" href="#__codelineno-21-209"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x01</span><span class="p">,</span> <span class="n">pack</span><span class="p">(</span><span class="s2">"hB"</span><span class="p">,</span> <span class="mi">479</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</span><span id="__span-21-210"><a id="__codelineno-21-210" name="__codelineno-21-210" href="#__codelineno-21-210"></a>
</span><span id="__span-21-211"><a id="__codelineno-21-211" name="__codelineno-21-211" href="#__codelineno-21-211"></a>        <span class="c1"># Set gate voltage.</span>
</span><span id="__span-21-212"><a id="__codelineno-21-212" name="__codelineno-21-212" href="#__codelineno-21-212"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x03</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-21-213"><a id="__codelineno-21-213" name="__codelineno-21-213" href="#__codelineno-21-213"></a>
</span><span id="__span-21-214"><a id="__codelineno-21-214" name="__codelineno-21-214" href="#__codelineno-21-214"></a>        <span class="c1"># Set source voltage.</span>
</span><span id="__span-21-215"><a id="__codelineno-21-215" name="__codelineno-21-215" href="#__codelineno-21-215"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x04</span><span class="p">,</span> <span class="n">pack</span><span class="p">(</span><span class="s2">"3B"</span><span class="p">,</span> <span class="mh">0x41</span><span class="p">,</span> <span class="mh">0xa8</span><span class="p">,</span> <span class="mh">0x32</span><span class="p">))</span>
</span><span id="__span-21-216"><a id="__codelineno-21-216" name="__codelineno-21-216" href="#__codelineno-21-216"></a>
</span><span id="__span-21-217"><a id="__codelineno-21-217" name="__codelineno-21-217" href="#__codelineno-21-217"></a>        <span class="c1"># Set Data Entry mode.</span>
</span><span id="__span-21-218"><a id="__codelineno-21-218" name="__codelineno-21-218" href="#__codelineno-21-218"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-21-219"><a id="__codelineno-21-219" name="__codelineno-21-219" href="#__codelineno-21-219"></a>            <span class="n">seq</span> <span class="o">=</span> <span class="mh">0x03</span>
</span><span id="__span-21-220"><a id="__codelineno-21-220" name="__codelineno-21-220" href="#__codelineno-21-220"></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">==</span> <span class="mi">180</span><span class="p">:</span>
</span><span id="__span-21-221"><a id="__codelineno-21-221" name="__codelineno-21-221" href="#__codelineno-21-221"></a>            <span class="n">seq</span> <span class="o">=</span> <span class="mh">0x00</span>
</span><span id="__span-21-222"><a id="__codelineno-21-222" name="__codelineno-21-222" href="#__codelineno-21-222"></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">==</span> <span class="mi">90</span><span class="p">:</span>
</span><span id="__span-21-223"><a id="__codelineno-21-223" name="__codelineno-21-223" href="#__codelineno-21-223"></a>            <span class="n">seq</span> <span class="o">=</span> <span class="mh">0x06</span>
</span><span id="__span-21-224"><a id="__codelineno-21-224" name="__codelineno-21-224" href="#__codelineno-21-224"></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">==</span> <span class="mi">270</span><span class="p">:</span>
</span><span id="__span-21-225"><a id="__codelineno-21-225" name="__codelineno-21-225" href="#__codelineno-21-225"></a>            <span class="n">seq</span> <span class="o">=</span> <span class="mh">0x05</span>
</span><span id="__span-21-226"><a id="__codelineno-21-226" name="__codelineno-21-226" href="#__codelineno-21-226"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-227"><a id="__codelineno-21-227" name="__codelineno-21-227" href="#__codelineno-21-227"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Incorrect rotation selected"</span><span class="p">)</span>
</span><span id="__span-21-228"><a id="__codelineno-21-228" name="__codelineno-21-228" href="#__codelineno-21-228"></a>
</span><span id="__span-21-229"><a id="__codelineno-21-229" name="__codelineno-21-229" href="#__codelineno-21-229"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x11</span><span class="p">,</span> <span class="n">seq</span><span class="p">)</span>
</span><span id="__span-21-230"><a id="__codelineno-21-230" name="__codelineno-21-230" href="#__codelineno-21-230"></a>
</span><span id="__span-21-231"><a id="__codelineno-21-231" name="__codelineno-21-231" href="#__codelineno-21-231"></a>        <span class="c1"># Set border.</span>
</span><span id="__span-21-232"><a id="__codelineno-21-232" name="__codelineno-21-232" href="#__codelineno-21-232"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x3c</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">)</span>
</span><span id="__span-21-233"><a id="__codelineno-21-233" name="__codelineno-21-233" href="#__codelineno-21-233"></a>
</span><span id="__span-21-234"><a id="__codelineno-21-234" name="__codelineno-21-234" href="#__codelineno-21-234"></a>        <span class="c1"># Booster Soft-start Control.</span>
</span><span id="__span-21-235"><a id="__codelineno-21-235" name="__codelineno-21-235" href="#__codelineno-21-235"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x0c</span><span class="p">,</span> <span class="n">pack</span><span class="p">(</span><span class="s2">"5B"</span><span class="p">,</span> <span class="mh">0xae</span><span class="p">,</span> <span class="mh">0xc7</span><span class="p">,</span> <span class="mh">0xc3</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">))</span>
</span><span id="__span-21-236"><a id="__codelineno-21-236" name="__codelineno-21-236" href="#__codelineno-21-236"></a>
</span><span id="__span-21-237"><a id="__codelineno-21-237" name="__codelineno-21-237" href="#__codelineno-21-237"></a>        <span class="c1"># Internal sensor on.</span>
</span><span id="__span-21-238"><a id="__codelineno-21-238" name="__codelineno-21-238" href="#__codelineno-21-238"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x18</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">)</span>
</span><span id="__span-21-239"><a id="__codelineno-21-239" name="__codelineno-21-239" href="#__codelineno-21-239"></a>
</span><span id="__span-21-240"><a id="__codelineno-21-240" name="__codelineno-21-240" href="#__codelineno-21-240"></a>        <span class="c1"># Set VCOM.</span>
</span><span id="__span-21-241"><a id="__codelineno-21-241" name="__codelineno-21-241" href="#__codelineno-21-241"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x2c</span><span class="p">,</span> <span class="mh">0x44</span><span class="p">)</span>
</span><span id="__span-21-242"><a id="__codelineno-21-242" name="__codelineno-21-242" href="#__codelineno-21-242"></a>
</span><span id="__span-21-243"><a id="__codelineno-21-243" name="__codelineno-21-243" href="#__codelineno-21-243"></a>        <span class="c1"># Set window.</span>
</span><span id="__span-21-244"><a id="__codelineno-21-244" name="__codelineno-21-244" href="#__codelineno-21-244"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-21-245"><a id="__codelineno-21-245" name="__codelineno-21-245" href="#__codelineno-21-245"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_set_window</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-246"><a id="__codelineno-21-246" name="__codelineno-21-246" href="#__codelineno-21-246"></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">==</span> <span class="mi">180</span><span class="p">:</span>
</span><span id="__span-21-247"><a id="__codelineno-21-247" name="__codelineno-21-247" href="#__codelineno-21-247"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_set_window</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-248"><a id="__codelineno-21-248" name="__codelineno-21-248" href="#__codelineno-21-248"></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">==</span> <span class="mi">90</span><span class="p">:</span>
</span><span id="__span-21-249"><a id="__codelineno-21-249" name="__codelineno-21-249" href="#__codelineno-21-249"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_set_window</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-250"><a id="__codelineno-21-250" name="__codelineno-21-250" href="#__codelineno-21-250"></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">==</span> <span class="mi">270</span><span class="p">:</span>
</span><span id="__span-21-251"><a id="__codelineno-21-251" name="__codelineno-21-251" href="#__codelineno-21-251"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_set_window</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-252"><a id="__codelineno-21-252" name="__codelineno-21-252" href="#__codelineno-21-252"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-253"><a id="__codelineno-21-253" name="__codelineno-21-253" href="#__codelineno-21-253"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Incorrect rotation selected"</span><span class="p">)</span>
</span><span id="__span-21-254"><a id="__codelineno-21-254" name="__codelineno-21-254" href="#__codelineno-21-254"></a>
</span><span id="__span-21-255"><a id="__codelineno-21-255" name="__codelineno-21-255" href="#__codelineno-21-255"></a>        <span class="c1"># Set Display Update Control 2</span>
</span><span id="__span-21-256"><a id="__codelineno-21-256" name="__codelineno-21-256" href="#__codelineno-21-256"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x22</span><span class="p">,</span> <span class="mh">0xcf</span><span class="p">)</span>
</span><span id="__span-21-257"><a id="__codelineno-21-257" name="__codelineno-21-257" href="#__codelineno-21-257"></a>
</span><span id="__span-21-258"><a id="__codelineno-21-258" name="__codelineno-21-258" href="#__codelineno-21-258"></a>    <span class="c1"># --------------------------------------------------------</span>
</span><span id="__span-21-259"><a id="__codelineno-21-259" name="__codelineno-21-259" href="#__codelineno-21-259"></a>    <span class="c1"># Public methods.</span>
</span><span id="__span-21-260"><a id="__codelineno-21-260" name="__codelineno-21-260" href="#__codelineno-21-260"></a>    <span class="c1"># --------------------------------------------------------</span>
</span><span id="__span-21-261"><a id="__codelineno-21-261" name="__codelineno-21-261" href="#__codelineno-21-261"></a>
</span><span id="__span-21-262"><a id="__codelineno-21-262" name="__codelineno-21-262" href="#__codelineno-21-262"></a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lut</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="__span-21-263"><a id="__codelineno-21-263" name="__codelineno-21-263" href="#__codelineno-21-263"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-21-264"><a id="__codelineno-21-264" name="__codelineno-21-264" href="#__codelineno-21-264"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_set_cursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-265"><a id="__codelineno-21-265" name="__codelineno-21-265" href="#__codelineno-21-265"></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">==</span> <span class="mi">180</span><span class="p">:</span>
</span><span id="__span-21-266"><a id="__codelineno-21-266" name="__codelineno-21-266" href="#__codelineno-21-266"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_set_cursor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-267"><a id="__codelineno-21-267" name="__codelineno-21-267" href="#__codelineno-21-267"></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation</span> <span class="o">==</span> <span class="mi">90</span><span class="p">:</span>
</span><span id="__span-21-268"><a id="__codelineno-21-268" name="__codelineno-21-268" href="#__codelineno-21-268"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_set_cursor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-269"><a id="__codelineno-21-269" name="__codelineno-21-269" href="#__codelineno-21-269"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-270"><a id="__codelineno-21-270" name="__codelineno-21-270" href="#__codelineno-21-270"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_set_cursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-271"><a id="__codelineno-21-271" name="__codelineno-21-271" href="#__codelineno-21-271"></a>
</span><span id="__span-21-272"><a id="__codelineno-21-272" name="__codelineno-21-272" href="#__codelineno-21-272"></a>    <span class="k">def</span> <span class="nf">sleep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-21-273"><a id="__codelineno-21-273" name="__codelineno-21-273" href="#__codelineno-21-273"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x03</span><span class="p">)</span>
</span><span id="__span-21-274"><a id="__codelineno-21-274" name="__codelineno-21-274" href="#__codelineno-21-274"></a>
</span><span id="__span-21-275"><a id="__codelineno-21-275" name="__codelineno-21-275" href="#__codelineno-21-275"></a>    <span class="c1"># --------------------------------------------------------</span>
</span><span id="__span-21-276"><a id="__codelineno-21-276" name="__codelineno-21-276" href="#__codelineno-21-276"></a>    <span class="c1"># Drawing routines (wrappers for FrameBuffer methods).</span>
</span><span id="__span-21-277"><a id="__codelineno-21-277" name="__codelineno-21-277" href="#__codelineno-21-277"></a>    <span class="c1"># --------------------------------------------------------</span>
</span><span id="__span-21-278"><a id="__codelineno-21-278" name="__codelineno-21-278" href="#__codelineno-21-278"></a>
</span><span id="__span-21-279"><a id="__codelineno-21-279" name="__codelineno-21-279" href="#__codelineno-21-279"></a>    <span class="k">def</span> <span class="nf">fill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">white</span><span class="p">):</span>
</span><span id="__span-21-280"><a id="__codelineno-21-280" name="__codelineno-21-280" href="#__codelineno-21-280"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bw</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">c</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-281"><a id="__codelineno-21-281" name="__codelineno-21-281" href="#__codelineno-21-281"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_red</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">c</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-282"><a id="__codelineno-21-282" name="__codelineno-21-282" href="#__codelineno-21-282"></a>
</span><span id="__span-21-283"><a id="__codelineno-21-283" name="__codelineno-21-283" href="#__codelineno-21-283"></a>    <span class="k">def</span> <span class="nf">pixel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">black</span><span class="p">):</span>
</span><span id="__span-21-284"><a id="__codelineno-21-284" name="__codelineno-21-284" href="#__codelineno-21-284"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bw</span><span class="o">.</span><span class="n">pixel</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-285"><a id="__codelineno-21-285" name="__codelineno-21-285" href="#__codelineno-21-285"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_red</span><span class="o">.</span><span class="n">pixel</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-286"><a id="__codelineno-21-286" name="__codelineno-21-286" href="#__codelineno-21-286"></a>
</span><span id="__span-21-287"><a id="__codelineno-21-287" name="__codelineno-21-287" href="#__codelineno-21-287"></a>    <span class="k">def</span> <span class="nf">hline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">black</span><span class="p">):</span>
</span><span id="__span-21-288"><a id="__codelineno-21-288" name="__codelineno-21-288" href="#__codelineno-21-288"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bw</span><span class="o">.</span><span class="n">hline</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">c</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-289"><a id="__codelineno-21-289" name="__codelineno-21-289" href="#__codelineno-21-289"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_red</span><span class="o">.</span><span class="n">hline</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">c</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-290"><a id="__codelineno-21-290" name="__codelineno-21-290" href="#__codelineno-21-290"></a>
</span><span id="__span-21-291"><a id="__codelineno-21-291" name="__codelineno-21-291" href="#__codelineno-21-291"></a>    <span class="k">def</span> <span class="nf">vline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">black</span><span class="p">):</span>
</span><span id="__span-21-292"><a id="__codelineno-21-292" name="__codelineno-21-292" href="#__codelineno-21-292"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bw</span><span class="o">.</span><span class="n">vline</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">c</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-293"><a id="__codelineno-21-293" name="__codelineno-21-293" href="#__codelineno-21-293"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_red</span><span class="o">.</span><span class="n">vline</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">c</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-294"><a id="__codelineno-21-294" name="__codelineno-21-294" href="#__codelineno-21-294"></a>
</span><span id="__span-21-295"><a id="__codelineno-21-295" name="__codelineno-21-295" href="#__codelineno-21-295"></a>    <span class="k">def</span> <span class="nf">line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">black</span><span class="p">):</span>
</span><span id="__span-21-296"><a id="__codelineno-21-296" name="__codelineno-21-296" href="#__codelineno-21-296"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">c</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-297"><a id="__codelineno-21-297" name="__codelineno-21-297" href="#__codelineno-21-297"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_red</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">c</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-298"><a id="__codelineno-21-298" name="__codelineno-21-298" href="#__codelineno-21-298"></a>
</span><span id="__span-21-299"><a id="__codelineno-21-299" name="__codelineno-21-299" href="#__codelineno-21-299"></a>    <span class="k">def</span> <span class="nf">rect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">black</span><span class="p">):</span>
</span><span id="__span-21-300"><a id="__codelineno-21-300" name="__codelineno-21-300" href="#__codelineno-21-300"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">c</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-301"><a id="__codelineno-21-301" name="__codelineno-21-301" href="#__codelineno-21-301"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_red</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">c</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-302"><a id="__codelineno-21-302" name="__codelineno-21-302" href="#__codelineno-21-302"></a>
</span><span id="__span-21-303"><a id="__codelineno-21-303" name="__codelineno-21-303" href="#__codelineno-21-303"></a>    <span class="k">def</span> <span class="nf">fill_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">black</span><span class="p">):</span>
</span><span id="__span-21-304"><a id="__codelineno-21-304" name="__codelineno-21-304" href="#__codelineno-21-304"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bw</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">c</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-305"><a id="__codelineno-21-305" name="__codelineno-21-305" href="#__codelineno-21-305"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_red</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">c</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-306"><a id="__codelineno-21-306" name="__codelineno-21-306" href="#__codelineno-21-306"></a>
</span><span id="__span-21-307"><a id="__codelineno-21-307" name="__codelineno-21-307" href="#__codelineno-21-307"></a>    <span class="k">def</span> <span class="nf">text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">black</span><span class="p">):</span>
</span><span id="__span-21-308"><a id="__codelineno-21-308" name="__codelineno-21-308" href="#__codelineno-21-308"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_bw</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-309"><a id="__codelineno-21-309" name="__codelineno-21-309" href="#__codelineno-21-309"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_red</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-310"><a id="__codelineno-21-310" name="__codelineno-21-310" href="#__codelineno-21-310"></a>
</span><span id="__span-21-311"><a id="__codelineno-21-311" name="__codelineno-21-311" href="#__codelineno-21-311"></a>    <span class="k">def</span> <span class="nf">blit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fbuf</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">key</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ram</span><span class="o">=</span><span class="n">RAM_RBW</span><span class="p">):</span>
</span><span id="__span-21-312"><a id="__codelineno-21-312" name="__codelineno-21-312" href="#__codelineno-21-312"></a>        <span class="k">if</span> <span class="n">ram</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-21-313"><a id="__codelineno-21-313" name="__codelineno-21-313" href="#__codelineno-21-313"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_bw</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">fbuf</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">palette</span><span class="p">)</span>
</span><span id="__span-21-314"><a id="__codelineno-21-314" name="__codelineno-21-314" href="#__codelineno-21-314"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">ram</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-21-315"><a id="__codelineno-21-315" name="__codelineno-21-315" href="#__codelineno-21-315"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_red</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">fbuf</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">palette</span><span class="p">)</span>
</span><span id="__span-21-316"><a id="__codelineno-21-316" name="__codelineno-21-316" href="#__codelineno-21-316"></a>
</span><span id="__span-21-317"><a id="__codelineno-21-317" name="__codelineno-21-317" href="#__codelineno-21-317"></a>
</span><span id="__span-21-318"><a id="__codelineno-21-318" name="__codelineno-21-318" href="#__codelineno-21-318"></a><span class="k">class</span> <span class="nc">Eink</span><span class="p">(</span><span class="n">EinkBase</span><span class="p">):</span>
</span><span id="__span-21-319"><a id="__codelineno-21-319" name="__codelineno-21-319" href="#__codelineno-21-319"></a>    <span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">SPI</span>
</span><span id="__span-21-320"><a id="__codelineno-21-320" name="__codelineno-21-320" href="#__codelineno-21-320"></a>
</span><span id="__span-21-321"><a id="__codelineno-21-321" name="__codelineno-21-321" href="#__codelineno-21-321"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-21-322"><a id="__codelineno-21-322" name="__codelineno-21-322" href="#__codelineno-21-322"></a>        <span class="k">if</span> <span class="n">spi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-21-323"><a id="__codelineno-21-323" name="__codelineno-21-323" href="#__codelineno-21-323"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_spi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SPI</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">baudrate</span><span class="o">=</span><span class="mi">20_000_000</span><span class="p">)</span>
</span><span id="__span-21-324"><a id="__codelineno-21-324" name="__codelineno-21-324" href="#__codelineno-21-324"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-325"><a id="__codelineno-21-325" name="__codelineno-21-325" href="#__codelineno-21-325"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_spi</span> <span class="o">=</span> <span class="n">spi</span>
</span><span id="__span-21-326"><a id="__codelineno-21-326" name="__codelineno-21-326" href="#__codelineno-21-326"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">Eink</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-21-327"><a id="__codelineno-21-327" name="__codelineno-21-327" href="#__codelineno-21-327"></a>
</span><span id="__span-21-328"><a id="__codelineno-21-328" name="__codelineno-21-328" href="#__codelineno-21-328"></a>    <span class="k">def</span> <span class="nf">_send_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
</span><span id="__span-21-329"><a id="__codelineno-21-329" name="__codelineno-21-329" href="#__codelineno-21-329"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dc</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-330"><a id="__codelineno-21-330" name="__codelineno-21-330" href="#__codelineno-21-330"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cs</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-331"><a id="__codelineno-21-331" name="__codelineno-21-331" href="#__codelineno-21-331"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="__span-21-332"><a id="__codelineno-21-332" name="__codelineno-21-332" href="#__codelineno-21-332"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytes</span><span class="p">([</span><span class="n">command</span><span class="p">]))</span>
</span><span id="__span-21-333"><a id="__codelineno-21-333" name="__codelineno-21-333" href="#__codelineno-21-333"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="p">(</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">)):</span>
</span><span id="__span-21-334"><a id="__codelineno-21-334" name="__codelineno-21-334" href="#__codelineno-21-334"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
</span><span id="__span-21-335"><a id="__codelineno-21-335" name="__codelineno-21-335" href="#__codelineno-21-335"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-336"><a id="__codelineno-21-336" name="__codelineno-21-336" href="#__codelineno-21-336"></a>            <span class="k">raise</span> <span class="ne">ValueError</span>  <span class="c1"># For now</span>
</span><span id="__span-21-337"><a id="__codelineno-21-337" name="__codelineno-21-337" href="#__codelineno-21-337"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-338"><a id="__codelineno-21-338" name="__codelineno-21-338" href="#__codelineno-21-338"></a>
</span><span id="__span-21-339"><a id="__codelineno-21-339" name="__codelineno-21-339" href="#__codelineno-21-339"></a>    <span class="k">def</span> <span class="nf">_send_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-21-340"><a id="__codelineno-21-340" name="__codelineno-21-340" href="#__codelineno-21-340"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dc</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-341"><a id="__codelineno-21-341" name="__codelineno-21-341" href="#__codelineno-21-341"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cs</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-342"><a id="__codelineno-21-342" name="__codelineno-21-342" href="#__codelineno-21-342"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="__span-21-343"><a id="__codelineno-21-343" name="__codelineno-21-343" href="#__codelineno-21-343"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytes</span><span class="p">([</span><span class="n">data</span><span class="p">]))</span>
</span><span id="__span-21-344"><a id="__codelineno-21-344" name="__codelineno-21-344" href="#__codelineno-21-344"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">)):</span>
</span><span id="__span-21-345"><a id="__codelineno-21-345" name="__codelineno-21-345" href="#__codelineno-21-345"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-21-346"><a id="__codelineno-21-346" name="__codelineno-21-346" href="#__codelineno-21-346"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-347"><a id="__codelineno-21-347" name="__codelineno-21-347" href="#__codelineno-21-347"></a>            <span class="k">raise</span> <span class="ne">ValueError</span>  <span class="c1"># For now</span>
</span><span id="__span-21-348"><a id="__codelineno-21-348" name="__codelineno-21-348" href="#__codelineno-21-348"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-349"><a id="__codelineno-21-349" name="__codelineno-21-349" href="#__codelineno-21-349"></a>
</span><span id="__span-21-350"><a id="__codelineno-21-350" name="__codelineno-21-350" href="#__codelineno-21-350"></a>    <span class="nd">@micropython</span><span class="o">.</span><span class="n">viper</span>
</span><span id="__span-21-351"><a id="__codelineno-21-351" name="__codelineno-21-351" href="#__codelineno-21-351"></a>    <span class="k">def</span> <span class="nf">_reverse_bits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="__span-21-352"><a id="__codelineno-21-352" name="__codelineno-21-352" href="#__codelineno-21-352"></a>        <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-21-353"><a id="__codelineno-21-353" name="__codelineno-21-353" href="#__codelineno-21-353"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">):</span>
</span><span id="__span-21-354"><a id="__codelineno-21-354" name="__codelineno-21-354" href="#__codelineno-21-354"></a>            <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">result</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="p">((</span><span class="n">num</span> <span class="o">&gt;&gt;</span> <span class="n">i</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-355"><a id="__codelineno-21-355" name="__codelineno-21-355" href="#__codelineno-21-355"></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="__span-21-356"><a id="__codelineno-21-356" name="__codelineno-21-356" href="#__codelineno-21-356"></a>
</span><span id="__span-21-357"><a id="__codelineno-21-357" name="__codelineno-21-357" href="#__codelineno-21-357"></a>    <span class="c1"># --------------------------------------------------------</span>
</span><span id="__span-21-358"><a id="__codelineno-21-358" name="__codelineno-21-358" href="#__codelineno-21-358"></a>    <span class="c1"># Public methods.</span>
</span><span id="__span-21-359"><a id="__codelineno-21-359" name="__codelineno-21-359" href="#__codelineno-21-359"></a>    <span class="c1"># --------------------------------------------------------</span>
</span><span id="__span-21-360"><a id="__codelineno-21-360" name="__codelineno-21-360" href="#__codelineno-21-360"></a>
</span><span id="__span-21-361"><a id="__codelineno-21-361" name="__codelineno-21-361" href="#__codelineno-21-361"></a>    <span class="nd">@profile</span>
</span><span id="__span-21-362"><a id="__codelineno-21-362" name="__codelineno-21-362" href="#__codelineno-21-362"></a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lut</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="__span-21-363"><a id="__codelineno-21-363" name="__codelineno-21-363" href="#__codelineno-21-363"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="__span-21-364"><a id="__codelineno-21-364" name="__codelineno-21-364" href="#__codelineno-21-364"></a>        <span class="c1"># Load BW buffer to BW RAM and RED buffer to RED RAM.</span>
</span><span id="__span-21-365"><a id="__codelineno-21-365" name="__codelineno-21-365" href="#__codelineno-21-365"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal</span><span class="p">:</span>
</span><span id="__span-21-366"><a id="__codelineno-21-366" name="__codelineno-21-366" href="#__codelineno-21-366"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x24</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_bw</span><span class="p">)</span>
</span><span id="__span-21-367"><a id="__codelineno-21-367" name="__codelineno-21-367" href="#__codelineno-21-367"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x26</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_red</span><span class="p">)</span>
</span><span id="__span-21-368"><a id="__codelineno-21-368" name="__codelineno-21-368" href="#__codelineno-21-368"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-369"><a id="__codelineno-21-369" name="__codelineno-21-369" href="#__codelineno-21-369"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x24</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reverse_bits</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_bw</span><span class="p">)))</span>
</span><span id="__span-21-370"><a id="__codelineno-21-370" name="__codelineno-21-370" href="#__codelineno-21-370"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_send</span><span class="p">(</span><span class="mh">0x26</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reverse_bits</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_red</span><span class="p">)))</span>
</span><span id="__span-21-371"><a id="__codelineno-21-371" name="__codelineno-21-371" href="#__codelineno-21-371"></a>
</span><span id="__span-21-372"><a id="__codelineno-21-372" name="__codelineno-21-372" href="#__codelineno-21-372"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_load_LUT</span><span class="p">(</span><span class="n">lut</span><span class="p">)</span>
</span><span id="__span-21-373"><a id="__codelineno-21-373" name="__codelineno-21-373" href="#__codelineno-21-373"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="mh">0x20</span><span class="p">)</span>
</span><span id="__span-21-374"><a id="__codelineno-21-374" name="__codelineno-21-374" href="#__codelineno-21-374"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_read_busy</span><span class="p">()</span>
</span><span id="__span-21-375"><a id="__codelineno-21-375" name="__codelineno-21-375" href="#__codelineno-21-375"></a>
</span><span id="__span-21-376"><a id="__codelineno-21-376" name="__codelineno-21-376" href="#__codelineno-21-376"></a>
</span><span id="__span-21-377"><a id="__codelineno-21-377" name="__codelineno-21-377" href="#__codelineno-21-377"></a><span class="k">class</span> <span class="nc">EinkPIO</span><span class="p">(</span><span class="n">EinkBase</span><span class="p">):</span>
</span><span id="__span-21-378"><a id="__codelineno-21-378" name="__codelineno-21-378" href="#__codelineno-21-378"></a>    <span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">mem32</span>
</span><span id="__span-21-379"><a id="__codelineno-21-379" name="__codelineno-21-379" href="#__codelineno-21-379"></a>
</span><span id="__span-21-380"><a id="__codelineno-21-380" name="__codelineno-21-380" href="#__codelineno-21-380"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sm_num</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">dma</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-21-381"><a id="__codelineno-21-381" name="__codelineno-21-381" href="#__codelineno-21-381"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sm_num</span> <span class="o">=</span> <span class="n">sm_num</span>
</span><span id="__span-21-382"><a id="__codelineno-21-382" name="__codelineno-21-382" href="#__codelineno-21-382"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dma</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dma</span> <span class="o">*</span> <span class="mh">0x40</span> <span class="o">+</span> <span class="mh">0x50000030</span><span class="p">)</span>
</span><span id="__span-21-383"><a id="__codelineno-21-383" name="__codelineno-21-383" href="#__codelineno-21-383"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sm</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-21-384"><a id="__codelineno-21-384" name="__codelineno-21-384" href="#__codelineno-21-384"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sm_shiftctrl</span> <span class="o">=</span> <span class="p">(</span><span class="mh">0x502000d0</span> <span class="o">+</span> <span class="mh">0x100000</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sm_num</span> <span class="o">//</span> <span class="mi">4</span><span class="p">)</span>
</span><span id="__span-21-385"><a id="__codelineno-21-385" name="__codelineno-21-385" href="#__codelineno-21-385"></a>                              <span class="o">+</span> <span class="mh">0x18</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sm_num</span> <span class="o">%</span> <span class="mi">4</span><span class="p">))</span>
</span><span id="__span-21-386"><a id="__codelineno-21-386" name="__codelineno-21-386" href="#__codelineno-21-386"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dma_write_addr</span> <span class="o">=</span> <span class="p">(</span><span class="mh">0x50200010</span> <span class="o">+</span> <span class="mh">0x100000</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sm_num</span> <span class="o">//</span> <span class="mi">4</span><span class="p">)</span>
</span><span id="__span-21-387"><a id="__codelineno-21-387" name="__codelineno-21-387" href="#__codelineno-21-387"></a>                                <span class="o">+</span> <span class="mh">0x4</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sm_num</span> <span class="o">%</span> <span class="mi">4</span><span class="p">))</span>
</span><span id="__span-21-388"><a id="__codelineno-21-388" name="__codelineno-21-388" href="#__codelineno-21-388"></a>        <span class="n">dreq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sm_num</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">8</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sm_num</span> <span class="o">//</span> <span class="mi">4</span><span class="p">)</span>
</span><span id="__span-21-389"><a id="__codelineno-21-389" name="__codelineno-21-389" href="#__codelineno-21-389"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dma_ctrl</span> <span class="o">=</span> <span class="n">dreq</span> <span class="o">&lt;&lt;</span> <span class="mi">15</span> <span class="o">|</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span> <span class="o">|</span> <span class="mi">1</span>
</span><span id="__span-21-390"><a id="__codelineno-21-390" name="__codelineno-21-390" href="#__codelineno-21-390"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_pio_setup</span><span class="p">()</span>
</span><span id="__span-21-391"><a id="__codelineno-21-391" name="__codelineno-21-391" href="#__codelineno-21-391"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">EinkPIO</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-21-392"><a id="__codelineno-21-392" name="__codelineno-21-392" href="#__codelineno-21-392"></a>
</span><span id="__span-21-393"><a id="__codelineno-21-393" name="__codelineno-21-393" href="#__codelineno-21-393"></a>    <span class="k">def</span> <span class="nf">_pio_setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-21-394"><a id="__codelineno-21-394" name="__codelineno-21-394" href="#__codelineno-21-394"></a>        <span class="kn">from</span> <span class="nn">rp2</span> <span class="kn">import</span> <span class="n">asm_pio</span><span class="p">,</span> <span class="n">PIO</span><span class="p">,</span> <span class="n">StateMachine</span>
</span><span id="__span-21-395"><a id="__codelineno-21-395" name="__codelineno-21-395" href="#__codelineno-21-395"></a>
</span><span id="__span-21-396"><a id="__codelineno-21-396" name="__codelineno-21-396" href="#__codelineno-21-396"></a>        <span class="nd">@asm_pio</span><span class="p">(</span><span class="n">out_init</span><span class="o">=</span><span class="n">PIO</span><span class="o">.</span><span class="n">OUT_LOW</span><span class="p">,</span>
</span><span id="__span-21-397"><a id="__codelineno-21-397" name="__codelineno-21-397" href="#__codelineno-21-397"></a>                 <span class="n">sideset_init</span><span class="o">=</span><span class="n">PIO</span><span class="o">.</span><span class="n">OUT_LOW</span><span class="p">,</span>
</span><span id="__span-21-398"><a id="__codelineno-21-398" name="__codelineno-21-398" href="#__codelineno-21-398"></a>                 <span class="n">autopull</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-21-399"><a id="__codelineno-21-399" name="__codelineno-21-399" href="#__codelineno-21-399"></a>                 <span class="n">pull_thresh</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
</span><span id="__span-21-400"><a id="__codelineno-21-400" name="__codelineno-21-400" href="#__codelineno-21-400"></a>                 <span class="n">out_shiftdir</span><span class="o">=</span><span class="n">PIO</span><span class="o">.</span><span class="n">SHIFT_LEFT</span><span class="p">)</span>
</span><span id="__span-21-401"><a id="__codelineno-21-401" name="__codelineno-21-401" href="#__codelineno-21-401"></a>        <span class="k">def</span> <span class="nf">pio_serial_tx</span><span class="p">():</span>
</span><span id="__span-21-402"><a id="__codelineno-21-402" name="__codelineno-21-402" href="#__codelineno-21-402"></a>            <span class="n">out</span><span class="p">(</span><span class="n">pins</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">side</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-403"><a id="__codelineno-21-403" name="__codelineno-21-403" href="#__codelineno-21-403"></a>            <span class="n">nop</span><span class="p">()</span><span class="o">.</span><span class="n">side</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-404"><a id="__codelineno-21-404" name="__codelineno-21-404" href="#__codelineno-21-404"></a>
</span><span id="__span-21-405"><a id="__codelineno-21-405" name="__codelineno-21-405" href="#__codelineno-21-405"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sm</span> <span class="o">=</span> <span class="n">StateMachine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sm_num</span><span class="p">,</span> <span class="n">pio_serial_tx</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="mi">40_000_000</span><span class="p">,</span>
</span><span id="__span-21-406"><a id="__codelineno-21-406" name="__codelineno-21-406" href="#__codelineno-21-406"></a>                                <span class="n">sideset_base</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">out_base</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span>
</span><span id="__span-21-407"><a id="__codelineno-21-407" name="__codelineno-21-407" href="#__codelineno-21-407"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_sm</span><span class="o">.</span><span class="n">active</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-408"><a id="__codelineno-21-408" name="__codelineno-21-408" href="#__codelineno-21-408"></a>
</span><span id="__span-21-409"><a id="__codelineno-21-409" name="__codelineno-21-409" href="#__codelineno-21-409"></a>    <span class="k">def</span> <span class="nf">_reversed_output</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-21-410"><a id="__codelineno-21-410" name="__codelineno-21-410" href="#__codelineno-21-410"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mem32</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sm_shiftctrl</span> <span class="o">+</span> <span class="mh">0x2000</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">19</span>
</span><span id="__span-21-411"><a id="__codelineno-21-411" name="__codelineno-21-411" href="#__codelineno-21-411"></a>
</span><span id="__span-21-412"><a id="__codelineno-21-412" name="__codelineno-21-412" href="#__codelineno-21-412"></a>    <span class="k">def</span> <span class="nf">_normal_output</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-21-413"><a id="__codelineno-21-413" name="__codelineno-21-413" href="#__codelineno-21-413"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">mem32</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_sm_shiftctrl</span> <span class="o">+</span> <span class="mh">0x3000</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">19</span>
</span><span id="__span-21-414"><a id="__codelineno-21-414" name="__codelineno-21-414" href="#__codelineno-21-414"></a>
</span><span id="__span-21-415"><a id="__codelineno-21-415" name="__codelineno-21-415" href="#__codelineno-21-415"></a>    <span class="k">def</span> <span class="nf">_send_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
</span><span id="__span-21-416"><a id="__codelineno-21-416" name="__codelineno-21-416" href="#__codelineno-21-416"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dc</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-417"><a id="__codelineno-21-417" name="__codelineno-21-417" href="#__codelineno-21-417"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cs</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-418"><a id="__codelineno-21-418" name="__codelineno-21-418" href="#__codelineno-21-418"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="__span-21-419"><a id="__codelineno-21-419" name="__codelineno-21-419" href="#__codelineno-21-419"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_sm</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
</span><span id="__span-21-420"><a id="__codelineno-21-420" name="__codelineno-21-420" href="#__codelineno-21-420"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="p">(</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">)):</span>
</span><span id="__span-21-421"><a id="__codelineno-21-421" name="__codelineno-21-421" href="#__codelineno-21-421"></a>            <span class="k">for</span> <span class="n">cmd</span> <span class="ow">in</span> <span class="n">command</span><span class="p">:</span>
</span><span id="__span-21-422"><a id="__codelineno-21-422" name="__codelineno-21-422" href="#__codelineno-21-422"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_sm</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
</span><span id="__span-21-423"><a id="__codelineno-21-423" name="__codelineno-21-423" href="#__codelineno-21-423"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-424"><a id="__codelineno-21-424" name="__codelineno-21-424" href="#__codelineno-21-424"></a>            <span class="k">raise</span> <span class="ne">ValueError</span>
</span><span id="__span-21-425"><a id="__codelineno-21-425" name="__codelineno-21-425" href="#__codelineno-21-425"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-426"><a id="__codelineno-21-426" name="__codelineno-21-426" href="#__codelineno-21-426"></a>
</span><span id="__span-21-427"><a id="__codelineno-21-427" name="__codelineno-21-427" href="#__codelineno-21-427"></a>    <span class="k">def</span> <span class="nf">_send_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-21-428"><a id="__codelineno-21-428" name="__codelineno-21-428" href="#__codelineno-21-428"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dc</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-429"><a id="__codelineno-21-429" name="__codelineno-21-429" href="#__codelineno-21-429"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cs</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-430"><a id="__codelineno-21-430" name="__codelineno-21-430" href="#__codelineno-21-430"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="__span-21-431"><a id="__codelineno-21-431" name="__codelineno-21-431" href="#__codelineno-21-431"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_sm</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
</span><span id="__span-21-432"><a id="__codelineno-21-432" name="__codelineno-21-432" href="#__codelineno-21-432"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">)):</span>
</span><span id="__span-21-433"><a id="__codelineno-21-433" name="__codelineno-21-433" href="#__codelineno-21-433"></a>            <span class="k">for</span> <span class="n">cmd</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span id="__span-21-434"><a id="__codelineno-21-434" name="__codelineno-21-434" href="#__codelineno-21-434"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_sm</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
</span><span id="__span-21-435"><a id="__codelineno-21-435" name="__codelineno-21-435" href="#__codelineno-21-435"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-436"><a id="__codelineno-21-436" name="__codelineno-21-436" href="#__codelineno-21-436"></a>            <span class="k">raise</span> <span class="ne">ValueError</span>
</span><span id="__span-21-437"><a id="__codelineno-21-437" name="__codelineno-21-437" href="#__codelineno-21-437"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-438"><a id="__codelineno-21-438" name="__codelineno-21-438" href="#__codelineno-21-438"></a>
</span><span id="__span-21-439"><a id="__codelineno-21-439" name="__codelineno-21-439" href="#__codelineno-21-439"></a>    <span class="nd">@micropython</span><span class="o">.</span><span class="n">viper</span>
</span><span id="__span-21-440"><a id="__codelineno-21-440" name="__codelineno-21-440" href="#__codelineno-21-440"></a>    <span class="k">def</span> <span class="nf">_dma_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">):</span>
</span><span id="__span-21-441"><a id="__codelineno-21-441" name="__codelineno-21-441" href="#__codelineno-21-441"></a>        <span class="n">dma_ptr</span> <span class="o">=</span> <span class="n">ptr32</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dma</span><span class="p">)</span>
</span><span id="__span-21-442"><a id="__codelineno-21-442" name="__codelineno-21-442" href="#__codelineno-21-442"></a>        <span class="n">dma_ptr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dma_ctrl</span><span class="p">)</span>
</span><span id="__span-21-443"><a id="__codelineno-21-443" name="__codelineno-21-443" href="#__codelineno-21-443"></a>        <span class="n">dma_ptr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dma_write_addr</span><span class="p">)</span>
</span><span id="__span-21-444"><a id="__codelineno-21-444" name="__codelineno-21-444" href="#__codelineno-21-444"></a>        <span class="n">dma_ptr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">buffer</span><span class="p">))</span>
</span><span id="__span-21-445"><a id="__codelineno-21-445" name="__codelineno-21-445" href="#__codelineno-21-445"></a>        <span class="n">dma_ptr</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ptr32</span><span class="p">(</span><span class="n">buffer</span><span class="p">))</span>
</span><span id="__span-21-446"><a id="__codelineno-21-446" name="__codelineno-21-446" href="#__codelineno-21-446"></a>
</span><span id="__span-21-447"><a id="__codelineno-21-447" name="__codelineno-21-447" href="#__codelineno-21-447"></a>    <span class="nd">@micropython</span><span class="o">.</span><span class="n">viper</span>
</span><span id="__span-21-448"><a id="__codelineno-21-448" name="__codelineno-21-448" href="#__codelineno-21-448"></a>    <span class="k">def</span> <span class="nf">_check_dma_busy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="n">ptr32</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="__span-21-449"><a id="__codelineno-21-449" name="__codelineno-21-449" href="#__codelineno-21-449"></a>        <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">24</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span>
</span><span id="__span-21-450"><a id="__codelineno-21-450" name="__codelineno-21-450" href="#__codelineno-21-450"></a>
</span><span id="__span-21-451"><a id="__codelineno-21-451" name="__codelineno-21-451" href="#__codelineno-21-451"></a>    <span class="k">def</span> <span class="nf">_send_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buffer</span><span class="p">):</span>
</span><span id="__span-21-452"><a id="__codelineno-21-452" name="__codelineno-21-452" href="#__codelineno-21-452"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal</span><span class="p">:</span>
</span><span id="__span-21-453"><a id="__codelineno-21-453" name="__codelineno-21-453" href="#__codelineno-21-453"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_reversed_output</span><span class="p">()</span>
</span><span id="__span-21-454"><a id="__codelineno-21-454" name="__codelineno-21-454" href="#__codelineno-21-454"></a>
</span><span id="__span-21-455"><a id="__codelineno-21-455" name="__codelineno-21-455" href="#__codelineno-21-455"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dc</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-456"><a id="__codelineno-21-456" name="__codelineno-21-456" href="#__codelineno-21-456"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cs</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-21-457"><a id="__codelineno-21-457" name="__codelineno-21-457" href="#__codelineno-21-457"></a>
</span><span id="__span-21-458"><a id="__codelineno-21-458" name="__codelineno-21-458" href="#__codelineno-21-458"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_dma_start</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
</span><span id="__span-21-459"><a id="__codelineno-21-459" name="__codelineno-21-459" href="#__codelineno-21-459"></a>        <span class="n">dma_ctrl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dma</span>
</span><span id="__span-21-460"><a id="__codelineno-21-460" name="__codelineno-21-460" href="#__codelineno-21-460"></a>
</span><span id="__span-21-461"><a id="__codelineno-21-461" name="__codelineno-21-461" href="#__codelineno-21-461"></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">ticks_ms</span><span class="p">()</span>
</span><span id="__span-21-462"><a id="__codelineno-21-462" name="__codelineno-21-462" href="#__codelineno-21-462"></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_dma_busy</span><span class="p">(</span><span class="n">dma_ctrl</span><span class="p">)</span> <span class="ow">and</span> <span class="n">ticks_diff</span><span class="p">(</span><span class="n">ticks_ms</span><span class="p">(),</span> <span class="n">start</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">5000</span><span class="p">:</span>
</span><span id="__span-21-463"><a id="__codelineno-21-463" name="__codelineno-21-463" href="#__codelineno-21-463"></a>            <span class="k">pass</span>
</span><span id="__span-21-464"><a id="__codelineno-21-464" name="__codelineno-21-464" href="#__codelineno-21-464"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-21-465"><a id="__codelineno-21-465" name="__codelineno-21-465" href="#__codelineno-21-465"></a>        <span class="k">if</span> <span class="n">ticks_diff</span><span class="p">(</span><span class="n">ticks_ms</span><span class="p">(),</span> <span class="n">start</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">5000</span><span class="p">:</span>
</span><span id="__span-21-466"><a id="__codelineno-21-466" name="__codelineno-21-466" href="#__codelineno-21-466"></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">'loading data took too long'</span><span class="p">)</span>
</span><span id="__span-21-467"><a id="__codelineno-21-467" name="__codelineno-21-467" href="#__codelineno-21-467"></a>
</span><span id="__span-21-468"><a id="__codelineno-21-468" name="__codelineno-21-468" href="#__codelineno-21-468"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal</span><span class="p">:</span>
</span><span id="__span-21-469"><a id="__codelineno-21-469" name="__codelineno-21-469" href="#__codelineno-21-469"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_normal_output</span><span class="p">()</span>
</span><span id="__span-21-470"><a id="__codelineno-21-470" name="__codelineno-21-470" href="#__codelineno-21-470"></a>
</span><span id="__span-21-471"><a id="__codelineno-21-471" name="__codelineno-21-471" href="#__codelineno-21-471"></a>    <span class="c1"># --------------------------------------------------------</span>
</span><span id="__span-21-472"><a id="__codelineno-21-472" name="__codelineno-21-472" href="#__codelineno-21-472"></a>    <span class="c1"># Public methods.</span>
</span><span id="__span-21-473"><a id="__codelineno-21-473" name="__codelineno-21-473" href="#__codelineno-21-473"></a>    <span class="c1"># --------------------------------------------------------</span>
</span><span id="__span-21-474"><a id="__codelineno-21-474" name="__codelineno-21-474" href="#__codelineno-21-474"></a>
</span><span id="__span-21-475"><a id="__codelineno-21-475" name="__codelineno-21-475" href="#__codelineno-21-475"></a>    <span class="nd">@profile</span>
</span><span id="__span-21-476"><a id="__codelineno-21-476" name="__codelineno-21-476" href="#__codelineno-21-476"></a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lut</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="__span-21-477"><a id="__codelineno-21-477" name="__codelineno-21-477" href="#__codelineno-21-477"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="__span-21-478"><a id="__codelineno-21-478" name="__codelineno-21-478" href="#__codelineno-21-478"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="mh">0x24</span><span class="p">)</span>
</span><span id="__span-21-479"><a id="__codelineno-21-479" name="__codelineno-21-479" href="#__codelineno-21-479"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_buffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer_bw</span><span class="p">)</span>
</span><span id="__span-21-480"><a id="__codelineno-21-480" name="__codelineno-21-480" href="#__codelineno-21-480"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="mh">0x26</span><span class="p">)</span>
</span><span id="__span-21-481"><a id="__codelineno-21-481" name="__codelineno-21-481" href="#__codelineno-21-481"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_buffer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_buffer_red</span><span class="p">)</span>
</span><span id="__span-21-482"><a id="__codelineno-21-482" name="__codelineno-21-482" href="#__codelineno-21-482"></a>
</span><span id="__span-21-483"><a id="__codelineno-21-483" name="__codelineno-21-483" href="#__codelineno-21-483"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_load_LUT</span><span class="p">(</span><span class="n">lut</span><span class="p">)</span>
</span><span id="__span-21-484"><a id="__codelineno-21-484" name="__codelineno-21-484" href="#__codelineno-21-484"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_send_command</span><span class="p">(</span><span class="mh">0x20</span><span class="p">)</span>
</span><span id="__span-21-485"><a id="__codelineno-21-485" name="__codelineno-21-485" href="#__codelineno-21-485"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_read_busy</span><span class="p">()</span>
</span><span id="__span-21-486"><a id="__codelineno-21-486" name="__codelineno-21-486" href="#__codelineno-21-486"></a>
</span><span id="__span-21-487"><a id="__codelineno-21-487" name="__codelineno-21-487" href="#__codelineno-21-487"></a>
</span><span id="__span-21-488"><a id="__codelineno-21-488" name="__codelineno-21-488" href="#__codelineno-21-488"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
</span><span id="__span-21-489"><a id="__codelineno-21-489" name="__codelineno-21-489" href="#__codelineno-21-489"></a>    <span class="n">epd</span> <span class="o">=</span> <span class="n">EinkPIO</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">270</span><span class="p">)</span>
</span><span id="__span-21-490"><a id="__codelineno-21-490" name="__codelineno-21-490" href="#__codelineno-21-490"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill</span><span class="p">()</span>
</span><span id="__span-21-491"><a id="__codelineno-21-491" name="__codelineno-21-491" href="#__codelineno-21-491"></a>
</span><span id="__span-21-492"><a id="__codelineno-21-492" name="__codelineno-21-492" href="#__codelineno-21-492"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">"test"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span><span id="__span-21-493"><a id="__codelineno-21-493" name="__codelineno-21-493" href="#__codelineno-21-493"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">epd</span><span class="o">.</span><span class="n">lightgray</span><span class="p">)</span>
</span><span id="__span-21-494"><a id="__codelineno-21-494" name="__codelineno-21-494" href="#__codelineno-21-494"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">"test"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">epd</span><span class="o">.</span><span class="n">darkgray</span><span class="p">)</span>
</span><span id="__span-21-495"><a id="__codelineno-21-495" name="__codelineno-21-495" href="#__codelineno-21-495"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">epd</span><span class="o">.</span><span class="n">darkgray</span><span class="p">)</span>
</span><span id="__span-21-496"><a id="__codelineno-21-496" name="__codelineno-21-496" href="#__codelineno-21-496"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">"test"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="n">epd</span><span class="o">.</span><span class="n">lightgray</span><span class="p">)</span>
</span><span id="__span-21-497"><a id="__codelineno-21-497" name="__codelineno-21-497" href="#__codelineno-21-497"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span><span id="__span-21-498"><a id="__codelineno-21-498" name="__codelineno-21-498" href="#__codelineno-21-498"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">"test"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">epd</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
</span><span id="__span-21-499"><a id="__codelineno-21-499" name="__codelineno-21-499" href="#__codelineno-21-499"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">41</span><span class="p">)</span>
</span><span id="__span-21-500"><a id="__codelineno-21-500" name="__codelineno-21-500" href="#__codelineno-21-500"></a>
</span><span id="__span-21-501"><a id="__codelineno-21-501" name="__codelineno-21-501" href="#__codelineno-21-501"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">hline</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-21-502"><a id="__codelineno-21-502" name="__codelineno-21-502" href="#__codelineno-21-502"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">hline</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-21-503"><a id="__codelineno-21-503" name="__codelineno-21-503" href="#__codelineno-21-503"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">vline</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="__span-21-504"><a id="__codelineno-21-504" name="__codelineno-21-504" href="#__codelineno-21-504"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">vline</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="__span-21-505"><a id="__codelineno-21-505" name="__codelineno-21-505" href="#__codelineno-21-505"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">160</span><span class="p">)</span>
</span><span id="__span-21-506"><a id="__codelineno-21-506" name="__codelineno-21-506" href="#__codelineno-21-506"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">160</span><span class="p">)</span>
</span><span id="__span-21-507"><a id="__codelineno-21-507" name="__codelineno-21-507" href="#__codelineno-21-507"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="__span-21-508"><a id="__codelineno-21-508" name="__codelineno-21-508" href="#__codelineno-21-508"></a>
</span><span id="__span-21-509"><a id="__codelineno-21-509" name="__codelineno-21-509" href="#__codelineno-21-509"></a>    <span class="n">sleep_ms</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</span><span id="__span-21-510"><a id="__codelineno-21-510" name="__codelineno-21-510" href="#__codelineno-21-510"></a>
</span><span id="__span-21-511"><a id="__codelineno-21-511" name="__codelineno-21-511" href="#__codelineno-21-511"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-21-512"><a id="__codelineno-21-512" name="__codelineno-21-512" href="#__codelineno-21-512"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="n">epd</span><span class="o">.</span><span class="n">darkgray</span><span class="p">)</span>
</span><span id="__span-21-513"><a id="__codelineno-21-513" name="__codelineno-21-513" href="#__codelineno-21-513"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="n">epd</span><span class="o">.</span><span class="n">lightgray</span><span class="p">)</span>
</span><span id="__span-21-514"><a id="__codelineno-21-514" name="__codelineno-21-514" href="#__codelineno-21-514"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">170</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="__span-21-515"><a id="__codelineno-21-515" name="__codelineno-21-515" href="#__codelineno-21-515"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
</span><span id="__span-21-516"><a id="__codelineno-21-516" name="__codelineno-21-516" href="#__codelineno-21-516"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="__span-21-517"><a id="__codelineno-21-517" name="__codelineno-21-517" href="#__codelineno-21-517"></a>
</span><span id="__span-21-518"><a id="__codelineno-21-518" name="__codelineno-21-518" href="#__codelineno-21-518"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>
</span></code></pre></div>
<p><strong>IMG_0182_gs_d.py</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="n">width</span> <span class="o">=</span> <span class="mi">184</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="n">height</span> <span class="o">=</span> <span class="mi">135</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="n">img_bw</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="sa">b</span><span class="s1">'</span><span class="se">\x02\x92\xaa\xaa\xf7</span><span class="s1">~</span><span class="se">\x01\xf0\x02</span><span class="s1">x</span><span class="se">\x00</span><span class="s1">A?</span><span class="se">\xf8\x0b\x11\x00\x14</span><span class="s1">"G</span><span class="se">\xc2\xa9\x0f</span><span class="s1">QJUU/</span><span class="se">\xbc\x03\xbc\x02</span><span class="s1">x </span><span class="se">\x01\xff\xe4\x05</span><span class="s1">8</span><span class="se">\x04</span><span class="s1">&gt;</span><span class="se">\x08</span><span class="s1">7</span><span class="se">\x82\x14\x0f</span><span class="s1">P</span><span class="se">\xe1</span><span class="s1">UT</span><span class="se">\xae\xc2\x01\xbf</span><span class="s1">P</span><span class="se">\xf0\x00</span><span class="s1">a</span><span class="se">\xb0\xe1</span><span class="s1">`</span><span class="se">\x1d\x00\x15\x10\x1f\xb6\x00\x0f\x15\x12\x14\xaa\x15\xb9\xf7\xff\xfa</span><span class="s1">p</span><span class="se">\x00</span><span class="s1">@</span><span class="se">\xf0\xe6</span><span class="s1"> ?</span><span class="se">\x80\x84\n\x00\xac\x08\x0f\x90</span><span class="s1">XUUJ</span><span class="se">\xef\xff\xff\xf0</span><span class="s1">w</span><span class="se">\x88\x00</span><span class="s1">i</span><span class="se">\xf9\x00\x7f\xc3</span><span class="s1">e</span><span class="se">\x0f\x01</span><span class="s1">r`</span><span class="se">\x0f\xa8\xaa\xaa\xaa\xab</span><span class="s1">7</span><span class="se">\xf3\xf9\xf0</span><span class="s1">/</span><span class="se">\xc1\x00</span><span class="s1">`</span><span class="se">\xdf\xad\xff\xf1</span><span class="s1">0</span><span class="se">\xdf\xc0\xaa\x90</span><span class="s1">/D</span><span class="se">\x15</span><span class="s1">J</span><span class="se">\xab</span><span class="s1">A</span><span class="se">\xd5\xc1\xaa\xd1</span><span class="s1">o</span><span class="se">\x80\x04</span><span class="s1">8-</span><span class="se">\xad\xfe\xf8</span><span class="s1">r</span><span class="se">\xde\xe0\xb1</span><span class="s1">@_</span><span class="se">\xa9</span><span class="s1">J%UJk</span><span class="se">\xc3\x97\xb0\x7f\x00\x00\x00\xdf</span><span class="s1">O</span><span class="se">\xe0</span><span class="s1">?Z</span><span class="se">\x0f\xe0</span><span class="s1">j</span><span class="se">\x00\x0f</span><span class="s1">T</span><span class="se">\xa1\x95</span><span class="s1">UP</span><span class="se">\xaa\xe2</span><span class="s1">p</span><span class="se">\xf0\xf0\x00\x08\x00\xfe\x9c\xf9\x0f\xfe</span><span class="s1">,</span><span class="se">\xb1\xd4\x80</span><span class="s1">/R</span><span class="se">\x01</span><span class="s1">A*</span><span class="se">\xa8</span><span class="s1">U</span><span class="se">\x7f\xf0</span><span class="s1">{</span><span class="se">\xc0\x80</span><span class="s1">P</span><span class="se">\x01\xfa\xc6</span><span class="s1">&lt;</span><span class="se">\x07\x97</span><span class="s1">&gt;</span><span class="se">\xb1</span><span class="s1">J </span><span class="se">\x1f</span><span class="s1">U</span><span class="se">\x00</span><span class="s1">B</span><span class="se">\x15</span><span class="s1">TR</span><span class="se">\xff\xfe\x08\xdd\x1a\x00\x13\xf6\x0b\n\x07\xbe</span><span class="s1">48</span><span class="se">\xe8\x00\x0f</span><span class="s1">Z</span><span class="se">\x00\x92\xaa\xa0\xa2\x9f\xff\x07\x1c\x89\x04\x07\xfd\xa9\x00\x07</span><span class="s1">[</span><span class="se">\xab</span><span class="s1">xP@</span><span class="se">\x0f</span><span class="s1">*</span><span class="se">\x80</span><span class="s1">AJ</span><span class="se">\x98\x14\xaf\xff\x00</span><span class="s1">}</span><span class="se">\x10\x00\x05\xf5\xa0\n\x0f\x0f</span><span class="s1">GYu</span><span class="se">\xa0\x0f</span><span class="s1">UQT</span><span class="se">\xa5</span><span class="s1">TE_</span><span class="se">\xff\xc0\x02</span><span class="s1">`</span><span class="se">\x90\x0b\xdb\x04\x04\x0f</span><span class="s1">OS</span><span class="se">\xb0\x8a\x80\x0f\x15</span><span class="s1">()U*</span><span class="se">\x14\x0f\xff\xf0\x80\xea\x1c\x17\xbf\xb0\x00\xbf</span><span class="s1">O</span><span class="se">\xaf</span><span class="s1">P</span><span class="se">\x13\x00\x0f</span><span class="s1">J</span><span class="se">\x85</span><span class="s1">(ET</span><span class="se">\x02\x8f\xff\xe2\xaa</span><span class="s1">|</span><span class="se">\x84\xf6\xfe</span><span class="s1">!0</span><span class="se">\xc7\x17\x93\xc1</span><span class="s1">)</span><span class="se">\x00\x0f</span><span class="s1">%@T</span><span class="se">\xa9</span><span class="s1">J</span><span class="se">\x80\xbf\xff\xfd</span><span class="s1">Z</span><span class="se">\x1d\xc1\xa7\xfd</span><span class="s1">Q</span><span class="se">\xc0\x02\x10</span><span class="s1">w</span><span class="se">\xea</span><span class="s1">(</span><span class="se">\x00\x0f\x15</span><span class="s1">@(T</span><span class="se">\xaa</span><span class="s1">P</span><span class="se">\xf7\xff\xfd</span><span class="s1">I</span><span class="se">\x0f\xbe\xeb\xfd</span><span class="s1">$@</span><span class="se">\x00\x14\x0f\xd0</span><span class="s1"> </span><span class="se">\x00</span><span class="s1">O</span><span class="se">\x08\xa1\n\xa2\xa5</span><span class="s1">@</span><span class="se">\xdf\xff\xef</span><span class="s1">e</span><span class="se">\x03\xff\xc1\xf6\x98\xc0\x10\x10\x07\xf0</span><span class="s1">)</span><span class="se">\x02\x0f\x05</span><span class="s1">T</span><span class="se">\n</span><span class="s1">UT#</span><span class="se">\xff\xff\xef\xb5\x7f\xcf\xc1\xfa</span><span class="s1">| </span><span class="se">\x00\x00\'\x80\x80\x00\x0f</span><span class="s1">J</span><span class="se">\xa8\x15</span><span class="s1">(</span><span class="se">\xa8\x87\x8f\xbf</span><span class="s1">Q</span><span class="se">\xcf\xf7\xff\x00</span><span class="s1">H</span><span class="se">\x9d\x08\x00\x00</span><span class="s1">/</span><span class="se">\xa0</span><span class="s1">@</span><span class="se">\x00\x0f</span><span class="s1">%Q</span><span class="se">\x02\x95\x00</span><span class="s1">(</span><span class="se">\x07\xda\x80</span><span class="s1">G</span><span class="se">\xdb\xe4\xc0</span><span class="s1">eq</span><span class="se">\x06\x00\x8d\x1f\x1a\x00\x8a\x0f</span><span class="s1">P</span><span class="se">\xaa\x15</span><span class="s1">H</span><span class="se">\x10</span><span class="s1">0</span><span class="se">\x03\xc6\x00\xc7\xfd\xb6</span><span class="s1">@</span><span class="se">\xd0\xf4\x04</span><span class="s1"> </span><span class="se">\xe8</span><span class="s1">?`</span><span class="se">\x00\x00\x0f\n\xa9\x01</span><span class="s1">T</span><span class="se">\x00</span><span class="s1"> </span><span class="se">\x03\xeb\xc0</span><span class="s1">#</span><span class="se">\xf5</span><span class="s1">WTEt</span><span class="se">\x00\xb0</span><span class="s1">p</span><span class="se">\x7f</span><span class="s1">P</span><span class="se">\x00\x00</span><span class="s1">_)J</span><span class="se">\x80</span><span class="s1">(</span><span class="se">\x00</span><span class="s1">j</span><span class="se">\x83\xf3\xf0</span><span class="s1">G</span><span class="se">\xe8\xbe\xe8\x00\x04\x00</span><span class="s1">|</span><span class="se">\xfd\xff</span><span class="s1">@</span><span class="se">\x00\x00\xaf\x04</span><span class="s1">)$</span><span class="se">\x05\x00\xff\x83\xf1\xf0\xc2\xf5\xfa\x04\x01</span><span class="s1">$</span><span class="se">\x02\x7f\xff\xff\x80\x01\x00</span><span class="s1">O</span><span class="se">\x05</span><span class="s1">J</span><span class="se">\x90\x00</span><span class="s1">C</span><span class="se">\xbf\x03\xf9\xfe\x95\xb5\x89\t\x00\x06\x04\xbf\xff\xff\x00\x00</span><span class="s1"> </span><span class="se">\x0f</span><span class="s1"> </span><span class="se">\xa2</span><span class="s1">D</span><span class="se">\x00\x07\x01\x05\xdc\xff\xc2\xfb\x80\x03\x00\x04</span><span class="s1">!_</span><span class="se">\xff\xfe\x00\x02\xb5\x0f</span><span class="s1">A </span><span class="se">\xa2\x00\x0f</span><span class="s1">@</span><span class="se">\x03\xef\xfe</span><span class="s1">Uq</span><span class="se">\xc0</span><span class="s1"> `</span><span class="se">\x06\x00\x04\x7f\xfe\xa0\x05</span><span class="s1">l</span><span class="se">\x0f\x04\x12</span><span class="s1">@</span><span class="se">\x00\x7f\xc0\x01\xfb\xfe</span><span class="s1">z</span><span class="se">\xf7\x80</span><span class="s1">$</span><span class="se">\x00\x04\x00\x05\x8f\xfc\x00\x1f\xb8\x0f\x12</span><span class="s1">@ </span><span class="se">\xa0\xfb\xf0\x01\xbf\xf1\x7f</span><span class="s1">{</span><span class="se">\x80\x08\x00\x04\x00\x05\xf3\xf8\x00\x05\x00</span><span class="s1">_H</span><span class="se">\x00\x00\x03\xff\xfc\x00\xbf\xbc</span><span class="s1">~</span><span class="se">\xbf\xc0</span><span class="s1">P</span><span class="se">\x00\x04\x01\x80\xd8\xf5\x00\x02\x03\xef</span><span class="s1"> </span><span class="se">\x00\x00</span><span class="s1">G</span><span class="se">\xff\xfc\x00\xff\xee\xff</span><span class="s1">_</span><span class="se">\xc0\x10\x00\x08\x02\x01\xf4\xfe\x90\x00\n\x0f\x00</span><span class="s1">E</span><span class="se">\x00\x07\xff\xff\x01\x7f\xf3\xff</span><span class="s1">_</span><span class="se">\xc0\xaa\x00\x08\x06\x01\xfb</span><span class="s1">m@</span><span class="se">\x00</span><span class="s1">(</span><span class="se">\x0f</span><span class="s1">@</span><span class="se">\x00</span><span class="s1">@</span><span class="se">\x03\xff\xff\x00\xfe\xb7\xff\xff\xa6</span><span class="s1">T</span><span class="se">\x00\x08\x06\x01\xd8</span><span class="s1">1 </span><span class="se">\x00\xc0\x0f\x00\n\x00\x00\xff\xff\x80\xfe</span><span class="s1">k</span><span class="se">\xff\xf5\xe2</span><span class="s1">u</span><span class="se">\x00\x18\x00</span><span class="s1">C</span><span class="se">\xdb</span><span class="s1">@</span><span class="se">\x80\x01</span><span class="s1"> </span><span class="se">\x0f\x80</span><span class="s1"> </span><span class="se">\x00\x00</span><span class="s1">?</span><span class="se">\xff</span><span class="s1">A</span><span class="se">\xcf</span><span class="s1">_</span><span class="se">\xf9\xff</span><span class="s1">d7</span><span class="se">\x00\x10\x00\x01\xf6\x00\x10\x04\x10\x0f</span><span class="s1">@</span><span class="se">\x08\x00\x00</span><span class="s1">?</span><span class="se">\xff\xa0\xe3\xdf\xfa\xef\xb0</span><span class="s1">.</span><span class="se">\x00\x10\x00</span><span class="s1">a</span><span class="se">\xfc\x02</span><span class="s1"> </span><span class="se">\x08\x10\x0f</span><span class="s1">@ </span><span class="se">\x00\x00</span><span class="s1">_</span><span class="se">\xff</span><span class="s1">@B?</span><span class="se">\x7f\xf7</span><span class="s1">`</span><span class="se">\x12\x80\x10\x00\xab\xd8\x01\x00\x10</span><span class="s1">(</span><span class="se">\x0f</span><span class="s1">@</span><span class="se">\x00\x00\x00\x03\xfd</span><span class="s1"> H=</span><span class="se">\xfe</span><span class="s1">g</span><span class="se">\x10\x05\x00</span><span class="s1">0</span><span class="se">\x7f\xff</span><span class="s1">Q@</span><span class="se">\x80\x00</span><span class="s1">,/ </span><span class="se">\x00\x00\x01\x07\xcb\xb5</span><span class="s1">`</span><span class="se">\x1f\xfb</span><span class="s1">j@</span><span class="se">\x00\x00\x10</span><span class="s1">?</span><span class="se">\xd7\xe0\x02\x00\x00\xb7\xff</span><span class="s1"> </span><span class="se">\x00\x00\x01</span><span class="s1">_</span><span class="se">\xbd</span><span class="s1">z1</span><span class="se">\x7f\xff\xdf</span><span class="s1">`</span><span class="se">\x00\x00</span><span class="s1">7</span><span class="se">\xdf</span><span class="s1">8</span><span class="se">\x90\x00\x90\x80\xdf\xff\x00\x00\x00\x00\xff\xff\xdc\xb5</span><span class="s1">_</span><span class="se">\xbc\xeb\xc0\x0f\x00\'\x83</span><span class="s1">@</span><span class="se">\x00\x00\x00\x10\x16\xdf\x00\x08\x00\x00</span><span class="s1">C</span><span class="se">\xc5\x8e\xbd\x7f\xf7\xff\xa0\'\x00</span><span class="s1">/</span><span class="se">\x07\xf1\x01\n\x08\x00\x05\xef\x10\x00\x00\x00\xa7\xfc</span><span class="s1">g</span><span class="se">\x8f\xf6\xf2\x7f\xc0</span><span class="s1">G</span><span class="se">\x00</span><span class="s1"> </span><span class="se">\x1f\xfc\x00</span><span class="s1">%</span><span class="se">\x00\x00\x00\x0f\x00\x00\x03\xc0\xc0\xed</span><span class="s1">;</span><span class="se">\xa7\xff</span><span class="s1">7</span><span class="se">\x0f\xc0</span><span class="s1">g@aG</span><span class="se">\xfe\x10</span><span class="s1">@</span><span class="se">\x82\x00\x00\x0f\x00\x00</span><span class="s1">/</span><span class="se">\xb0\xff\xae\xcf\x8b\xbb\xb1\xc7\xe0</span><span class="s1">?</span><span class="se">\x80</span><span class="s1"> ?</span><span class="se">\xcc</span><span class="s1">P</span><span class="se">\x1a</span><span class="s1">P</span><span class="se">\x00\x00\x1f</span><span class="s1">@</span><span class="se">\x00</span><span class="s1">g</span><span class="se">\xf3\xff\xff</span><span class="s1">RB</span><span class="se">\x1b\xd7\x82</span><span class="s1">@7</span><span class="se">\x00</span><span class="s1">h</span><span class="se">\x7f\xe6\x04\x81\x08\x00\x00</span><span class="s1">_</span><span class="se">\x00\x00</span><span class="s1">w</span><span class="se">\xe7\xfb\xdd\xa4\x00\x0f\xcb</span><span class="s1">R`</span><span class="se">\x00\x00</span><span class="s1">@?</span><span class="se">\xff\xba</span><span class="s1"> A</span><span class="se">\x19\xfa\xbf\x00\x00\xc7\xed</span><span class="s1">~</span><span class="se">\xa5\xf4\x00\x0e\xf9\xf2</span><span class="s1">@</span><span class="se">\x00\x00</span><span class="s1">@?</span><span class="se">\xfe\xc5\x03\xcb\x7f\xfe\xbf\x00\x0b\xe3\xe8\x7f\x92\xb8\x00</span><span class="s1">E</span><span class="se">\x7f\xf6</span><span class="s1"> </span><span class="se">\x00\x00</span><span class="s1">O</span><span class="se">\xff\xfb\x90\n\xc3\xff\xff\xff\x00\x07\xfd\xcc\x0f\xe4\xb8\x01</span><span class="s1">f</span><span class="se">\x05\xd6</span><span class="s1">`</span><span class="se">\x00\x00\x9f\xff\xfd</span><span class="s1">m</span><span class="se">\x17\xd7\xff\xff\xff\x00\x07\xff\x83\xd7\xf0</span><span class="s1">4!</span><span class="se">\x97\x80\x7f\xc0\x00\x00\x1f\xff\xea\xa4</span><span class="s1">G</span><span class="se">\xc7\xff\xff\x7f\x00\x0f\xeb\xd5\xff</span><span class="s1">p</span><span class="se">\n</span><span class="s1">!G </span><span class="se">\x1f\xe0\x00\x00</span><span class="s1">}</span><span class="se">\xff\xc9</span><span class="s1">X</span><span class="se">\xbf\xd7\xff\xff\xff\x00\x0f\xff\xfa\x99\xd0\t\x05</span><span class="s1">S</span><span class="se">\xc0\xc7\xc0\x00\x00\xcf\xfc\xca\xf9\xcf\xc7\xff\xff\xff\x00</span><span class="s1">?</span><span class="se">\xdf\xe0\x06\xe8\x00\x04\xa3\xb6\x1f\xc0\x00\x00\x9f\x10\xff\xf3\xff\xc7\xff\xff\xff\x00</span><span class="s1">?</span><span class="se">\n\x00\xbf\xfc\x00</span><span class="s1">@</span><span class="se">\xd1\xe9</span><span class="s1">S</span><span class="se">\xe0\x00\x00\xbf</span><span class="s1"> </span><span class="se">\xff\xf3\xff\x87\xff\xff\xff\x00\x00\x00\x0f\xff\xfc\x04\x10\xa9\xd6\xac</span><span class="s1">`</span><span class="se">\x00\x00</span><span class="s1">?B</span><span class="se">\x7f\xe7\xff\x87\xff\xff\xff\x00\x00\x01\x7f\xfd</span><span class="s1">&gt;</span><span class="se">\x00\x00\xc1\xfe\xe6</span><span class="s1">0</span><span class="se">\x00\x00\xbf</span><span class="s1">!</span><span class="se">\xff\xe7\xff\x97\xef\xff\xff\x00\x00\x1f\xff\xe0\x1e\x00\x82</span><span class="s1"> </span><span class="se">\xef\xbc</span><span class="s1">0</span><span class="se">\x00\x00\\\xa2\x7f\xe7\xff\x07\xcf\xff\xff\x00\x02\xff\xff\xa8\x9f\x00\x00\x01</span><span class="s1">#</span><span class="se">\xef\xf8\x00\x01</span><span class="s1">`</span><span class="se">\xe0\x7f\xf3\xff\x17\xdf\xff\xff\x00\xaf\xff\xea</span><span class="s1">U/</span><span class="se">\x00</span><span class="s1"> </span><span class="se">\x04\xaf\xb5\xbf\x00\x00\x10</span><span class="s1">d</span><span class="se">\xff\xe1\xff\x07\x9e</span><span class="s1">?</span><span class="se">\xff\x06\xff\xfe\xaa\x88\x9f\x82\x00\x07\xf3\xff\x0f\xc0\x00</span><span class="s1">L</span><span class="se">\xe4\xff\xe6</span><span class="s1">:</span><span class="se">\x83\x9c\x7f\xff</span><span class="s1">?</span><span class="se">\xff\xf9\x00</span><span class="s1">%O</span><span class="se">\x80\x82\x0b\xf5\xfe\x03\xe0\x00\x06</span><span class="s1">/</span><span class="se">\xff\x8e\x02\xa1\x00\xbf\xff\xff\xff\xf5</span><span class="s1">P</span><span class="se">\x00</span><span class="s1">/</span><span class="se">\x80\x00\x05\xf8\xfe\x03\xe0</span><span class="s1">@B-</span><span class="se">\xfe</span><span class="s1">q</span><span class="se">\xc9\xac</span><span class="s1">p</span><span class="se">\x7f\xff\xff\xff\xa9\x04\x80\x87\xc8\x00\x03\xf0</span><span class="s1">?</span><span class="se">\t\xa2\x00\x11\r\xee\xc0</span><span class="s1">9~x</span><span class="se">\xff\xff\xff\xda\xa4\xa2\x00\x0b\xc0\x00\x01\xfa\x15\x18</span><span class="s1">!@</span><span class="se">\x01\xc3\xcc</span><span class="s1">0yv</span><span class="se">\xb3\xff\xff\xfd</span><span class="s1">m)</span><span class="se">\x10</span><span class="s1">@</span><span class="se">\x07\xc0\x00\x00\xfc</span><span class="s1">!RA</span><span class="se">\x80\x00</span><span class="s1">r</span><span class="se">\x88\xc0\x10</span><span class="s1">B&gt;</span><span class="se">\xff\xcf\xf5\x15</span><span class="s1">B</span><span class="se">\x04\x08\x01</span><span class="s1">` </span><span class="se">\x03</span><span class="s1">&gt;</span><span class="se">\xb1\x87\xc2</span><span class="s1">@</span><span class="se">\x00</span><span class="s1">b</span><span class="se">\xf9\xff\xfd\x80\x1c\xff\xbf\xaa\xca</span><span class="s1">(Q</span><span class="se">\x00\x01</span><span class="s1">P</span><span class="se">\x00\x03\x8f\x90\xcd\x06\x80\x00</span><span class="s1"> </span><span class="se">\r\xf8</span><span class="s1"> </span><span class="se">\x01</span><span class="s1">@&lt;O</span><span class="se">\xaa\xa1</span><span class="s1">B</span><span class="se">\x00\x00\x01</span><span class="s1">`</span><span class="se">\x00\x03\xc7\xea\x18\n\x80\x00</span><span class="s1">4</span><span class="se">\xfd\x80\x03\x90\x03\x88\x9f\xd5</span><span class="s1">T</span><span class="se">\x08\x90\x00\x00\xb0</span><span class="s1">@</span><span class="se">\x07\xe7\xe4\xfd</span><span class="s1">E</span><span class="se">\x80\x00\x15\xbc\x1c\x12\xdc\x08</span><span class="s1">&gt;</span><span class="se">\xbf</span><span class="s1">UB</span><span class="se">\x80\x02\x00\x01</span><span class="s1">x</span><span class="se">\x00\x06\xf9\xf1</span><span class="s1">~</span><span class="se">\xb3\x00\x00\x01\xd8\xfe</span><span class="s1">_</span><span class="se">\xc8\x18\xc0\x7f\xaa\xa8\x00\x00\x00\x00\\\x00\n\xf8\xfc\xfe\xfa\x00\x00\x08\xfd\xfe\xff\xa0\x12\x00\x0f</span><span class="s1">T</span><span class="se">\x92\x10\x00\x00\x00</span><span class="s1"> </span><span class="se">\x00\x11\xfc</span><span class="s1">??l</span><span class="se">\x00\x00\x00\x07\xff\xee\xbc</span><span class="s1"> </span><span class="se">\x80\x1f\xa2</span><span class="s1">H</span><span class="se">\x80\x00\x00\x00\x1c\x00\x02\xfe\x8d\x7f\xf4\x00\x00\x06\xc9\xbf\xf6\x94\x10\x81\x1f\xad</span><span class="s1">"</span><span class="se">\x02\x00\x00\x00\x06\x00</span><span class="s1">&amp;~</span><span class="se">\xe0\xff\xf8\x00\x00\x02\xfe\xfe\xeb</span><span class="s1">h </span><span class="se">\x80\xaf\xb2\x08\x00</span><span class="s1">@</span><span class="se">\x00\x00\n\x00\x17\x7f\x82\xff\xf0\x00\x00\x02</span><span class="s1">~?</span><span class="se">\xea\xf8\x01\x00\x1f</span><span class="s1">I</span><span class="se">\x00\x00\x00\x00\x00\x07\x00</span><span class="s1">G</span><span class="se">\xff</span><span class="s1">{</span><span class="se">\xf3\xe0\x00\x00\x01</span><span class="s1">~</span><span class="se">\x04\xb5\xa8\x00\x80</span><span class="s1">O</span><span class="se">\xaa\xa9\x00\x00\x00\x00\x01\x80\'</span><span class="s1">g</span><span class="se">\xda</span><span class="s1">B</span><span class="se">\xda\x00\x04\x01</span><span class="s1">&gt;</span><span class="se">\x07\x1a\xa0\x01\x00</span><span class="s1">OTD</span><span class="se">\xa0\x00\x00\x00\x00\xa2\x0f\xf8\x80\x00</span><span class="s1">=@</span><span class="se">\x06\x00\x9f</span><span class="s1">O</span><span class="se">\x00\xa8\x02\x00\x8f\xad</span><span class="s1">U(</span><span class="se">\x00\x00\x00\x10</span><span class="s1">P</span><span class="se">\x8f\xbe</span><span class="s1"> </span><span class="se">\x88</span><span class="s1">}</span><span class="se">\x00\x02\x00\x8b\x06\x1e\x14\x00\x00\x0f</span><span class="s1">UT</span><span class="se">\x92\x00\x10\x00</span><span class="s1">HP</span><span class="se">\x9f\xbe\x04</span><span class="s1">q</span><span class="se">\xfe\x00\x04\x00\xf5\x06\xff\x8a\x14\x01\x8f\xb5</span><span class="s1">R</span><span class="se">\xa0</span><span class="s1"> </span><span class="se">\x00</span><span class="s1">* </span><span class="se">\x08\x9f\xae\x01\xc2\xfe\x80\x00\x00</span><span class="s1">_</span><span class="se">\xc1\xff\xf1\xb4\x01\x8f</span><span class="s1">T</span><span class="se">\x8a\t\x00\x00\x01\x15\x00</span><span class="s1">?</span><span class="se">\x9a\x0f\xf8\xfe\x00\x00\x00</span><span class="s1">/</span><span class="se">\xc1\xff\xfe\x07\xee\x0f\x95</span><span class="s1">QD</span><span class="se">\x00\x00\x08\x80\x80</span><span class="s1">?</span><span class="se">\xbd\x1e\xe6\x7f\x00\x00\x00</span><span class="s1">7</span><span class="se">\xe7\xff\xff\xf0\xfd</span><span class="s1">ORJ </span><span class="se">\x00\x00\x04</span><span class="s1">R</span><span class="se">\xa5</span><span class="s1">?</span><span class="se">\xe3\x0f\xe9\x15</span><span class="s1"> </span><span class="se">\x00\x00\x1f\xff\xff\xff\xfc</span><span class="s1">;</span><span class="se">\x9f\xa9</span><span class="s1">(</span><span class="se">\x00\x00\n</span><span class="s1">"</span><span class="se">\x02\x08\x1f\x96\xcd\xf8\x8a</span><span class="s1">@</span><span class="se">\x00\x00\x07\xff\xff\xff\xff\x82\xff</span><span class="s1">T</span><span class="se">\x80\x00\x04\x00</span><span class="s1">P</span><span class="se">\t</span><span class="s1">U&gt;</span><span class="se">\xe3\xf1\xf0</span><span class="s1">B</span><span class="se">\x00\x00\x00\x0b\xff\xff\xff\xff\xfc</span><span class="s1">o</span><span class="se">\x02</span><span class="s1"> </span><span class="se">\x00\x00\x10\x01</span><span class="s1">P</span><span class="se">\t\x1f\x17\xf9\x88</span><span class="s1">p</span><span class="se">\x00\x00\x00\x03\xff\xff\xff\xff\xff\xcf</span><span class="s1">T</span><span class="se">\x84\x00\x08\x00\x00</span><span class="s1">@H?V</span><span class="se">\xd0\x06</span><span class="s1">8</span><span class="se">\x00\x00\x00\x04</span><span class="s1">S</span><span class="se">\xff\xff\xff\xff\xff\x01\x10\x00\x00\x00\x00\x10</span><span class="s1">%</span><span class="se">\x1e</span><span class="s1">R</span><span class="se">\xa4\x01\x1e\x00\x00\x00\x04\x7f\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x80\x01\x11\x1f\xa9</span><span class="s1">u</span><span class="se">\x00\x9f\xc0\x00\x00\x00\xbf\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00</span><span class="s1">T</span><span class="se">\x00\x1f</span><span class="s1">*q</span><span class="se">\x00</span><span class="s1">F</span><span class="se">\x00\x00\x00\x03\xdf\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x08\xa0\x87</span><span class="s1">@a</span><span class="se">\x81\xb1\x00\x00\x00\x02\xab\xff\xff\xff\xff\xff\x10\x00\x02\x00\x00\x00\xa0\x00\x0f</span><span class="s1">A3</span><span class="se">\x83\x9d\x80\x00\x00\x02\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\x05</span><span class="s1">$</span><span class="se">\x00\x80\x00\x00</span><span class="s1">(@</span><span class="se">\x87\x00</span><span class="s1">1</span><span class="se">\x00\x8f\x00\x00\x00\x03\x08\x0f\xff\xff\xff\xff\x10\x00\x80\x00\x00\x00\x01\x06</span><span class="s1">G</span><span class="se">\xc0\x11\x00</span><span class="s1">O</span><span class="se">\x00\x00\x00\x02\xa4\x03\xff\xff\xff</span><span class="s1">/</span><span class="se">\x04\x90\x10\x01</span><span class="s1">@</span><span class="se">\x14\x10\x0e\x07\x80\x00\x00</span><span class="s1">?</span><span class="se">\x00\x00\x00\x02</span><span class="s1">J</span><span class="se">\x01\xff\xff\xfe</span><span class="s1">?</span><span class="se">\x91\x04\x00\x00\x00\x00\x04\n\x07\x00\x00\x00\x8a\x80\x00\x00\x02</span><span class="s1"> </span><span class="se">\x02\x1f\xff\xff\xff</span><span class="s1">JQ@</span><span class="se">\x00\x00\x00\x10\x1f</span><span class="s1">G</span><span class="se">\x00\x00\x00</span><span class="s1">o</span><span class="se">\x00\x00\x00\x02\xe0\x00\x1f\xff\xff\xff\xa0\x88\x00\x00\x08\x04</span><span class="s1">A</span><span class="se">\x1e\x07\x00\x00\x00</span><span class="s1">5</span><span class="se">\x80\x00\x00\x03\x18\x00\x03\xff\xff\xff</span><span class="s1">zU</span><span class="se">\x00\x00\x00\x00\x10</span><span class="s1">&gt;O</span><span class="se">\x00</span><span class="s1">!</span><span class="se">\x00\x1e</span><span class="s1">@</span><span class="se">\x00\x00\x07\x84\x00\x00\x03\xff\xff\xa9\x04</span><span class="s1"> </span><span class="se">\x00\x00\x01\x00</span><span class="s1">~</span><span class="se">\x07\x00\x80\x00\x0b\x00\x00\x00\x03</span><span class="s1">c</span><span class="se">\x00\x00\x03\xff\xff</span><span class="s1">n</span><span class="se">\x95\x00\x00\x00\x01\x00</span><span class="s1">~O</span><span class="se">\x00\x00\x00\x15\x00\x00\x00\x07\xa9\xe2\x00\x03\xff\xff\xf5</span><span class="s1">B</span><span class="se">\x80\x00\x00\x00\x84\x7f</span><span class="s1">N</span><span class="se">\x04\x00</span><span class="s1">h</span><span class="se">\x1e\x80\x00\x00\x07\xf0\xf2</span><span class="s1">`Q</span><span class="se">\xf0</span><span class="s1">o</span><span class="se">\xcb\xa8\x90\x00\x00\x00</span><span class="s1">@&gt;</span><span class="se">\x0e\x00\x00\x0e</span><span class="s1">n</span><span class="se">\xc0\x00\x00\x06\xbf\xbd</span><span class="s1">-T </span><span class="se">\x0f\xf2\xea</span><span class="s1">B</span><span class="se">\x00\x00</span><span class="s1">@ </span><span class="se">\x13\x1c\x00\x00\x0f</span><span class="s1">7 </span><span class="se">\x00\x00\x0f\xfd</span><span class="s1">~</span><span class="se">\xd0\t</span><span class="s1">@</span><span class="se">\x0f\xf1\xb4\x90\x00\x00\x00\x10</span><span class="s1">,</span><span class="se">\x0e\x04\x00\x1f\x8d\x80\x00\x00\x0e\xaa</span><span class="s1">?</span><span class="se">\xea\xa2</span><span class="s1">(</span><span class="se">\x0f\xfe\xf9\x08\x00\x00\x08\x08\x10\x1f\x00\x00\x0f\xe8\x00\x00\x00\x15</span><span class="s1">X</span><span class="se">\x8f\xea\x08</span><span class="s1">@</span><span class="se">\x0f\xff</span><span class="s1">*@</span><span class="se">\x00\x01\x00\x02</span><span class="s1">!</span><span class="se">\x1e</span><span class="s1">@</span><span class="se">\x00\x0f\xb4\x00\x00\x00\x14\x80\x0f\xf4\x01\x10\x0f\xf7\xdd\x80\x00\x00\x00</span><span class="s1">@</span><span class="se">\x10\x1a\x02\x00\x0f</span><span class="s1">;</span><span class="se">\x80\x00\x00\x00\x01\xe2</span><span class="s1">PL</span><span class="se">\x00\x0f\xb5\xe6\xa0\x00\x00\x15\n</span><span class="s1">*</span><span class="se">\x1d\x00\x00\x17\x00</span><span class="s1">@</span><span class="se">\x00\x00\x00</span><span class="s1">&gt;</span><span class="se">\x80\n\x80\x08\x0f\xff\xfb\xa8\x02\x00\x08\x01\n\x9c\x82\x00\x0e</span><span class="s1">7</span><span class="se">\xe0\x00\x00\x00</span><span class="s1">`</span><span class="se">\x00\x06</span><span class="s1">@</span><span class="se">\x02</span><span class="s1">/</span><span class="se">\xee\xbd\xb0\x02\x00</span><span class="s1">P</span><span class="se">\x92\x00\x0f\x00\x00\x14</span><span class="s1">Z</span><span class="se">\xa0\x00\x00\x01\xc0\x10\x01</span><span class="s1">6</span><span class="se">\xa1</span><span class="s1">_</span><span class="se">\xbc\x01\x08\x05\xc1\x00\t\x80\x0e\x80\x00</span><span class="s1">BO</span><span class="se">\xd0\x00\x00\x07\xa0\x05\x00\xa9</span><span class="s1">T</span><span class="se">\xbf\x1f\xff</span><span class="s1">4</span><span class="se">\x15\xe8\x15\'</span><span class="s1">D</span><span class="se">\x03\x80\x00\x08\x8d</span><span class="s1">0</span><span class="se">\x00\x00\x1d\x80\x05</span><span class="s1">P[</span><span class="se">\xaa\xaf\xfc\x07\x8a\x14\xb5</span><span class="s1">@</span><span class="se">\x93\xc1</span><span class="s1">1</span><span class="se">\xc0\x00</span><span class="s1">"</span><span class="se">\x00\x88\x00\x00\xf0\x00\x03\xe4\xaf\xd7\x7f</span><span class="s1">=</span><span class="se">\xff\xdc\x07</span><span class="s1">|</span><span class="se">\x04\x05</span><span class="s1">@</span><span class="se">\x07\xc0\x00\x00\x00\x00\x00\x03\xea\xb0\x05\xf3</span><span class="s1">o{</span><span class="se">\xff\xff\x90</span><span class="s1">&gt;</span><span class="se">\x07\xaf</span><span class="s1">QC</span><span class="se">\x83\x03\xc0\x00</span><span class="s1">0</span><span class="se">\x04</span><span class="s1"> </span><span class="se">\x00\x06\t\x08\x03</span><span class="s1">~</span><span class="se">\xb7\xff\xff\x83\xff\xc3\x81\xff\xa0\x02\x04</span><span class="s1">!</span><span class="se">\xe0\x01\x02</span><span class="s1">{</span><span class="se">\xc0\x00\x08\x05</span><span class="s1">L</span><span class="se">\x01\xfd\xdb\xfb\xff</span><span class="s1">&gt;</span><span class="se">\x01\x1c</span><span class="s1">@</span><span class="se">\xff\xc0\x05\x86\x01\xe0\x00</span><span class="s1">!</span><span class="se">\xad\xc0\x00\n\x11</span><span class="s1">#</span><span class="se">\xa8\x0f\xef\xff\xff\xe7</span><span class="s1">j</span><span class="se">\xff\xa0\xff\xf0\x01</span><span class="s1">E!</span><span class="se">\xf0\x00\x81</span><span class="s1">^</span><span class="se">\x80\x00\x08</span><span class="s1">J</span><span class="se">\xdd\xdc\x9f\xff\xff\xff\xfd</span><span class="s1">-</span><span class="se">\x80\x08\x7f\xf8\x01\n\x00\xf8\x00\x01\xf7</span><span class="s1">@</span><span class="se">\x00\x0c</span><span class="s1">?~</span><span class="se">\xf7\xff\xff\xfd\x7f</span><span class="s1">-</span><span class="se">\xe0\xff\xfe\x9f\xf9\xfc\x8f\x03\xf0\x00\x03\xdf\x80\x00\x0e</span><span class="s1">/</span><span class="se">\xff\xda\xff\xaf\xff\xff\xc1\xff\xff\xff\x07\xfb\xf8\xc5\x07\xf0\x00\x01\xff\xc0\x00\x06\x9f\xff\xff\xfd\xfe\xbb\xef\xfb\xff\xff\xff\xcb\xf3\xdc\x87\x0f\xb0\x00\x03\xff\x80\x00\x07\xcf\xbb\xff\xfd\xbf\xfd\xbf\xff\xff\xff\xfc\xf5\xce</span><span class="s1">6E</span><span class="se">\x83\xf0\x00\x01</span><span class="s1">{</span><span class="se">\xc0\x00\x03\xf7\xff\xff\xff\xf6\xf6\xff\xfe\x7f\xff\xfc</span><span class="s1">x</span><span class="se">\x08\x06\x07</span><span class="s1">O</span><span class="se">\xd0\x00\x01</span><span class="s1">+ </span><span class="se">\x00\x03\xff\xfa\xf7</span><span class="s1">_</span><span class="se">\xdd\xbf\xff\xff\xff\xff\xff\xfc</span><span class="s1">8</span><span class="se">\x06</span><span class="s1">E</span><span class="se">\x8b\xc0\x00\x02</span><span class="s1">[</span><span class="se">\x90\x00\x02\xea\xd6\x9a\xed\xae</span><span class="s1">]</span><span class="se">\x7f\xff\xff\xff\xff\xff</span><span class="s1">:</span><span class="se">\xbc\x0b\x97\x80\x00\x00\x7f\xa0\x00\x03\x00\x00\x0b\xfe\xab\xef\xbf\xff\xaf\xff\xff\xff\x97\xe0\x05\x87\x80\x00\x04\xdf\x80\x00\x00\x00\x00\x10\xaf\xb6\xaf\xdf\xff\xe7\xff\xff\xff\xc0\x00\x83\x87\x80\x18\x04\xff\x80\x00\x00\x00\x00\x00</span><span class="s1">U</span><span class="se">\xdf\xff</span><span class="s1">_</span><span class="se">\xbf\xff\xff\xff\xff\xe0\x00\x03\x0f\xc0\x08\r\xff\xa0\x00\x00\x00\x00\x00\x0f\xef\xd5\x7f\x7f\xfb\xff\xff\xff\xf0</span><span class="s1">6</span><span class="se">\x01\xc7\x80\r\xc9\xff</span><span class="s1">@</span><span class="se">\x00\x00\x00\x00\x00\x07\xd2\xb5\x9f</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="n">img_red</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="sa">b</span><span class="s1">'</span><span class="se">\x00\x00\x00\x00\x00\xff\xfe\x0f\xfd\xff\xff\xfe\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x7f\xfc\x03\xfd\xff\xff\xfe\x1f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00</span><span class="s1">=</span><span class="se">\xfe\x00\xaf\xff\xff\xfe\x0f\xfe\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x06\x08\x00\x07\xff\xff\xff\x0f\xf8\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xf7\xff\x9f\xe0\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x06\x0f\xff\xfe\xff\x9f\xe0\x1f\xff\xff\xff\xff\xff\xff\xff\xdf\x00\x00\x00\x00\x00\x00\x00\x05</span><span class="s1">.</span><span class="se">\xff\xff\xff\xc7\xc0\x1f\xff\xff\xff\xff\xff\xff\xff\xaf\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">O</span><span class="se">\xff\xff\xff\xff\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xdf\x00\x00\x00\x00\x00\x00\x00\x00\x07\xff\x7f\xbf\xfe\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xef\x00\x00\x00\x00\x00\x00\x00\x00\x07\xe2\xe5\xff\xec\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe3\xf6\xff\xf8\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\xef\xff\xf8\x00\x07\xf5\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x9f</span><span class="s1">o</span><span class="se">\xf0\x00\x03\xfb\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x15\xe3\xe0\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03</span><span class="s1">{</span><span class="se">\x00\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x02</span><span class="s1">&gt;@</span><span class="se">\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">A</span><span class="se">\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xbf\x00\x00\x00\x00\x00\x00\x00\x00\x10\x00\x00\x00\x00\x00\x07\xff\xff\xff\xff\xff\xfe\xfd\xff\x00\x00\x00\x00\x00\x00\x00\x00\x10\x00\x00\x00\x00\x00\x03\xff\xff\xff\xdf\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00</span><span class="s1">p@</span><span class="se">\xae\x00\x08\x00\x00\x00\x02\xff\xff\xff\xdf\xff\xff\xff\xff\x00\x00\x00\x00\x00\x07\xf8</span><span class="s1">%</span><span class="se">\x7f\x80</span><span class="s1">$</span><span class="se">\x18\x00\x00\x06\xff\xff\xff\xff\xff\xff</span><span class="s1">u</span><span class="se">\xff\x00\x00\x00\x00\x00\x0f\xfc</span><span class="s1">9</span><span class="se">\xff\x00\x02</span><span class="s1">H</span><span class="se">\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x1f\xfc\x14</span><span class="s1">?</span><span class="se">\x80\n\xa8\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xaf\x00\x00\x00\x00\x00\x15</span><span class="s1">|</span><span class="se">\x0c\x0f\x80\x17</span><span class="s1">@</span><span class="se">\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff</span><span class="s1">_</span><span class="se">\x00\x00\x00\x00\x00\x00</span><span class="s1">|</span><span class="se">\x0e\x0f\x00\n\x00\x00\x00\x03\xff\xff\xff\xff\xff\xfe\xff\xbf\x00\x00\x00\x00\x00</span><span class="s1">@</span><span class="se">\xfc\x06\x01\x00\n\x00\x00\x00\x01\xff\xff\xff\xff\xff\xff\xdf\xff\x00\x00\x00\x00\x00\xfe\xfa</span><span class="s1">#</span><span class="se">\x00\x00\x04\x00\x00\x00\x03\xdf\xff\xff\xff\xff\xfd</span><span class="s1">J</span><span class="se">\xff\x00\x00\x00\x00\x00\xbf\xfc\x10\x01\x80\x0e\x00\x00\x00\x01\xff\xff\xff\xff\xff\xfa\x93\xff\x00\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xfe\x04\x01\x80\x08\x00\x00\x00\x03\xff\xfe\x7f\xff\xff\xe0</span><span class="s1">G</span><span class="se">\xff\x00\x00\x00\x00\x00\x0f\xfe</span><span class="s1">@</span><span class="se">\x0f\x80\x04\x00\x00\x00\x03\xff\xfe\x0f\xff\xff\xfa\xff\xaf\x00\x00\x00\x00\x00\x03\xff</span><span class="s1">@</span><span class="se">\x03\x80\x00\x00\x00\x00\x03\xff\xff\x07\xff\xff\xfd\xfc\x1f\x00\x00\x00\x00\x00\x03\xff\x00\x01\x00\x00\x00\x00\x00\x07\xff\xfe\x03\xff\xff\xff\xf5\xff\x00\x00\x00\x00\x00\x00\xfe\x80\x00\x00\x00\x00\x00\x00\x07\xff\xfe\x00\xff\xff\xff\xd7\xff\x00\x00\x00\x00\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x07\xff\xfe\x00\xff\xff\xff</span><span class="s1">?</span><span class="se">\xff\x00\x00\x00\x00\x00\x00\x7f\x00\x00\x00\x02\x00\x00\x00\x07\xff\xbc\x00\xff\xff\xfe\xdf\xff\x00\x00\x00\x00\x00\x00\xbe\x00\x00\x06\x00\x00\x00\x00\x0f\xff\xfe\x01\xff\xff\xfb\xef\xff\x00\x00\x00\x00\x00\x00</span><span class="s1">_</span><span class="se">\x00\x00\x05\x00\x00\x00\x00\x0f\xff\x9e\x03\xfd\xff\xf7\xef\xff\x00\x00\x00\x00\x00\x00\xbf\x80\x00\x80\x00\x00\x00\x00\x0f\xff</span><span class="s1">T</span><span class="se">\x07\xfe\xff\xef\xd7\xff\x00\x00\x00\x00\x00\x02\xdf\x80\x02\x01\x80\x00\x00\x00\x0f\x80\x00\x0f\xff\x7f\xff\xd3\xdf\x00\x00\x00\x00\x00</span><span class="s1">4J</span><span class="se">\x80\x00\x00\x80\x00\x00\x00\x0f\xc0\x00\x1f\xfd\xff\xff</span><span class="s1">H</span><span class="se">\x0f\x00\x00\x00\x00\x00</span><span class="s1">B</span><span class="se">\x85\xc0\x00\x00\x00\x00\x00\x00\x0f\xe0\xc7\x7f\xff\x7f\x7f</span><span class="s1"> </span><span class="se">\x0f\x00\x00\x00\x00\x00\x00\x03</span><span class="s1">@</span><span class="se">\x00\x00\x00\x00\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xe9</span><span class="s1">/</span><span class="se">\x00\x00\x00\x00\x00\x02\x01</span><span class="s1">@</span><span class="se">\x00\x08\x00\x00\x00\x00\x1f\xff\xff\xfe\xff\xff\xff\xfa\x1f\x00\x00\x00\x00\x00\x03\x80</span><span class="s1">p</span><span class="se">\x01</span><span class="s1">?</span><span class="se">\x80\x00\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x02\xc0</span><span class="s1">X</span><span class="se">\x00\xfb\xf0\x00\x00\x00\x1f\xff\xff\xef\xff\xfd\xff\xff\xff\x00\x00\x00</span><span class="s1">@</span><span class="se">\x00\x01</span><span class="s1">0t@{</span><span class="se">\xb8\x00\x00\x00\x1f\xff\xff\xaf\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\xad\xbd\xe0</span><span class="s1">;</span><span class="se">\xfd\x80\x00\x00\x17\xff\xff\xff\xff\xf7\xff\xff\xff\x00\x00\x00\x00\x04</span><span class="s1">"[</span><span class="se">\xff\xf0</span><span class="s1">?</span><span class="se">\xbd\x80\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x02\x81</span><span class="s1">Z</span><span class="se">\x0b\xff\xf0\x07</span><span class="s1">=</span><span class="se">\x80\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xf7\xff\xff\xff\x00\x00\x00\x07\x80</span><span class="s1">mG</span><span class="se">\xff\xf8\x00</span><span class="s1">9</span><span class="se">\xc0\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x03\xf0\x1b</span><span class="s1">G</span><span class="se">\xff\xf8\x00</span><span class="s1">)</span><span class="se">\x80\x00\x00\x7f\xff\xff\xff\xff\xef\xff\xff\xff\x00\x00\x00\x00</span><span class="s1">(</span><span class="se">\x0f\xcb\xff\xf8\x00\x00\x00\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x14\x00\x00\x0f\xf5\xff\xf8\x00\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xef\xff\xff\xff\x00\x00\x00\x00\x00\x0f\xf6\xff\xfc\x00\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x07\xff\xff\xfc\x00\x00\x00\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x03\xff\xbf\xfe\x00\x00\x00\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x03\xff\xef\xfe\x00\x03\x80\x00\x00\xff\xfd\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x02\xc1\xff\xff\xfe\x00\x01\xc0\x00\x00\x7f\xfe\xff\xff\xff\xef\xff\xff\xff\x00\x00\x00\x00\x1f\xe1\xff\xfd\xff\x10\x03\xc0\x00\x00</span><span class="s1">?</span><span class="se">\xfd\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00</span><span class="s1">W`</span><span class="se">\xff\xff\xfe\xdc\x00\x00\x00\x00\x1f\xff\xff\xff\xff\xef\xff\xff\xff\x00\x00\x00\x15\xaa\xd0\xff\xff\xfb</span><span class="s1">P</span><span class="se">\x00</span><span class="s1">@</span><span class="se">\x00\x00\x0f\xfb\xff\xff\xff\xff\xff\xff\xff\x00\x00\x01</span><span class="s1">Uw`</span><span class="se">\x7f\xff\xf8\x0c\x00\xf0\x00\x00\x03\xfb\xff\xf9\xff\x7f\xff\xbf\xff\x00\x00\x06\xff\xda\xb0\x7f\xff\xf4\n\x01\xfc\x00\x00\x01\xf1\xff\xf1\xff\x7f\xff\x7f\xff\x00\x00\n\xaf\xff\xd0\x7f\xff\xfa\x07\x01\xfc\x00\x00\x01\xf3\xff\xfe</span><span class="s1">&gt;s</span><span class="se">\x8f\xff\xff\x00\x00</span><span class="s1">V</span><span class="se">\xfb\x7f</span><span class="s1">x?</span><span class="se">\xff\xfc\x0f\xc1\xfe</span><span class="s1">@</span><span class="se">\x00\x00\xf3\xff\xff\xfe\xf1\x87\xff\xff\x00</span><span class="s1">%[]</span><span class="se">\xff\xf4</span><span class="s1">?</span><span class="se">\xff\xfe\x05\xeb\xff\xc0\x00\x00</span><span class="s1">?</span><span class="se">\xff\xcf\xfe\xf9\xcf\xff\xff\x02\x92\xd6\xef\xbf\xf8</span><span class="s1">?</span><span class="se">\xff\xff\x03\xdf\xfd\x80\x00\x00\x0f\xff\xff\xff\xfd\xff\xff\xff\n\xea\xbd\xfb\xf7\xfe\x9f\xff\xff\xc1</span><span class="s1">O</span><span class="se">\xf8\x00\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xcf</span><span class="s1">U5</span><span class="se">\xd7\xae\xff\xfe\xaf\xff\xff\xf0</span><span class="s1">o</span><span class="se">\xf0\x00\x00\x00\x1f\xf3\xff\xff\xff\xff\xff\xbf</span><span class="s1">U^</span><span class="se">\xbd\xff\xff\xfe\x9f\xff\xff\xf8\x17\xe0\x00\x00\x00\x0b\x03\xff\xfc</span><span class="s1">o</span><span class="se">\xff\xff\x7f</span><span class="s1">*</span><span class="se">\xab\xf7</span><span class="s1">o</span><span class="se">\xff\xff</span><span class="s1">O</span><span class="se">\xff\xff\xf8\x1b\x00\x00\x00\x00\n\x03\xe3\xed</span><span class="s1">#</span><span class="se">\xf7\xff\xff\xaa\xbd\x7f\xfd\xff\xfe\x87\xff\xff\xfe\x0e\x80\x00\x00\x00\x0e\x07\x01\xa0</span><span class="s1">7</span><span class="se">\xe7</span><span class="s1">?</span><span class="se">\xff</span><span class="s1">UW</span><span class="se">\xff\xff\xff\xff\xa3\xff\xff\xff\x03\x00\x00\x00\x00\x07\x02\x01\x00</span><span class="s1">_</span><span class="se">\xef\xff\xff\xab</span><span class="s1">m</span><span class="se">\xef\xff\xff\xff\xdf\xff\xff\xff\xc0\xc0\x00\x00\x00\x07\xf8\x00\x11</span><span class="s1">C</span><span class="se">\xdf\x7f\xef</span><span class="s1">]</span><span class="se">\xb7\x7f\xff\xff\xff\xe3\xff\xfd\xff\xf2\x80\x00\x00\x00\x01\xfe\x00\t</span><span class="s1">k</span><span class="se">\xef\x7f\xef</span><span class="s1">R</span><span class="se">\xdd\xfd\xff\xff\xff\xf9\xff\xf9\xff\xff\x00\x00\x00\x00\x01\xff\x00\x14\x97\xdf\x7f\xdf</span><span class="s1">M</span><span class="se">\xf7\xff\xbf\xff\xff\xf5\xff\xf8\xff</span><span class="s1">}</span><span class="se">\x00\x00\x00\x00\x01\xff\xc0\x15\x07\xfe\xff\xef\xb6\xff\xff\xff\xff\xff\xf8\xff\xf8</span><span class="s1">?</span><span class="se">\x84\x0c\x00\x00\x00\x00\xff\xfb</span><span class="s1">JW</span><span class="se">\xff\x7f\xbf</span><span class="s1">UV</span><span class="se">\xff\xff\xff\xff\xfe\x7f\xf8\x1f\xa5\xbc\x00\x00\x00\x00\xff\xff\xe5</span><span class="s1">_</span><span class="se">\xfe\xff\xbf\xab\xbb</span><span class="s1">_</span><span class="se">\xff\xff\xff\xff</span><span class="s1">_</span><span class="se">\xf0\x07\xff\xfc\x00\x00\x00\x00\x7f\xbf\xff</span><span class="s1">W</span><span class="se">\xfd\xff\x7f</span><span class="s1">R</span><span class="se">\xaa\xd7\xff\xff\xff\xff\xaf\xf0\x01\xdf\xf0\x00\x00\x00\x00\x7f\xff\xff\xeb\xff\xff\xff\xaa\xab</span><span class="s1">m</span><span class="se">\xff\xff\xff\xff\xaf\xe0\x01\xff\x80\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xf5\xeb\xfe\x7f</span><span class="s1">J</span><span class="se">\xad</span><span class="s1">_</span><span class="se">\xdf\xff\xff\xff\xf7\xe0\x01\xfe\x00\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xfe</span><span class="s1">K</span><span class="se">\xfe\x7f\xab</span><span class="s1">u</span><span class="se">\xf6\xff\xff\xff\xff\xff\xc0\x01\xf0\x00\x00\x00\x00\x00\x1f\xff\xff\xff\xf8\x11\xff</span><span class="s1">j</span><span class="se">\xae\xbb\xff\xff\xff\xff\xff\xc0\x00\xe1\x08\x00\x00\x00\x00\x0f\xff\xff\xff\xff\x02\xbf\xad\xb5\xdf\xff\xff\xff\xff\xff\xc0\x00\xf0\x06\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xc0</span><span class="s1">oV</span><span class="se">\xd7\xff\xff\xff\xff\xff\xff\xe0\x00</span><span class="s1">2</span><span class="se">\x07\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xfc\x0f\xab\x7f\xff\xff\xff\xff\xff\xff\xc0\x00\x0e\x0f\x80\x00\x00\x00\x07\xff\xff\xff\xff\xff\x8f\xfd\xdf\xff\xff\xff\xff\xff\xff\xe0\x00\x06\x07\x80\x00\x00\x00\x07\xff\xff\xff\xff\xff\xff\xab</span><span class="s1">{</span><span class="se">\xff\xff\xff\xff\xff\xff\xc0\x00\x0c\x01\xc0\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xfe\xef\xff\xff\xff\xff\xff\xff\xe0\x00\x18\x00\xe0\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe0\x00\x18\x00</span><span class="s1">`</span><span class="se">\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe0\x00\x1c\x00</span><span class="s1">9</span><span class="se">\xc0\x00\x00\x01\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf8\x00\x1c\x00\x0f\x80\x00\x00\x01\xff\xff\xff\xff\xff\xff\xef\xff\xff\xff\xff\xff\xff\xff\xf0\x00\x0c\x00\x02\x00\x00\x00\x01\xff\xff\xff\xff\xff\xff\xfa\xdb\xff\xff\xff\xff\xff\xff\xf8\x00\x0e\x00\x00\x00\x00\x00\x00\xf7\xff\xff\xff\xff\xff\xef\xff\x7f\xff\xff\xff\xff\xf9\xf8\x00\x00\x00\x00\x00\x00\x00\x01</span><span class="s1">[</span><span class="se">\xff\xff\xff\xff\xff\xfb</span><span class="s1">o</span><span class="se">\xef\xff\xff\xff\xff\xf1\xf8\x00\x00\x00\x00\x00\x00\x00\x01\xb5\xff\xff\xff\xff\xff</span><span class="s1">n</span><span class="se">\xfb\xff\xff\xff\xff\xff\xf1\xf8\x00\x00\x00\x00\x00\x00\x00\x01\xdf\xff\xff\xff\xff\xff\xb5\xae\xbf\xff\xff\xff\xff\xe0\xf8\x00\x00\x00\x00\x00\x00\x00\x01\x1f\xff\xff\xff\xff\xff</span><span class="s1">_w</span><span class="se">\xff\xff\xff\xff\xff\xe1\xf8\x00\x00\x00\x00\x00\x00\x00\x00\xe7\xff\xff\xff\xff\xff\x85\xaa\xff\xff\xff\xff\xff\xc1\xf0\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">{</span><span class="se">\xff\xff\xff\xff\xff</span><span class="s1">V</span><span class="se">\xfb\xdf\xff\xff\xff\xff\x81\xf8\x00\x00\x00\x00\x00\x00\x00\x00\x9c\xff\xff\xff\xff\xff\x91</span><span class="s1">j</span><span class="se">\xff\xff\xff\xff\xff\x81\xf0\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">V</span><span class="se">\x1d\xff\xff\xff\xff\n\xbd\x7f\xff\xff\xff\xff\x80\xf0\x00\x00\x00\x00\x00\x00\x00\x00\x0f\r\x9f\xaf\xff\xff\x04</span><span class="s1">Wo</span><span class="se">\xff\xff\xff\xff\xc1\xf0\x00\x00\x00\x00\x00\x00\x00\x01</span><span class="s1">@B</span><span class="se">\xd2\xab\xff\xff\x01\x15\xbd\xff\xff\xff\xff\xec\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01</span><span class="s1">/</span><span class="se">\xf6\xbf\xff\x00</span><span class="s1">Ko</span><span class="se">\xff\xff\xff\xff\xd3\xf0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x15</span><span class="s1">]</span><span class="se">\xd7\xff\x00\x06\xf7\xff\xff\xff\xff\xef\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x15\xf7\xbf\xff\x00\x15\xbf\xff\xff\xff\xff\xde\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0b\xfe\xef\xff\x08\x02\x7f\xff\xff\xff\xff\xef\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1d\xaf\xb3\xff\xff</span><span class="s1">J</span><span class="se">\x01</span><span class="s1">_</span><span class="se">\xff\xff\xff\xff\xd5\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x01\x7f\xf5\x7f\xf7\xff\x00\x00</span><span class="s1">W</span><span class="se">\xff\xff\xff\xff\xf5</span><span class="s1">`</span><span class="se">\x00\x00\x00\x00\x00\x00\x00\x00\x1f\xff\xf9\xbf\xfd\xdf\x11</span><span class="s1">@O</span><span class="se">\xff\xff\xff\xff\xff\xf0\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xef\xfe\xc9</span><span class="s1">^</span><span class="se">\xaf</span><span class="s1">C</span><span class="se">\xff\xf7\xff\xff\xff\xff\xff\xf0\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">_</span><span class="se">\xfa\xff</span><span class="s1">V</span><span class="se">\xab</span><span class="s1">O</span><span class="se">\xff\xff\xcb\xff\xff\xff\xff\xfb\xfc\x00\x00\x00\x00\x00\x00\x00\x02\x7f\xfa\xaf\xa4</span><span class="s1">U_</span><span class="se">\xff\xf8\x05\xff\xff\xff\xff\xfe\xfe\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xfc\x1b</span><span class="s1">P(</span><span class="se">\x8f\xc2\x00\x03\xff\xff\xff\xff\xff\xf8\x00\x00\x00\x00\x00\x00\x00\x15</span><span class="s1">O</span><span class="se">\xfa\x0c\x90\x84\x0f\x00</span><span class="s1">o</span><span class="se">\xff\xff\xff\xff\xff\xfc\xfc\x00\x00\x00\x00\x00\x00\x01\xf6\xf7\xfc\x81</span><span class="s1">H</span><span class="se">\x00\x0f\x7f\xff\xfc\x7f\xff\xff\xff\xfb\xfe\x00\x00\x00\x00\x00\x00\x07\xfa\xb3\xfe\x02</span><span class="s1">$</span><span class="se">\x04\x0f\xff\xfe\xe0</span><span class="s1">?</span><span class="se">\xff\xff\xff\xf9\xfe\x00\x00\x00\x00\x00\x00\x05\xee\xdc</span><span class="s1">W</span><span class="se">\xf0\x10\x00\x0f\x18\x95\x00\x1f\xff\xff\xff\xfa\xfe\x00\x00\x00\x00\x00\x00\x07\xb5</span><span class="s1">"#`</span><span class="se">\x00\x00\x0f\x02\xd2\x7f\xff\xff\xff\xff\xf5\xff\x00\x00\x00\x00\x00\x00\x03\xc0\x81\x08\x00\x00\x00\x0f\xd2\x1f\xff\xff\xff\xfe\x03\xf0\xfc\x00\x00\x00\x00\x00\x00\x01\xd0\x00</span><span class="s1">%</span><span class="se">\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xfc\x07\xfa\xf8\x00\x00\x00\x00\x00\x00\x01</span><span class="s1">`</span><span class="se">\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xfc\x03\xf8\xf0\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">0@</span><span class="se">\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xf0\x01\xfa</span><span class="s1">|</span><span class="se">\x00\x00\x00\x84\x00\x00\x00\x08\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xf0\x01\xf8\xb0\x00\x00\x00\xd4\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xc0\x01\xfa</span><span class="s1">t</span><span class="se">\x00\x00\x01\xa4\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xc0\x03\xf4</span><span class="s1">h</span><span class="se">\x00\x00\x03\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xe8\x1f\xfa</span><span class="s1">x</span><span class="se">\x00\x00\x03</span><span class="s1"> </span><span class="se">\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xfc</span><span class="s1">x</span><span class="se">\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xfc\xf0\x00\x00\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">*</span><span class="se">\x8f\xff\xff\xff\xff\xff\xff\xc9\xfe</span><span class="s1">8</span><span class="se">\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">-Jo'</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>IMG_0182_gs.py</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="n">width</span> <span class="o">=</span> <span class="mi">184</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="n">height</span> <span class="o">=</span> <span class="mi">135</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="n">img_bw</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="sa">b</span><span class="s1">'</span><span class="se">\x00\x00\x00\x00\xff\x7f\x01\xf0\x02</span><span class="s1">x</span><span class="se">\x10\x01\xbf\xfc\x0f\x18\x00\x0c\x02\'\xc3\x10\x0f\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xbc\x01\xfc\x00</span><span class="s1">x</span><span class="se">\x00\x01\xcf\xf0\x02\x18\x00\x1e\x00\x07\x83\x00\x0f\x00\x00\x00\x00\x0f\xc0\x03\xff\x00</span><span class="s1">p</span><span class="se">\x00</span><span class="s1">!</span><span class="se">\xf0\xe3\xe0\x1c\x00\x00\x00\x1f\x82\x00\x0f\x00\x00\x00\x00\x0f\xf9\xf1\xff\xf8</span><span class="s1">p</span><span class="se">\x00</span><span class="s1"> </span><span class="se">\xe0</span><span class="s1">f ?</span><span class="se">\x80\x00\x00\x00\x00\x00\x0f\x00\x00\x00\x00\x00\xff\xff\xff\xf0</span><span class="s1">s</span><span class="se">\x80\x00</span><span class="s1">a</span><span class="se">\xff\x00\x7f\xc1</span><span class="s1"> </span><span class="se">\x0e\x00\x00\x00\x0f\x80\x00\x00\x00\x00\x07\xf3\xf8\xf0</span><span class="s1">g</span><span class="se">\x80\x00</span><span class="s1">p</span><span class="se">\xdf\xad\xff\xf1</span><span class="s1">`</span><span class="se">\x1f\xc0\x00\x00\x0f\x00\x00\x00\x00\x00\x03\x81\xfb\xf1</span><span class="s1">o</span><span class="se">\x80\x00</span><span class="s1">8?</span><span class="se">\xad\xfc\xfc</span><span class="s1">0_</span><span class="se">\xe0</span><span class="s1">!</span><span class="se">\x00\x1f\x00\x00\x00\x00\x00</span><span class="s1">a</span><span class="se">\xc3\xcf\xb0\x7f\x00\x00\x00\xff\x8f\xe0</span><span class="s1">?</span><span class="se">\x1a\x0f\xe0</span><span class="s1">V</span><span class="se">\x00\x0f\x00\x00\x00\x00\x00\x00\xf3\xf0\xf0\xf0\x00\x00\x00\xff\x9e\xf8\x0f\xfe\x0c\xf0</span><span class="s1">B</span><span class="se">\x00\x0f\x00\x00\x00\x00\x00\x00\x7f\xfc</span><span class="s1">3</span><span class="se">\xc8\x80</span><span class="s1">@</span><span class="se">\x01\xfe\x06</span><span class="s1">&lt;</span><span class="se">\x07\xbf</span><span class="s1">&gt;0</span><span class="se">\x10\x00\x1f\x00\x00\x00\x00\x00\x00\x7f\xfe\x08\xd8\x14\x00\x13\xfe\x0f\x08\x07</span><span class="s1">?&gt;8</span><span class="se">\x00\x00\x0f\x00\x00\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\x03\x1c\x98\x00\x07\xff\x08\x00\x07\x1f\xbe</span><span class="s1">8</span><span class="se">\x00\x00\x0f\x08\x00\x00\x00\x00\x00\x1f\xff\x80</span><span class="s1">}0</span><span class="se">\x00\x07\xff\x80\x0c\x0f\x0f\x83\xf8\x00\x00\x0f\x00\x00\x00\x00\x10\x00\x0f\xff\xc0\x06\xe0\x10\x0f\xff\x80\x00\x0f\x0f\x83\x90\x00\x00\x0f\x00\x00\x00\x00\x00\x00\x0f\xff\xe0\x00\xf0\x1c\x17\xff\x80\x00\x9f\x0f\x87\x00\x00\x00\x0f\x00\x00\x00\x00\x00\x00\x0f\xff\xf1\xf8</span><span class="s1">x</span><span class="se">\x00\xe7\xff\x01\x00\x87\x0f\x83\xc0\x00\x00\x0f\x00\x00\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\xf8\xfc\x1d\xc1\xe7\xfe\x13\xc0\x00\x00</span><span class="s1">3</span><span class="se">\xc0\x00\x00\x0f\x00\x00\x00\x00\x00\x00\xff\xff\xfc\xef\x0f\xdf\xe7\xfe\x14</span><span class="s1">@</span><span class="se">\x00\x00\x07\xc0</span><span class="s1"> </span><span class="se">\x00\x0f\x00\x00\x00\x00\x00\x01\xff\xff\xff\xff\x8f\xff\xc1\xfe\x1c</span><span class="s1">@</span><span class="se">\x00\x18\x07\x98\x10\x00\x0f\x00\x00\x00\x00\x00\x03\xff\xff\xe7\xff\xff\xdf\xc1\xf8</span><span class="s1">&lt;</span><span class="se">\x00\x00\x00\x07\x98</span><span class="s1">@</span><span class="se">\x00\x0f\x00\x00\x00\x00\x00\x07\x8f\xff\xf0\xcf\xf7\xff\x00\x00</span><span class="s1">9</span><span class="se">\x04\x00\x00</span><span class="s1">/</span><span class="se">\x80\xc0\x00\x0f\x00\x00\x00\x00\x00\x08\x07\xdf\x00</span><span class="s1">g</span><span class="se">\xff\xe6\x00</span><span class="s1"> y</span><span class="se">\x84\x00\x00</span><span class="s1">_</span><span class="se">\x80\x00\x04\x0f\x00\x00\x00\x00\x00\x10\x07\xc7\x00</span><span class="s1">G</span><span class="se">\xff\xa7\xc0</span><span class="s1">`t</span><span class="se">\x04\x00\xe0</span><span class="s1">?</span><span class="se">\x00\x00\x00\x0f\x00\x00\x00\x00\x00</span><span class="s1"> </span><span class="se">\x03\xe7\xc0</span><span class="s1">G</span><span class="se">\xfd\xb7\xfc</span><span class="s1">@t</span><span class="se">\x00</span><span class="s1">8x</span><span class="se">\x7f</span><span class="s1">`</span><span class="se">\x00\x00\x1f\x00\x00\x00\x00\x00</span><span class="s1">c</span><span class="se">\x83\xe3\xf0</span><span class="s1">g</span><span class="se">\xec\xff\xfc\x00</span><span class="s1">$</span><span class="se">\x00</span><span class="s1">|</span><span class="se">\xf9\xff\x00\x00\x00\xef\x00\x00\x00\x00\x00\xff\x83\xf1\xf8\xc7\xf9\xff</span><span class="s1">L</span><span class="se">\x00\x04\x00\x7f\xff\xff\x00\x00\x00\x0f\x00\x00\x00\x00\x03\xff\x03\xf8\xff\xc7\xfb\xc8\r\x00\x04\x06</span><span class="s1">?</span><span class="se">\xff\xff\x00\x00\x00\x0f\x00\x00\x00\x00\x07\x00\x07\xfc\xff\xc3\xf9\xc0\x13\x00\x04\x00\x1f\xff\xfe\x00\x00</span><span class="s1">7</span><span class="se">\x8f\x00\x00\x00\x00\x0f\x80\x01\xff\xfe</span><span class="s1">c</span><span class="se">\xfb\xc0</span><span class="s1">"</span><span class="se">\x00\x04\x00\x00\x7f\xfc\x00\x03\xfc\x0f\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xe0\x01\xff\xfe\x7f\xf3\x80</span><span class="s1">,</span><span class="se">\x00\x04\x02\x05\x8f\xf8\x00\x0f\xf8\x0f\x00\x00\x00\x00\xff\xf0\x01\xff\xf1\x7f\xf7\xc0\x08\x00\x04\x00\x05\xf3\xf8\x00\x0f\x80\x1f\x00\x00\x00\x01\xff\xf8\x01\x7f\xfc\x7f\xff\xc0</span><span class="s1">P</span><span class="se">\x00\x04\x01\x81\xf8\xf0\x00\x00\x01\xff\x00\x00\x00\x07\xff\xfc\x01\xff\xfd\xff\xff\xc0</span><span class="s1">p</span><span class="se">\x00\x08\x03\x01\xf4</span><span class="s1">^</span><span class="se">\x00\x00\x0f\x8f\x00\x00\x00\x07\xff\xfe\x01\xff\xf3\xff\xff\xc0</span><span class="s1">n</span><span class="se">\x00\x08\x06\x01\xfb</span><span class="s1">|</span><span class="se">\x00\x00</span><span class="s1">8</span><span class="se">\x0f\x00\x00\x00\x03\xff\xff\x80\xff\xff\xff\xff\xe2</span><span class="s1">|</span><span class="se">\x00\x08\x06\x01\xfc</span><span class="s1">q</span><span class="se">\x00\x00\xc0\x0f\x00\x00\x00\x00\x7f\xff\x80\xfe\x7f\xff\xff\xe6\x7f\x00\x00\x00\x03\xfd\x00\x00\x01\x00\x0f\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\xc1\xe7\x1f\xfd\xfd\xf6\x7f\x00\x10\x00</span><span class="s1">A</span><span class="se">\xfe\x00\x00\x00\x00\x0f\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\x80\xc3\xbf\xf9\xff\xf0</span><span class="s1">?</span><span class="se">\x00\x10\x00</span><span class="s1">a</span><span class="se">\xfc\x00\x00\x08</span><span class="s1">0</span><span class="se">\x0f\x00\x00\x00\x00\x1f\xff\x80</span><span class="s1">@?</span><span class="se">\xff\xf7\xf0\x1f\x80\x10\x00\xf9\xf8\x00\x00\x10</span><span class="s1">8</span><span class="se">\x0f\x00\x00\x00\x00\x03\xff\x80</span><span class="s1">@?</span><span class="se">\xfe</span><span class="s1">w0</span><span class="se">\x07\xc0</span><span class="s1">0</span><span class="se">\x7f\xff\xf0</span><span class="s1">@</span><span class="se">\x00\x00\\\x0f\x00\x00\x00\x00\x07\xdf</span><span class="s1">0`</span><span class="se">\x1f\xff\x7f</span><span class="s1">p</span><span class="se">\x00\x00\x10</span><span class="s1">?</span><span class="se">\xff\xe0\x00\x00\x00\xff\xff\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\xf8</span><span class="s1"> ?</span><span class="se">\xff\xef\xe0\x00\x00\x17\xdc\x18\x00\x00\x00\x81\xff\xff\x00\x00\x00\x00\xef\xff\xdc</span><span class="s1">0</span><span class="se">\x7f\xfe\xff\xe0\x0e\x00\'\xc1\x80\x00\x00\x00\x00\x1f\xff\x00\x00\x00\x00\xc3\xff\xc7\xbf\xff\xe3\xff\xe0\x07\x00\'\x07\xf0\x00\x00\x00\x00\x07\xef\x00\x00\x00\x00\xc3\xfc</span><span class="s1">g</span><span class="se">\x8f\xfe\xd2\x7f\xc0</span><span class="s1">g</span><span class="se">\x00</span><span class="s1"> </span><span class="se">\x0f\xfc\x00\x02\x00\x00\x00\x0f\x00\x00\x03\xc0\xc4\xec\x1b\x87\xfe\xb5\xcf\xc0</span><span class="s1">g</span><span class="se">\x00</span><span class="s1">`</span><span class="se">\x07\xfc\x00\x01\x00\x00\x00\x0f\x00\x00\x07\xf0\xff\xff\xcf\x83\xbf\xb1\x87\xc0</span><span class="s1">?</span><span class="se">\x80</span><span class="s1">p?</span><span class="se">\xc4\x00\x08</span><span class="s1">`</span><span class="se">\x00\x00\x0f\x00\x00</span><span class="s1">/</span><span class="se">\xf3\xff\xff\xe2\x00\x1f\xd7\x82</span><span class="s1">@?</span><span class="se">\x80</span><span class="s1">`?</span><span class="se">\xe6\x04\x00</span><span class="s1"> </span><span class="se">\x00\x00</span><span class="s1">?</span><span class="se">\x00\x00</span><span class="s1">w</span><span class="se">\xe7\xff\xff\xf0\x00\x0f\xe3</span><span class="s1">R@</span><span class="se">\x02\x00</span><span class="s1">@?</span><span class="se">\xff\xb8\x00\x01\x1f\xf8</span><span class="s1">?</span><span class="se">\x00\x00\xe7\xcc\x7f\xc7\xfc\x00\x0f\xfb\xf2</span><span class="s1">`</span><span class="se">\x00\x00</span><span class="s1">@?</span><span class="se">\xff\xe0\x07\xc3\x7f\xf8\x7f\x00\x07\xe3\xe8</span><span class="s1">?</span><span class="se">\x81\xf8\x00\x06\xff\xb6</span><span class="s1">`</span><span class="se">\x00\x00</span><span class="s1">G</span><span class="se">\xff\xff\x80\x07\xe7\xff\xff\xff\x00\x07\xfd\xcc\x0f\xe0</span><span class="s1">x</span><span class="se">\x00\x06\x00\xce</span><span class="s1">`</span><span class="se">\x00\x00\x9f\xff\xfc\x06\x07\xe7\xff\xff\xff\x00\x07\xff\x83\xc7\xe0\x18\x00\x07\x00\xfe\xc0\x00\x00\x9f\xff\xfc</span><span class="s1">|</span><span class="se">\x1f\xc7\xff\xff\x7f\x00\x0f\xff\xf9\xff\xf0\x0e\x00\x07\xc0\x7f\xc0\x00\x00</span><span class="s1">]</span><span class="se">\xff\x87\xfc\xdf\xc7\xff\xff\x7f\x00\x0f\xff\xfb\xc7\xf0\x00\x00\x03\xe0\x1f\xc0\x00\x00\x9f\xfc\xcf\xf9\xff\xc7\xff\xff\xff\x00</span><span class="s1">?</span><span class="se">\xdf\xc0\x0f\xf8\x00\x00\x03\xf0\x0f\xe0\x00\x00\x9f\x10\xff\xf3\xff\xc7\xff\xff\xff\x00\x1f\x00\x00</span><span class="s1">?</span><span class="se">\xfc\x00\x00\x01\xfe\x1f\xe0\x00\x00\xbf\x00\xff\xf3\xff\xc7\xff\xff\xff\x00\x00\x00\x03\xff\xfc\x00\x00\x01\xff\xfc</span><span class="s1">p</span><span class="se">\x00\x00\xbf\x00\x7f\xe7\xff\x87\xff\xff\xff\x00\x00\x00\xff\xfc</span><span class="s1">&gt;</span><span class="se">\x00\x00\x01\xff\xfc</span><span class="s1">8</span><span class="se">\x00\x00\xbe</span><span class="s1">@</span><span class="se">\x7f\xe7\xff\x87\xef\xff\xff\x00\x00\x0f\xff\xe0\x1e\x00\x00\x00\xf7\xfc</span><span class="s1">p</span><span class="se">\x00\x00\\</span><span class="s1">@</span><span class="se">\x7f\xe7\xff\x87\xcf\xff\xff\x00\x00\xff\xff\xc0\x1f\x00\x00\x00\x03\xff\xf0\x00\x00</span><span class="s1">``</span><span class="se">\xff\xe3\xff\x07\xcf\xff\xff\x00\x1f\xff\xfe\x00\x1f\x00\x00\x00\x1f\xff\x9f\x00\x00</span><span class="s1">p`</span><span class="se">\xff\xe1\xff\x07\x9e</span><span class="s1">?</span><span class="se">\xff\x03\xff\xff\x80\x00\x0f\x80\x00\x03\xff\xff\x0f\xc0\x00\x0c</span><span class="s1">l</span><span class="se">\xff\xe6\xba\x83\x9c</span><span class="s1">?</span><span class="se">\xff</span><span class="s1">?</span><span class="se">\xff\xf8\x00\x00\x0f\x80\x00\x03\xf9\xfe\x03\xe0\x00\x06</span><span class="s1">.</span><span class="se">\xff\x8e\x02\xa1\x80\xbf\xff\xff\xff\xfc\x00\x00\x0f\x80\x00\x07\xf8</span><span class="s1">~</span><span class="se">\x03\xe0\x00\x02</span><span class="s1">-</span><span class="se">\xff</span><span class="s1">p</span><span class="se">\xcd\xbc</span><span class="s1">p</span><span class="se">\x7f\xff\xff\xff\xf0\x00\x00\x07\xc0\x00\x03\xf8</span><span class="s1">=</span><span class="se">\t\xe0\x00\x01\r\xee\xc0</span><span class="s1">;</span><span class="se">\xfe</span><span class="s1">p</span><span class="se">\xff\xff\xff\xff\x80\x00\x00\x07\xc0\x00\x01\xf8\x05\x08\x00\x00\x00\xeb\xcc</span><span class="s1">0xv</span><span class="se">\xb3\xff\xff\xff\xfe\x00\x00\x00\x03\xe0\x00\x00\xfc\x01\x00</span><span class="s1">@</span><span class="se">\x80\x00</span><span class="s1">s</span><span class="se">\x8c</span><span class="s1">@</span><span class="se">\x00</span><span class="s1">Q&gt;</span><span class="se">\xff\xcf\xff\x0c\x00\x00\x00\x03\xe0\x00\x03</span><span class="s1">&gt;1</span><span class="se">\xc7\x81\xc0\x00</span><span class="s1">`</span><span class="se">\xf9\xff\xff\x80\x1c\xff\xbf\xff\x04\x00\x00\x00\x01</span><span class="s1">`</span><span class="se">\x00\x03\x8f\x98\xd8\x03\x80\x00</span><span class="s1"> </span><span class="se">\x05\xf8</span><span class="s1"> </span><span class="se">\x00\x84\xbe\x7f\xf0\x00\x00\x00\x00\x00</span><span class="s1">p</span><span class="se">\x00\x03\xc7\xe8\x18\x0f\x80\x00</span><span class="s1">&lt;</span><span class="se">\xfd\xc0\x03\x98\x03\xec</span><span class="s1">?</span><span class="se">\xf0\xc0\x00\x00\x00\x00\xf8\x00\x07\xe3\xe0\xff\x0f\x00\x00\x15\xfc\x1c\x13\xd8\x00\x1f\xff\xf0\xe0\x00\x00\x00\x00\xf8\x00\x02\xf9\xf1\xff\xff\x00\x00\x11\xf8\xfe</span><span class="s1">?</span><span class="se">\xc0\x18\xc0\x7f\xc0</span><span class="s1">@</span><span class="se">\x00\x00\x00\x00</span><span class="s1">|</span><span class="se">\x00\x02\xfc\xfc\xff\xfe\x00\x00\x08</span><span class="s1">y</span><span class="se">\xfe\xff\xc0\x10\xc0\x0f\x00\x00\x00\x00\x00\x00\x1c\x00\x01\xfe</span><span class="s1">??</span><span class="se">\xf4\x00\x00\x0c\x07\xff\xff\xcc</span><span class="s1">0</span><span class="se">\x80\x1f\x80\x00\x00\x00\x00\x00\x08\x00\x01\xfe\x8f\xbf\xfc\x00\x00\x04\xcd\xff\xef\x9c</span><span class="s1"> </span><span class="se">\x80\x1f\xec\x00\x00\x00\x00\x00\x0e\x00\x07</span><span class="s1">~</span><span class="se">\xc0\xff\xf8\x00\x00\x02\xfe\xff\xff\xf8\x01\x80\x0f\xf0\x00\x00\x00\x00\x00\x07\x00\x07</span><span class="s1">~</span><span class="se">\x00\x7f\xf0\x00\x00\x02\xfe\x1f\xf3\xf8\x00\x80</span><span class="s1">/</span><span class="se">\xe0\x00\x00\x00\x00\x00\x07\x00\x07\xff\x7f\xf3\xe0\x00\x00\x01</span><span class="s1">~</span><span class="se">\x00</span><span class="s1">y</span><span class="se">\xf0\x01\x00</span><span class="s1">O</span><span class="se">\xc0\x00\x00\x00\x00\x00\x01\xc0\x07\xf7\xda</span><span class="s1">B</span><span class="se">\x9e\x00\x04\x01</span><span class="s1">&gt;</span><span class="se">\x07</span><span class="s1">&gt;</span><span class="se">\xf0\x00\x00</span><span class="s1">O</span><span class="se">\x8c\x00\x00\x00\x00\x00\x00\xc0\x0f\xfc\x00\x02</span><span class="s1">?</span><span class="se">\x80\x06\x01\x9f\x0e\x00\x00\x00\x00\x8f\x1c\x00\x00\x00\x00\x00\x00</span><span class="s1">p</span><span class="se">\x0f\xfc\x00\x80\x7f\x00\x06\x00\x83\x07\x1e\x00\x00\x00\x8f</span><span class="s1">:</span><span class="se">\x00\x00\x00\x00\x00\x00</span><span class="s1">p</span><span class="se">\x1f\xfe\x00</span><span class="s1">p</span><span class="se">\xff\x00\x04\x00\xcd\x06\x7f\xce\x10\x01\x8f</span><span class="s1">8</span><span class="se">\x00\x00\x00\x00\x00\x00\x00\x1f\xbe\x01\xc3\xff\x00\x00\x00</span><span class="s1">_</span><span class="se">\x81\xff\xf1\xb8\x03\x8f\x1c\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\x9e\x07\xd8\xfe\x00\x00\x00</span><span class="s1">/</span><span class="se">\xc1\xff\xfe\x07\xf7\x0f\xcc\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xdf\x1e</span><span class="s1">b</span><span class="se">\x7f\x00\x00\x00\x17\xe7\xff\xff\xf1\xfe\x0f\xc0\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xfb\x07\xe9\x1f\x00\x00\x00\x17\xff\xff\xff\xfc\x1b\x8f\x80\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xc3\xcd\xf0\x8e</span><span class="s1">@</span><span class="se">\x00\x00\x07\xff\xff\xff\xff\x83\xff\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\x87\xf1\xf0</span><span class="s1">`</span><span class="se">\x00\x00\x00\x0b\xff\xff\xff\xff\xfe\x7f\x00\x00\x00\x00\x00\x00\x00\x00\x1f</span><span class="s1">7</span><span class="se">\xf9\x88</span><span class="s1">0</span><span class="se">\x00\x00\x00\x03\xff\xff\xff\xff\xff\xcf\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\x03\xf2\x02\x18\x00\x00\x00\x04</span><span class="s1">C</span><span class="se">\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x1f</span><span class="s1">E</span><span class="se">\xe4\x05\x1e\x00\x00\x00\x04\x1f\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x1f\x00</span><span class="s1">u</span><span class="se">\x00\x8f\xc0\x00\x00\x04\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x1f\x00</span><span class="s1">Q</span><span class="se">\x00</span><span class="s1">F </span><span class="se">\x00\x00\x02\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x0f\x00</span><span class="s1">d</span><span class="se">\x81\xb0\x00\x00\x00\x02\xc9\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xc0</span><span class="s1">3</span><span class="se">\x83\x9d\x80\x00\x00\x02\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x07\xc0</span><span class="s1">1</span><span class="se">\x80\x8f\x00\x00\x00\x02\x00\x0f\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x06\x07\x80\x1e\x00</span><span class="s1">o</span><span class="se">\x80\x00\x00\x02</span><span class="s1">@</span><span class="se">\x03\xff\xff\xff</span><span class="s1">/</span><span class="se">\x00\x00\x00\x00\x00\x00\x00\x0e\x07\x80\x00\x00</span><span class="s1">?</span><span class="se">\x80\x00\x00\x02</span><span class="s1">d</span><span class="se">\x01\xff\xff\xfe</span><span class="s1">?</span><span class="se">\x00\x00\x00\x00\x00\x00\x00\x1e\x07\x00\x00\x00\x1f\x00\x00\x00\x02</span><span class="s1"> </span><span class="se">\x00\x1f\xff\xff\xff\x80\x00\x00\x00\x00\x00\x00\x1f\x07\x00\x00\x00</span><span class="s1">o</span><span class="se">\x00\x00\x00\x03\xe0\x00\x0f\xff\xff\xff\xe0\x00\x00\x00\x00\x00\x00</span><span class="s1">&gt;</span><span class="se">\x07\x00\x00\x00</span><span class="s1">?</span><span class="se">\x80\x00\x00\x03\x00\x00\x03\xff\xff\xff</span><span class="s1">p</span><span class="se">\x00\x00\x00\x00\x00\x00</span><span class="s1">&gt;</span><span class="se">\x07\x00</span><span class="s1"> </span><span class="se">\x00</span><span class="s1">?</span><span class="se">\xc0\x00\x00\x07\x84\x00\x00\x03\xff\xff\xfc\x00\x00\x00\x00\x00\x00</span><span class="s1">~</span><span class="se">\x07\x00\x00\x00</span><span class="s1">/</span><span class="se">\x00\x00\x00\x07\xe3\x00\x00\x03\xff\xff\x7f\x00\x00\x00\x00\x00\x00</span><span class="s1">~</span><span class="se">\x0f\x00\x00\x00\x1f\x00\x00\x00\x07\xe1\xe2\x00\x03\xff\xff\xf7\x80\x00\x00\x00\x00\x00\x7f\x0e\x00\x00</span><span class="s1"> </span><span class="se">\x1e\x80\x00\x00\x07\xf0\xf0\x00\x01\xf8</span><span class="s1">?</span><span class="se">\xcf\xc0\x00\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\x0e\x00\x00\x0e</span><span class="s1">?</span><span class="se">\xe0\x00\x00\x0f\xff\xf8\x00</span><span class="s1">@ </span><span class="se">\x0f\xe3\xf0\x00\x00\x00\x00\x00\x13\x1c\x00\x00\x0f\xbf\xa0\x00\x00\x0f\xff\xff\xe0\x00\x00\x0f\xf1\xf8\x00\x00\x00\x00\x00</span><span class="s1">&gt;</span><span class="se">\x1c\x00\x00\x0f\xcf\x80\x00\x00\x0f\xfe</span><span class="s1">?</span><span class="se">\xf0\x00\x00\x0f\xfe</span><span class="s1">x</span><span class="se">\x00\x00\x00\x00\x00\x10\x1f\x00\x00\x0f\xe4\x00\x00\x00\x0f\xe0\x1f\xfc\x00\x00\x0f\xff</span><span class="s1">6</span><span class="se">\x00\x00\x00\x00\x00</span><span class="s1">0</span><span class="se">\x1e\x00\x00\x0f\xfe\x00\x00\x00\x1f\x00\x0f\xf0\x00\x00\x0f\xff\xdf\x80\x00\x00\x00\x00\x00\x1e\x02\x00\x0f\xbf\x80\x00\x00\x00\x01\xe0</span><span class="s1">`</span><span class="se">\x00\x00\x0f\xfd\xe7\xc0\x00\x00\x00\x00</span><span class="s1">2</span><span class="se">\x1e\x02\x00\x1f\x80\xc0\x00\x00\x00</span><span class="s1">&gt;</span><span class="se">\x00\x00\x00\x00\x0f\xff\xfb\xe0\x00\x00\x00\x00\x00\x0c\x00\x00\x0f\x1f\xe0\x00\x00\x00</span><span class="s1">`</span><span class="se">\x00\x06\x00\x00\x0f\xff\xfd\xb0\x00\x00\x00\x00\x00\x1e\x00\x00\x1e\x1f\xf0\x00\x00\x01\x80\x00\x00</span><span class="s1"> </span><span class="se">\x00\x7f\xfc\x00</span><span class="s1"> </span><span class="se">\x00\x00\x00\x00\x00\x07\x80\x00</span><span class="s1"> _</span><span class="se">\xf0\x00\x00\x0f\x80\x00\x00</span><span class="s1">1</span><span class="se">\xc0\x1f\x1f\xff</span><span class="s1">0</span><span class="se">\x00</span><span class="s1">@</span><span class="se">\x00\x00\x00\x01\x80\x00\x00\x8f</span><span class="s1">x</span><span class="se">\x00\x00\x1c\x80\x03\x00</span><span class="s1">{</span><span class="se">\xe4\x7f\xfc\x03\x88\x00</span><span class="s1">0</span><span class="se">\x00\x01\x00\x01\xc0\x00</span><span class="s1"> </span><span class="se">\x00\x18\x00\x00\xf0\x00\x03\xe0\x1f\xff\xff</span><span class="s1">?</span><span class="se">\xff\xf8\x06\x1c\x00\x03\x80\x07\xc0\x00</span><span class="s1"> </span><span class="se">\x00</span><span class="s1">`</span><span class="se">\x00\x03\xc0\x10\x01\xf3\xef\xff\xff\xff\xc0</span><span class="s1">&gt;</span><span class="se">\x03\x8e\x00\x01\x01\x07\xc0\x00\x10\x04</span><span class="s1">0</span><span class="se">\x00\x06\t\x00\x03\xff\x7f\xff\xff\x81\xff\xc3\x81\xff\x80\x01\x06\x03\xe0\x00</span><span class="s1"> ?</span><span class="se">\xc0\x00\x08\x00\x04\x01\xff\xff\xff\xff</span><span class="s1">&gt;</span><span class="se">\x00\x1e</span><span class="s1">@</span><span class="se">\xff\xc0\x00\x06\x01\xe0\x00</span><span class="s1">!</span><span class="se">\xff\xc0\x00\x08\x00\x01\xe0\x1f\xff\xff\xff\xe7\xf1\xff\xa0\x7f\xe0\x00\x06\x01\xf8\x00\x81\xff\xc0\x00\x0c\x08\xe7\xde\x9f\xff\xff\xff\xff</span><span class="s1">/</span><span class="se">\x80\x08\x1f\xf0\x10\x0f\x01\xf8\x00</span><span class="s1">A</span><span class="se">\xff\xc0\x00\x0c</span><span class="s1">?</span><span class="se">\xff\xff\xdf\xff\xff\xff\x0f\xe0\xff\xfc\x0f\xfb\xf8\x8f\x03\xf8\x00\x01\xff\x80\x00\x0c\x1f\xff\xff\xff\xff\xff\xff\xc0\xff\xff\xff\x07\xfb\xfc\x0f\x07\xf0\x00\x03\xff\xc0\x00\x06\x1f\xff\xff\xff\xff\xff\xff\xfb\xff\xff\xff\xc1\xf3\xfc\x07\x8f\xf0\x00\x03\xff\xc0\x00\x07\xdf\xff\xff\xff\xff\xff\xff\xf3\xff\xff\xfc\xe0\xcf\xfe\x03\x87\xf0\x00\x01</span><span class="s1">{</span><span class="se">\xc0\x00\x03\xf7\xff\xff\xff\xff\xff\xff\xfe\x7f\xff\xfc</span><span class="s1">x</span><span class="se">\x1c\x06\x07\x07\xd0\x00\x00</span><span class="s1">{</span><span class="se">\x80\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xfc</span><span class="s1">8</span><span class="se">\x06\x07\x8b\xc0\x00\x02</span><span class="s1">?</span><span class="se">\xc0\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xfe</span><span class="s1">8|</span><span class="se">\t\x8b\xc0\x00\x00\x7f\xe0\x00\x03\xc0\x00\x1f\xff\xff\xff\xff\xff</span><span class="s1">?</span><span class="se">\xff\xff\xff\x87\xc0\x07\x87\xc0\x00\x04\xff\x80\x00\x00\x00\x00\x1b\xff\xff\xff\xff\xff\xef\xff\xff\xff\xc0\x00\x03\x87\x80\x08\x04\xff\xe0\x00\x00\x00\x00\x00\xff\xff\xff\xff</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xe0\x00\x03\x87\xc0\x1c\r\xff\xc0\x00\x00\x00\x00\x00\x1f\xff\x80\xff\x7f\xfb\xff\xff\xff\xf0</span><span class="s1">&gt;</span><span class="se">\x03\x87\xc0\x0f\xe9\xff\xc0\x00\x00\x00\x00\x00\x07\xc1\xfd\x8f</span><span class="s1">'</span><span class="p">)</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="n">img_red</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="sa">b</span><span class="s2">"</span><span class="se">\x00\x00\x00\x00\x00\xff\xfe\x0f\xfd\xff\xff\xfe\x7f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x7f\xfe\x03\xff\xff\xff\xfe</span><span class="s2">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00</span><span class="s2">?</span><span class="se">\xfc\x00\xff\xff\xff\xfe\x0f\xfc\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x06\x0e\x00\x07\xff\xff\xff\x1f\xf8\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\x9f\xe0\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x07\x0f\xff\xff\xff\x8f\xe0\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x04\x0e\xff\xff\xff\xc7\xc0\x1f\xff\xff\xff\xff\xff\xff\xff\xef\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s2">O</span><span class="se">\xff\xff\xff\xff\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xf7\x7f\xbf\xfe\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xef\x00\x00\x00\x00\x00\x00\x00\x00\x07\xe7\xeb\xff\xec\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe3\xe7\xff\xf8\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\xcf\xff\xf8\x00\x07\xf3\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x1f\xef\xf0\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xe3\xe0\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xff\x00\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x02</span><span class="s2">&gt;</span><span class="se">\x00\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s2"> </span><span class="se">\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x18\x00\x00\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00</span><span class="s2">p</span><span class="se">\x00\x0f\x00\x08\x00\x00\x00\x06\xff\xff\xff\xdf\xff\xff\xff\xff\x00\x00\x00\x00\x00\x07\xf8</span><span class="s2"> </span><span class="se">\xff\x80\x00\x18\x00\x00\x06\x7f\xff\xff\xbf\xff\xff\xfb\xff\x00\x00\x00\x00\x00\x0f\xf8</span><span class="s2">8</span><span class="se">\xff\x80\x00</span><span class="s2">X</span><span class="se">\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x1f\xfc\x18</span><span class="s2">?</span><span class="se">\x80\x02</span><span class="s2">H</span><span class="se">\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xef\x00\x00\x00\x00\x00\x1c</span><span class="s2">|</span><span class="se">\x1c\x0f\x80\x13\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\x1f\x00\x00\x00\x00\x00\x00</span><span class="s2">|</span><span class="se">\x0e\x07\x00\x06\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\xfc\x07\x00\x00\x04\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\xff\xf8\x03\x00\x00\x06\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xc8\x7f\x00\x00\x00\x00\x00\x7f\xfe\x00\x01\x80\x04\x00\x00\x00\x03\xff\xff\xff\xff\xff\xfc\x03\xff\x00\x00\x00\x00\x00\x1f\xfe\x00\x01\x80\x0c\x00\x00\x00\x03\xfd\xfe\x7f\xff\xff\xf0\x07\xff\x00\x00\x00\x00\x00\x0f\xfe\x00\x0f\x80\x08\x00\x00\x00\x03\xff\xfe\x0f\xff\xff\xf0\x7f\xef\x00\x00\x00\x00\x00\x07\xfe\x80\x03\x80\x00\x00\x00\x00\x03\xff\xfe\x07\xff\xff\xff\xfe\x0f\x00\x00\x00\x00\x00\x03\xfe\x00\x02\x00\x00\x00\x00\x00\x07\xff\xfe\x03\xff\xff\xff\xf0\x7f\x00\x00\x00\x00\x00\x01\xfe\x00\x00\x00\x00\x00\x00\x00\x07\xff\xfe\x00\xff\xff\xff\xc7\xff\x00\x00\x00\x00\x00\x00\x7f\x00\x00\x00\x00\x00\x00\x00\x07\xff\xfe\x00\xff\xff\xff</span><span class="s2">?</span><span class="se">\xff\x00\x00\x00\x00\x00\x00\x7f\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xfc\x00\xff\xff\xfe\xff\xff\x00\x00\x00\x00\x00\x00</span><span class="s2">&gt;</span><span class="se">\x00\x00\x02\x02\x00\x00\x00\x0f\xff\xbe\x01\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x7f\x00\x00\x06\x00\x00\x00\x00\x0f\xff\x9e\x03\xff\xff\xf7\xcf\xff\x00\x00\x00\x00\x00\x00\x7f\x80\x00\x00\x00\x00\x00\x00\x0f\xff\x06\x07\xff\xff\xef\xc7\xff\x00\x00\x00\x00\x00\x00\x7f\x80\x00\x01\x80\x00\x00\x00\x0f\x80\x00\x0f\xff\xff\xff\xa3\xff\x00\x00\x00\x00\x00</span><span class="s2"> </span><span class="se">\xcf\x80\x00\x00\x80\x00\x00\x00\x0f\xc0\x00\x1f\xff\xff\xff\x00\x0f\x00\x00\x00\x00\x00\x00\x07\xc0\x00\x00\x00\x00\x00\x00\x0f\xe3\xe7\xff\xff\xff</span><span class="s2">~</span><span class="se">\x00\x0f\x00\x00\x00\x00\x00\x00\x03\xc0\x00\x00\x00\x00\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xe0\x0f\x00\x00\x00\x00\x00\x00\x00</span><span class="s2">@</span><span class="se">\x00\x1c\x00\x00\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xf8\x1f\x00\x00\x00\x00\x00\x03\x80</span><span class="s2">p</span><span class="se">\x01</span><span class="s2">?</span><span class="se">\x80\x00\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x03\xe0</span><span class="s2">x</span><span class="se">\x01</span><span class="s2">{</span><span class="se">\xb0\x00\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00</span><span class="s2">0|@{</span><span class="se">\xf8\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x1d\xff\xe0</span><span class="s2">;</span><span class="se">\xfd\x80\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x0f\xff\xf0\x1f\xbd\x80\x00\x00</span><span class="s2">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x03\x80</span><span class="s2">8</span><span class="se">\x03\xff\xf0\x07</span><span class="s2">=</span><span class="se">\x80\x00\x00</span><span class="s2">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x07\xc0</span><span class="s2">~</span><span class="se">\x07\xff\xf8\x00</span><span class="s2">y</span><span class="se">\x80\x00\x00</span><span class="s2">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x03\xf0\x1f\x87\xff\xf8\x00</span><span class="s2">1</span><span class="se">\x80\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00</span><span class="s2">8</span><span class="se">\x1f\xe7\xff\xf8\x00\x01\x00\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x0f\xf1\xff\xf8\x00\x00\x00\x00\x00</span><span class="s2">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x0f\xff\xff\xfc\x00\x00\x00\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x07\xff\xff\xfc\x00\x00\x00\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x03\xff\xff\xfe\x00\x00\x00\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x03\xff\xff\xfe\x00\x03\x80\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x03\xc1\xff\xff\xfe\x00\x03\xc0\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x1f\xe1\xff\xff\xff\x08\x03\x80\x00\x00</span><span class="s2">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00</span><span class="s2">?</span><span class="se">\xe0\xff\xff\xff\xfc\x00\x00\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x01\xff\xe0\xff\xff\xff\xe0\x00</span><span class="s2">`</span><span class="se">\x00\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x7f\xff\xf0\x7f\xff\xfc\x00\x00\xf0\x00\x00\x03\xf3\xff\xf9\xff\x7f\xff\xff\xff\x00\x00\x07\xff\xff\xf0\x7f\xff\xfc\x06\x01\xfc\x00\x00\x01\xf1\xff\xf1\xff\x7f\xff\x7f\xff\x00\x00\x03\xff\xff\xf0\x7f\xff\xf8\x07\x81\xfc\x00\x00\x01\xf3\xff\xff</span><span class="s2">&gt;s</span><span class="se">\x8f\xff\xff\x00\x00\x0f\xff\xff\xf8</span><span class="s2">?</span><span class="se">\xff\xfc\x07\xc3\xfe\x00\x00\x00\xf3\xff\xff\xfc</span><span class="s2">q</span><span class="se">\x8f\xff\xff\x00\x00\x7f\xff\xff\xf8</span><span class="s2">?</span><span class="se">\xff\xfe\x07\xfb\xff\xc0\x00\x00\x17\xff\xcf\xff\xf9\xcf\xff\xff\x00\x01\xff\xff\xff\xfc\x1f\xff\xff\x03\xff\xff\x80\x00\x00\x0f\xff\xff\xff\xfe\xff\xff\xff\x00\xf3\xff\xff\xff\xfc\x1f\xff\xff\xc1\xcf\xf8\x00\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xcf\x00\xfb\xff\xff\xff\xfe\x9f\xff\xff\xf0</span><span class="s2">g</span><span class="se">\xe0\x00\x00\x00\x1f\xfb\xff\xff\xff\xff\xff\x9f\x0f\xff\xff\xff\xff\xff\x8f\xff\xff\xf8\x17\xe0\x00\x00\x00\x03\x03\xff\xfc</span><span class="s2">g</span><span class="se">\xff\xff\xff\x0f</span><span class="s2">?</span><span class="se">\xff\xff\xff\xff\x07\xff\xff\xfc\x1f\x00\x00\x00\x00\n\x03\xe3\xec\'\xff\xff\xff\x0f\x1f\xff\xff\xff\xff\x07\xff\xff\xfe\x0e\x00\x00\x00\x00\x0e\x07\x01\xc0</span><span class="s2">?</span><span class="se">\xe7</span><span class="s2">?</span><span class="se">\xff</span><span class="s2">?</span><span class="se">\xbf\xff\xff\xff\xff\x83\xff\xff\xff\x03\x00\x00\x00\x00\x07\x86\x01\x00</span><span class="s2">?</span><span class="se">\xef</span><span class="s2">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xe3\xff\xff\xff\xc0\xc0\x00\x00\x00\x03\xf8\x00\x00</span><span class="s2">3</span><span class="se">\xcf\x7f\xef\x7f\xff\xff\xff\xff\xff\xf7\xff\xff\xff\xf0</span><span class="s2">@</span><span class="se">\x00\x00\x00\x03\xfe\x00\x10</span><span class="s2">c</span><span class="se">\xdf\x7f\xef\x13\xff\xff\xff\xff\xff\xf1\xff\xf8\xff\xff\x00\x00\x00\x00\x01\xff\x00\x00\x07\xfe\x7f\xff\x0f\xff\xff\xff\xff\xff\xf8\xff\xf8\xff\xff\x80\x00\x00\x00\x01\xff\xe0\x0c\x07\xff\x7f\xdf\x1f\xff\xff\xff\xff\xff\xf8\xff\xf8</span><span class="s2">?</span><span class="se">\x80\x0c\x00\x00\x00\x00\xff\xff\x86\x0f\xfe\xff\xbf</span><span class="s2">?</span><span class="se">\xff\xff\xff\xff\xff\xfe</span><span class="s2">?</span><span class="se">\xf8\x0f\xa5\xbc\x00\x00\x00\x00\xff\xff\xc1\x0f\xff\xff\xbf</span><span class="s2">s</span><span class="se">\xff\xff\xff\xff\xff\xff</span><span class="s2">?</span><span class="se">\xf0\x03\xff\xfc\x00\x00\x00\x00\x7f\xff\xff\xff\xff\xff\x7f\xe3\xff\xff\xff\xff\xff\xff\x8f\xf0\x03\xff\xf8\x00\x00\x00\x00\x7f\xff\xff\xff\xff\xff\x7f\xc5\xff\xff\xff\xff\xff\xff\x8f\xe0\x01\xff\x80\x00\x00\x00\x00</span><span class="s2">?</span><span class="se">\xff\xff\xf1\xef\xfe\x7f\xc7\xff\xff\xff\xff\xff\xff\xff\xe0\x01\xfe\x00\x00\x00\x00\x00</span><span class="s2">?</span><span class="se">\xff\xff\xfe</span><span class="s2">G</span><span class="se">\xfc\x7f\xe3\xff\xff\xff\xff\xff\xff\xff\xc0\x01\xf8\x00\x00\x00\x00\x00\x1f\xff\xff\xff\xf8\x08\xff</span><span class="s2">3</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xc0\x00\xe1\x8c\x00\x00\x00\x00\x0f\xff\xff\xff\xfe\x01\xff</span><span class="s2">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xc0\x00\xf8\x06\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xe0\x7f\x7f\xff\xff\xff\xff\xff\xff\xff\xc0\x00</span><span class="s2">2</span><span class="se">\x0f\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xfc\x0f\xff\xff\xff\xff\xff\xff\xff\xff\xc0\x00\x0e\x0f\x80\x00\x00\x00\x07\xff\xff\xff\xff\xff\x8f\xff\xff\xff\xff\xff\xff\xff\xff\xe0\x00\x06\x07\xc0\x00\x00\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xc0\x00\x0c\x01\xe0\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe0\x00\x18\x00\xe0\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe0\x00\x18\x00</span><span class="s2">p</span><span class="se">\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe0\x00</span><span class="s2">&lt;</span><span class="se">\x00</span><span class="s2">9</span><span class="se">\xc0\x00\x00\x01\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf0\x00\x18\x00\x0f\x80\x00\x00\x01\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf0\x00\x0c\x00\x02\x00\x00\x00\x01\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf8\x00\x0e\x00\x00\x00\x00\x00\x01\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf9\xf8\x00\x00\x00\x00\x00\x00\x00\x01\xbf\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf1\xf8\x00\x00\x00\x00\x00\x00\x00\x01\x9b\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe1\xf8\x00\x00\x00\x00\x00\x00\x00\x01\xdf\xff\xff\xff\xff\xff\x7f\xff\xff\xff\xff\xff\xff\xe0\xf8\x00\x00\x00\x00\x00\x00\x00\x00\x1f\xff\xff\xff\xff\xff\x1f\xff\xff\xff\xff\xff\xff\xc1\xf8\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\x8f\xff\xff\xff\xff\xff\xff\xc1\xf8\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s2">{</span><span class="se">\xff\xff\xff\xff\xff\x03\xff\xff\xff\xff\xff\xff\x81\xf8\x00\x00\x00\x00\x00\x00\x00\x00\x1c\xff\xff\xff\xff\xff\x80\xff\xff\xff\xff\xff\xff\x81\xf0\x00\x00\x00\x00\x00\x00\x00\x00\x1e\x1d\xff\xff\xff\xff\x08\x7f\xff\xff\xff\xff\xff\x80\xf0\x00\x00\x00\x00\x00\x00\x00\x00\x0f\x0f\xff\xff\xff\xff\x00</span><span class="s2">?</span><span class="se">\xff\xff\xff\xff\xff\xc0\xf0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\xff\xbf\xff\xff\x00\x0f\xff\xff\xff\xff\xff\xec\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1f\xff\xff\xff\x00\x07\xff\xff\xff\xff\xff\xc1\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\x00\x07\xff\xff\xff\xff\xff\xef\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\xff\xff\xff\x00\t\xff\xff\xff\xff\xff\xcf\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\x00\x00\x7f\xff\xff\xff\xff\xff\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1f\x9f\xff\xff\xff\x02\x00</span><span class="s2">?</span><span class="se">\xff\xff\xff\xff\xcd\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x01\xff\xff\xff\xff\xff\x00\x00\x1f\xff\xff\xff\xff\xff\xf0\x00\x00\x00\x00\x00\x00\x00\x00\x1f\xff\xf9\xff\xff\xff\x00\x00</span><span class="s2">O</span><span class="se">\xff\xff\xff\xff\xff\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x7f\xff\xff\xdf\xff\x8f\x03\xff\xdf\xff\xff\xff\xff\xff\xf8\x00\x00\x00\x00\x00\x00\x00\x00\x7f\xff\xff\xce</span><span class="s2">?</span><span class="se">\xef\xff\xff\xcf\xff\xff\xff\xff\xff\xfe\x00\x00\x00\x00\x00\x00\x00\x03\x7f\xfc\xff\x84\x1b\x8f\xff\xfc\x07\xff\xff\xff\xff\xff\xfe\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xfc\x1f\xe0\x00\x0f\xc0\x00\x07\xff\xff\xff\xff\xff\xf8\x00\x00\x00\x00\x00\x00\x00</span><span class="s2">?</span><span class="se">\xef\xfe\x0c\x10\x00\x0f\x00</span><span class="s2">?</span><span class="se">\xff\xff\xff\xff\xff\xfe\xf8\x00\x00\x00\x00\x00\x00\x01\xf6\xff\xfc\x00\x80\x00\x0f\x7f\xff\xfc\x7f\xff\xff\xff\xf9\xfc\x00\x00\x00\x00\x00\x00\x07\xff\xfb\xfe\x00\x00\x00\x0f\xff\xff\xe0</span><span class="s2">?</span><span class="se">\xff\xff\xff\xf9\xfe\x00\x00\x00\x00\x00\x00\x07\xff\xfe\x1f\xe0\x00\x00\x0f\x18\x0e\x00\x1f\xff\xff\xff\xf9\xfe\x00\x00\x00\x00\x00\x00\x03\xf7\x18</span><span class="s2">!`</span><span class="se">\x00\x00\x0f\x00\xd0\x7f\xff\xff\xff\xef\xf0\xfe\x00\x00\x00\x00\x00\x00\x03\xc0\x00\x00</span><span class="s2"> </span><span class="se">\x00\x00\x0f\xf0\x1f\xff\xff\xff\xfc\x07\xf0\xfc\x00\x00\x00\x00\x00\x00\x03\xe0\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xfc\x03\xf0\xf8\x00\x00\x00\x00\x00\x00\x01\xe0\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xfc\x03\xf8</span><span class="s2">p</span><span class="se">\x00\x00\x00\x00\x00\x00\x00</span><span class="s2"> </span><span class="se">\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xf0\x01\xfc</span><span class="s2">x</span><span class="se">\x00\x00\x00\x84\x00\x00\x00\x08\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xe0\x01\xf8\xf8\x00\x00\x01\x84\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xc0\x01\xf8</span><span class="s2">t</span><span class="se">\x00\x00\x01\xc0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xc0\x03\xf6</span><span class="s2">t</span><span class="se">\x00\x00\x03\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xf8</span><span class="s2">?</span><span class="se">\xf8</span><span class="s2">x</span><span class="se">\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xfc</span><span class="s2">x</span><span class="se">\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xfc</span><span class="s2">x</span><span class="se">\x00\x00\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x7f\x0f\xff\xff\xff\xff\xff\xff\xc1\xfc</span><span class="s2">x</span><span class="se">\x00\x00\x06\x00\x00\x00\x00\x00\x00\x00\x00</span><span class="s2">&gt;</span><span class="se">\x02\x7f</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>IMG_0182_bw_d.py</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="n">width</span> <span class="o">=</span> <span class="mi">184</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="n">height</span> <span class="o">=</span> <span class="mi">135</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="n">img_bw</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="sa">b</span><span class="s1">'</span><span class="se">\x00\x00\x00\x00</span><span class="s1">"</span><span class="se">\xff\xb5\x15\xaa\xfd\xbb\xda\xbf\xff\x7f\xbd\xdd\xde\xf7\xf7\xef\xde\xdf</span><span class="s1">%UUU</span><span class="se">\x14</span><span class="s1">z</span><span class="se">\xd5</span><span class="s1">J</span><span class="se">\xb5\xba\xed</span><span class="s1">m?</span><span class="se">\xf5</span><span class="s1">J</span><span class="se">\xf6\xaa\xbb</span><span class="s1">]_Z</span><span class="se">\xb5</span><span class="s1">_</span><span class="se">\x08\x00\x00\x00\x81\x15</span><span class="s1">,*</span><span class="se">\xab</span><span class="s1">{U</span><span class="se">\xb5</span><span class="s1">E</span><span class="se">\xea</span><span class="s1">7]</span><span class="se">\xdf</span><span class="s1">n</span><span class="se">\xd6\xed\xef</span><span class="s1">woAR</span><span class="se">\xaa\xaa</span><span class="s1">*J</span><span class="se">\xab</span><span class="s1">A-</span><span class="se">\xf5\xb6\xed</span><span class="s1">-t</span><span class="se">\x9a\xbf</span><span class="s1">U</span><span class="se">\xb7</span><span class="s1">{[z</span><span class="se">\xda\xbf\x10\x04\x00\x00\x80\x95</span><span class="s1">Q,</span><span class="se">\x96\xbf\xd5</span><span class="s1">V</span><span class="se">\xb7\xe2\x16\xff\xeb\xed\xae\xed\xaf</span><span class="s1">m_D</span><span class="se">\x90\x95</span><span class="s1">T$"</span><span class="se">\x04\x86\xaa\xee\xd5</span><span class="s1">{J</span><span class="se">\xd4\xad\xff\xfd</span><span class="s1">{</span><span class="se">\xdf\xb5\xfa\xdb</span><span class="s1">O</span><span class="se">\x10\x04\x00\x02\x82\x89</span><span class="s1">A)Uo</span><span class="se">\xda\x95\xaa\x82\x1f\xed\xfb\xae\xf6\xeb</span><span class="s1">W</span><span class="se">\xb5\x7f</span><span class="s1">BQUP( </span><span class="se">\x88\x84\xaa\xfb</span><span class="s1">on</span><span class="se">\xb6\xa9</span><span class="s1">[</span><span class="se">\xf6\xbe\xfb</span><span class="s1">_</span><span class="se">\xbd\xfd</span><span class="s1">m</span><span class="se">\x8f\x10\x04\x00\x05\x01\n</span><span class="s1">"!+</span><span class="se">\xad</span><span class="s1">R</span><span class="se">\xbb</span><span class="s1">U$</span><span class="se">\x0e\xfb</span><span class="s1">_</span><span class="se">\xaf\xb5\xf6\xaf\xb5\x7f</span><span class="s1">E!$</span><span class="se">\x90\xa4</span><span class="s1">@</span><span class="se">\x91</span><span class="s1">T</span><span class="se">\x0e\xea\xad\xad\xea\x92\x9f</span><span class="s1">]</span><span class="se">\xaf\xfa\xfe\xbb\xf5</span><span class="s1">k</span><span class="se">\xaf\x10\x08</span><span class="s1">A</span><span class="se">\n\x01</span><span class="s1">)*!%</span><span class="se">\xd5</span><span class="s1">j</span><span class="se">\xb5</span><span class="s1">,P</span><span class="se">\x05\xb6\xd6\xbf</span><span class="s1">Wm^</span><span class="se">\xda\xaf</span><span class="s1">D</span><span class="se">\xa2\x12</span><span class="s1">@</span><span class="se">\xa8\x00\x04\x94\x02</span><span class="s1">S</span><span class="se">\xd5</span><span class="s1">]</span><span class="se">\xb5</span><span class="s1">J</span><span class="se">\xa7</span><span class="s1">[o</span><span class="se">\xd7\xfd\xfb\xf5\xb5\xbf\x11\x00\x80\x14\x02</span><span class="s1">J</span><span class="se">\xa9</span><span class="s1">UHJ</span><span class="se">\xaa\xd6\xd1</span><span class="s1">A</span><span class="se">\x05\xe5</span><span class="s1">_}Wm[n</span><span class="se">\xdf</span><span class="s1">D</span><span class="se">\x12</span><span class="s1">*</span><span class="se">\x81</span><span class="s1">P</span><span class="se">\x10\x04</span><span class="s1">$</span><span class="se">\x80\x02\xad</span><span class="s1">UU*%Z</span><span class="se">\xef\xaf\xed\xbb\xef\xb5</span><span class="s1">o</span><span class="se">\x11</span><span class="s1">@@$</span><span class="se">\x04\x82</span><span class="s1">B</span><span class="se">\x92</span><span class="s1">R</span><span class="se">\xa8</span><span class="s1">UUR</span><span class="se">\x10\x96\xeb\xbe\xef</span><span class="s1">{</span><span class="se">\xed</span><span class="s1">Z</span><span class="se">\xdb\xbf\x04\t\x12</span><span class="s1">A" </span><span class="se">\x14\xaa\x80\x02\x15</span><span class="s1">j</span><span class="se">\xa1</span><span class="s1">U</span><span class="se">\x03\xbd\xd7</span><span class="s1">_</span><span class="se">\xaf</span><span class="s1">[</span><span class="se">\xbf</span><span class="s1">mOQ </span><span class="se">\x04\x14</span><span class="s1">H</span><span class="se">\t</span><span class="s1">B</span><span class="se">\xa4</span><span class="s1">UQ%UH</span><span class="se">\xa0</span><span class="s1">V</span><span class="se">\xd5</span><span class="s1">k</span><span class="se">\xb5\xf7\xf6\xea\xab\x7f\x04\x04\xa1</span><span class="s1">A</span><span class="se">\x02\x80\x14\x95</span><span class="s1">P</span><span class="se">\x08\x82</span><span class="s1">U"U</span><span class="se">\x05\xeb</span><span class="s1">z</span><span class="se">\xbd</span><span class="s1">[</span><span class="se">\xbb</span><span class="s1">Z</span><span class="se">\xb5</span><span class="s1">O!P</span><span class="se">\x08\x08</span><span class="s1">P%J</span><span class="se">\xaa\xad</span><span class="s1">R</span><span class="se">\x11</span><span class="s1">D</span><span class="se">\x89</span><span class="s1">B&amp;</span><span class="se">\xb6\xad</span><span class="s1">ko</span><span class="se">\xdd</span><span class="s1">v</span><span class="se">\xd5\x7f\x08\x02</span><span class="s1">"B</span><span class="se">\x04\x80</span><span class="s1">!RU</span><span class="se">\t</span><span class="s1">M</span><span class="se">\x12\x80\x90\x92\xed\xb6\xb6\xaf\xeb\xaa\xad\xaf</span><span class="s1">B</span><span class="se">\xa8\x84\x10\x90\n\xdc\xaa\xaa\xa4\xaa</span><span class="s1">J$</span><span class="se">\n\x15</span><span class="s1">^</span><span class="se">\xd5\xdb\xbf</span><span class="s1">]</span><span class="se">\xf6\xb5</span><span class="s1">_</span><span class="se">\x10\x00\x11</span><span class="s1">D</span><span class="se">\x01</span><span class="s1">%</span><span class="se">\xb2</span><span class="s1">UUB</span><span class="se">\xa9</span><span class="s1">h</span><span class="se">\x81</span><span class="s1">@</span><span class="se">\xa5</span><span class="s1">kkn</span><span class="se">\xbf\xf6\xaa\xd5\xbf</span><span class="s1">EJ@</span><span class="se">\x11</span><span class="s1">H</span><span class="se">\x16\xd9</span><span class="s1">Un</span><span class="se">\x89</span><span class="s1">%T$(</span><span class="se">\x15\xae\xdb\xbb\x7f</span><span class="s1">[[V</span><span class="se">\xcf\x00\x10\x05\x04\x00</span><span class="s1">[l</span><span class="se">\xaa\xb5</span><span class="s1">D</span><span class="se">\x9a\xaa\x90\x82\xa2\xb5\xbc\xed\xfb\xed\xad</span><span class="s1">j</span><span class="se">\xbf</span><span class="s1">*</span><span class="se">\x82\x90</span><span class="s1">P$*</span><span class="se">\xb5\x1a</span><span class="s1">O"</span><span class="se">\xa5</span><span class="s1">TD</span><span class="se">\x10\x0b</span><span class="s1">Z</span><span class="se">\xfb\xfd\xff</span><span class="s1">Uj</span><span class="se">\xad</span><span class="s1">O</span><span class="se">\x00</span><span class="s1">(</span><span class="se">\x01\x01\x01</span><span class="s1">D</span><span class="se">\xac\xab</span><span class="s1">)</span><span class="se">\x88\x9a\x82\x12</span><span class="s1">D</span><span class="se">\xa2\xd7\x7f\xff\xff\xdb</span><span class="s1">Z</span><span class="se">\xb6\xbf</span><span class="s1">I</span><span class="se">\x02</span><span class="s1">H</span><span class="se">\x10</span><span class="s1">$</span><span class="se">\xb2\xb5</span><span class="s1">UU"JP</span><span class="se">\x81\x00\x05</span><span class="s1">]</span><span class="se">\xdf\xff\xfd</span><span class="s1">j</span><span class="se">\xaa\xca\xaf\x00</span><span class="s1">P</span><span class="se">\x02</span><span class="s1">B</span><span class="se">\x02\xad</span><span class="s1">T</span><span class="se">\xaa\x8a\x88\xaa\x84</span><span class="s1">("</span><span class="se">\x12\xab</span><span class="s1">{</span><span class="se">\xef\xff\xab</span><span class="s1">mU_)</span><span class="se">\x05</span><span class="s1">P</span><span class="se">\x00</span><span class="s1">IV</span><span class="se">\xea\xaa\xa5</span><span class="s1">B</span><span class="se">\x15\x01\x05\x08</span><span class="s1">C</span><span class="se">\xd6\xd6\xbf\xfa\xed\xaa\xaa\xbf\x00</span><span class="s1">@</span><span class="se">\x02</span><span class="s1">H</span><span class="se">\x12</span><span class="s1">Z</span><span class="se">\xae</span><span class="s1">T</span><span class="se">\x15\xa9</span><span class="s1">UP @</span><span class="se">\n\xba\xad</span><span class="s1">_</span><span class="se">\xfd</span><span class="s1">UT</span><span class="se">\xa5\xcf</span><span class="s1">I</span><span class="se">\x11\x08\x01</span><span class="s1">A+uJ</span><span class="se">\xaa\x92</span><span class="s1">*</span><span class="se">\x04\x89\x04\x85\xd5\xb6</span><span class="s1">%</span><span class="se">\xb6\xdb</span><span class="s1">j</span><span class="se">\xb6</span><span class="s1">_</span><span class="se">\x00\x04</span><span class="s1"> </span><span class="se">\x84</span><span class="s1">TJ</span><span class="se">\xaa\xa8</span><span class="s1">KI</span><span class="se">\x11\x90</span><span class="s1"> </span><span class="se">\x10\x05</span><span class="s1">^</span><span class="se">\xda\x96\xfb</span><span class="s1">m</span><span class="se">\xaa\xd5</span><span class="s1">_$@</span><span class="se">\x02\x11</span><span class="s1">I%</span><span class="se">\xb6\xa5\x05</span><span class="s1">T</span><span class="se">\xac\x82\x92\x01\x15\xab\xad</span><span class="s1">Co</span><span class="se">\xb6\xdb</span><span class="s1">U_</span><span class="se">\x01\x02</span><span class="s1">H</span><span class="se">\x02\xa4\x95</span><span class="s1">Z</span><span class="se">\x90\xa8\x92\x02</span><span class="s1">H$@</span><span class="se">\x06\xde\xb5</span><span class="s1">(</span><span class="se">\xfa\xdb</span><span class="s1">mUo$</span><span class="se">\x10\x00</span><span class="s1">A*%mJ"IU"@</span><span class="se">\x08</span><span class="s1">Kk</span><span class="se">\\\x81</span><span class="s1">_u</span><span class="se">\xb5</span><span class="s1">V</span><span class="se">\xaf\x00</span><span class="s1">B"</span><span class="se">\x04</span><span class="s1">IJ</span><span class="se">\xab</span><span class="s1">$</span><span class="se">\x89</span><span class="s1">U%D*</span><span class="se">\x81\n\xb6\xd5</span><span class="s1">T</span><span class="se">\xe9\xde\xd6\xab\x7f</span><span class="s1">H</span><span class="se">\x00\x00\x00</span><span class="s1">$)Z</span><span class="se">\x88</span><span class="s1">%J</span><span class="se">\x92</span><span class="s1">!</span><span class="se">\x12</span><span class="s1"> </span><span class="se">\r\xab</span><span class="s1">Z#V</span><span class="se">\xb5\xb5</span><span class="s1">Z</span><span class="se">\x9f\x01\x12</span><span class="s1">H</span><span class="se">\x11\x15\xa5</span><span class="s1">mB</span><span class="se">\x92\xaa</span><span class="s1">J</span><span class="se">\x90</span><span class="s1">H</span><span class="se">\x84</span><span class="s1">+]UMZ</span><span class="se">\xdb</span><span class="s1">U</span><span class="se">\xaa\xdf</span><span class="s1">D</span><span class="se">\x00\x00</span><span class="s1">@D</span><span class="se">\x95</span><span class="s1">U *UQ%</span><span class="se">\x04\x10\x15\xa5</span><span class="s1">U%</span><span class="se">\xea</span><span class="s1">m</span><span class="se">\xaa\xd5</span><span class="s1">_</span><span class="se">\x10</span><span class="s1">D</span><span class="se">\x01\x02\x02\xaa\xab\x89\x15</span><span class="s1">B</span><span class="se">\x84\x00</span><span class="s1">"</span><span class="se">\x81\x15</span><span class="s1">U$</span><span class="se">\x9b</span><span class="s1">[V</span><span class="se">\xaf</span><span class="s1">*</span><span class="se">\xaf\x00\x00\x90\x00\x92</span><span class="s1">UU@</span><span class="se">\x8a</span><span class="s1">*</span><span class="se">\xa2\xa8\x08</span><span class="s1">HV</span><span class="se">\xa0\x89</span><span class="s1">-</span><span class="se">\xaa\xbb</span><span class="s1">t</span><span class="se">\xaa\xaf</span><span class="s1">D</span><span class="se">\x90\x00\n</span><span class="s1">)UJ</span><span class="se">\xaa</span><span class="s1">!QJ</span><span class="se">\x01</span><span class="s1"> </span><span class="se">\x00\x1f\xde\xd6\xf6\xb5</span><span class="s1">mV</span><span class="se">\xa4\x9f\x10\x02\x00</span><span class="s1"> </span><span class="se">\x85</span><span class="si">%%</span><span class="s1">@</span><span class="se">\x95\x08</span><span class="s1">$</span><span class="se">\xa0\n</span><span class="s1">D</span><span class="se">\x8b</span><span class="s1">e</span><span class="se">\xb5\xaa\xdb\xb6\xb5</span><span class="s1">UO</span><span class="se">\x00\x00\x02\x00</span><span class="s1">BE</span><span class="se">\n\xb5</span><span class="s1">$</span><span class="se">\xb6\x92</span><span class="s1">I"</span><span class="se">\x00</span><span class="s1">&gt;</span><span class="se">\xbf\xfb</span><span class="s1">Z</span><span class="se">\xae\xda\xdb</span><span class="s1">j_</span><span class="se">\x02</span><span class="s1">H</span><span class="se">\x08\x89\x11</span><span class="s1">%</span><span class="se">\xc2\xd4\x92\xbb</span><span class="s1">U</span><span class="se">\x00</span><span class="s1">E)</span><span class="se">\x15\xd6\xde\xd5</span><span class="s1">wj</span><span class="se">\xad\xb5\xaf</span><span class="s1">H</span><span class="se">\x00</span><span class="s1">! D</span><span class="se">\x95</span><span class="s1">1*R</span><span class="se">\xf7\xa9</span><span class="s1">D</span><span class="se">\x12\x80</span><span class="s1">W{</span><span class="se">\xf6\xab\xda\xbb</span><span class="s1">v</span><span class="se">\xad\x7f\x00\x00\x04\xa4\x92</span><span class="s1">EUUI9</span><span class="se">\xed</span><span class="s1">@</span><span class="se">\x84\t</span><span class="s1">*</span><span class="se">\xaf</span><span class="s1">]V</span><span class="se">\xbf\xd5\xab</span><span class="s1">V</span><span class="se">\xaf\x02</span><span class="s1">D</span><span class="se">\xa5</span><span class="s1">QU*</span><span class="se">\xad</span><span class="s1">j</span><span class="se">\xe4\xf7\xb5</span><span class="s1"> )@+</span><span class="se">\x7f\xf7\xbd\xd5</span><span class="s1">v</span><span class="se">\xdd\xdb\xdf</span><span class="s1"> </span><span class="se">\x00\x12\xa4</span><span class="s1">*</span><span class="se">\xa9</span><span class="s1">U</span><span class="se">\xb6\xb2\x1b</span><span class="s1">*</span><span class="se">\x89\x02\x12</span><span class="s1">Z</span><span class="se">\xff\xfd\xeb</span><span class="s1">m</span><span class="se">\xd5\xb7</span><span class="s1">u</span><span class="se">\x7f\x00\x01</span><span class="s1">E</span><span class="se">\x07\x85</span><span class="s1">UU[T</span><span class="se">\xa7</span><span class="s1">{@</span><span class="se">\x08\x00</span><span class="s1">V</span><span class="se">\xbd\xef</span><span class="s1">v</span><span class="se">\xdb</span><span class="s1">k}</span><span class="se">\xde\xdf\t\x14</span><span class="s1">P</span><span class="se">\xa9</span><span class="s1">qUK</span><span class="se">\xad\xe9\x10\xb5</span><span class="s1">P</span><span class="se">\x80\x92</span><span class="s1">_</span><span class="se">\xef\xfb\xaf</span><span class="s1">w</span><span class="se">\xd7\xdf\xfb\xbf</span><span class="s1"> </span><span class="se">\x02\x8a</span><span class="s1">E</span><span class="se">\xaa</span><span class="s1">V</span><span class="se">\xaa\xeb</span><span class="s1">tDR</span><span class="se">\x82\x10\x00\xbb\xbf\xdd</span><span class="s1">{</span><span class="se">\xad</span><span class="s1">ov</span><span class="se">\xfe\xff\x00\t</span><span class="s1">i</span><span class="se">\x02</span><span class="s1">T</span><span class="se">\x9a\xab</span><span class="s1">[</span><span class="se">\xaa\x11\n\xa0\x02\x94</span><span class="s1">n</span><span class="se">\xff\xb7\xad\x7f\xed\xff\xdb\xbf\x05</span><span class="s1">$</span><span class="se">\x95</span><span class="s1">(</span><span class="se">\x92</span><span class="s1">*</span><span class="se">\xd5</span><span class="s1">v</span><span class="se">\xf5</span><span class="s1">@R</span><span class="se">\x88</span><span class="s1">@</span><span class="se">\x01</span><span class="s1">;</span><span class="se">\xfe\xed\xfb\xab\xd7\xf6\xff\x7f\x00\x05</span><span class="s1">J</span><span class="se">\xa2\x08\x8e\xaa\xbb</span><span class="s1">Z</span><span class="se">\x14\x84</span><span class="s1">@</span><span class="se">\x08</span><span class="s1">Ho{</span><span class="se">\xbb</span><span class="s1">]</span><span class="se">\xff</span><span class="s1">o</span><span class="se">\xdf\xff\xff\x01</span><span class="s1">4</span><span class="se">\x89\x08\xa2</span><span class="s1">Su</span><span class="se">\xad\xea\xa0</span><span class="s1">"</span><span class="se">\xa1\x02\x02</span><span class="s1">_</span><span class="se">\xac\xef\xf7\xaf\xdf</span><span class="s1">{</span><span class="se">\xfb\x7f\x10</span><span class="s1">B  </span><span class="se">\t</span><span class="s1">E</span><span class="se">\xae\xab</span><span class="s1">]</span><span class="se">\n\x8a\x84</span><span class="s1"> </span><span class="se">\x90\xfd</span><span class="s1">u</span><span class="se">\xfd\xb6\xfd\xd7\xff</span><span class="s1">o</span><span class="se">\xdf\x01\x08\x04\x05</span><span class="s1">U*</span><span class="se">\xb5\xad\xea\xa0</span><span class="s1">%P</span><span class="se">\x02\x04\x7f\xd6\xdf\xf7\xff\xaf\xed\xff\x7f\x00\x00\x11</span><span class="s1">Q*</span><span class="se">\xd2\xd6\xd5</span><span class="s1">u</span><span class="se">\x15</span><span class="s1">K</span><span class="se">\xa0\x88</span><span class="s1">A^</span><span class="se">\xb9</span><span class="s1">{</span><span class="se">\xef\xef\xdd\xb7\xff\xff\x08\x01</span><span class="s1">B*</span><span class="se">\xad</span><span class="s1">U[u</span><span class="se">\xad</span><span class="s1">T</span><span class="se">\x91</span><span class="s1">J</span><span class="se">\x00\x14</span><span class="s1">6</span><span class="se">\xeb\xff\xb6\xbd\xaf\xdf\xfe\xff\x01</span><span class="s1">(</span><span class="se">\x14\xa5</span><span class="s1">U</span><span class="se">\xa9</span><span class="s1">m</span><span class="se">\xad</span><span class="s1">j</span><span class="se">\xda</span><span class="s1">D</span><span class="se">\xa0</span><span class="s1">"A[l</span><span class="se">\xef\xfb\xef</span><span class="s1">U</span><span class="se">\xef</span><span class="s1">_</span><span class="se">\xdf</span><span class="s1"> </span><span class="se">\x05</span><span class="s1">J</span><span class="se">\x95</span><span class="s1">UT</span><span class="se">\xb5</span><span class="s1">v</span><span class="se">\xb5</span><span class="s1">U)U</span><span class="se">\x00\x08\n\xf5\xfe\xeb</span><span class="s1">}</span><span class="se">\xaf</span><span class="s1">]</span><span class="se">\xbf\x7f\n\xa9</span><span class="s1">)j</span><span class="se">\xaa\xaa\xd6\xab\xaa\xaa\x84\xd4\x92\x82</span><span class="s1">E</span><span class="se">\xaa\xfb\xe9\xab</span><span class="s1">u</span><span class="se">\xfa\xbf\xff</span><span class="s1">@</span><span class="se">\x92\xaa\xad</span><span class="s1">j</span><span class="se">\xd2</span><span class="s1">[</span><span class="se">\xdd</span><span class="s1">U</span><span class="se">\x14\xa9\xb5</span><span class="s1">@(</span><span class="se">\x12\xf3\xff\xaa\xb6\xab</span><span class="s1">N</span><span class="se">\xbd\xff</span><span class="s1">*JUU</span><span class="se">\xad</span><span class="s1">Ymk</span><span class="se">\xb4\xab</span><span class="s1">R</span><span class="se">\xdd</span><span class="s1">$</span><span class="se">\x81</span><span class="s1">B</span><span class="se">\xaa\xee\xfa\xad</span><span class="s1">u%</span><span class="se">\x7f\xdf\x95</span><span class="s1">UU</span><span class="se">\xaa\xb6\xaa\xaa\xad</span><span class="s1">mUK</span><span class="se">\xb6\x82\x10\x11</span><span class="s1">s</span><span class="se">\xf7</span><span class="s1">U|</span><span class="se">\xb2\xd6\xf7\xff</span><span class="s1">R</span><span class="se">\xaa\xaa\xb6\xd5\xaa</span><span class="s1">]</span><span class="se">\xd5\xb6\x95\xb5\xda\xd0</span><span class="s1">BD</span><span class="se">\x97\xda\xab\xd5</span><span class="s1">y</span><span class="se">\xab\xff</span><span class="s1">oJ</span><span class="se">\xaa\xad</span><span class="s1">UZ</span><span class="se">\xea\xab</span><span class="s1">z</span><span class="se">\xda\xa5</span><span class="s1">W{B</span><span class="se">\x00\x00</span><span class="s1">J</span><span class="se">\xad\xdd</span><span class="s1">z</span><span class="se">\xd6\xfe\xdd\xdf\xaa\xaa\xb5\xab</span><span class="s1">WZ</span><span class="se">\xad</span><span class="s1">WWUU</span><span class="se">\xd4\x88\x92\xa4</span><span class="s1">7</span><span class="se">\xfb\xf7\xaf\xba\x9b\xf7</span><span class="s1">_UUU]j</span><span class="se">\xb5</span><span class="s1">U</span><span class="se">\xaa\xb7\xa9</span><span class="s1">V</span><span class="se">\xe0\x02\x00\x01\x1a</span><span class="s1">J</span><span class="se">\xdd</span><span class="s1">uov</span><span class="se">\xbe\xaf\xaa\xaa\xd6\xaa\xb5</span><span class="s1">Z</span><span class="se">\xae\xfa\xdb\xe9</span><span class="s1">WU </span><span class="se">\x84</span><span class="s1">HK%</span><span class="se">\xea\xaa\x91\xad\xd5\x7f</span><span class="s1">UmZ</span><span class="se">\xd5\xae\xed</span><span class="s1">R</span><span class="se">\x96\xae\xf5</span><span class="s1">) </span><span class="se">\x8a\x10\x00\x14\x96\x95</span><span class="s1">T</span><span class="se">\xaa\xd6\xbf\xbf\xab</span><span class="s1">U</span><span class="se">\xab</span><span class="s1">mkUV</span><span class="se">\xeb</span><span class="s1">[</span><span class="se">\xba\x96\x95</span><span class="s1"> AI</span><span class="se">\n</span><span class="s1">J</span><span class="se">\xa2\xaa</span><span class="s1">WSUoUV</span><span class="se">\xb5</span><span class="s1">V</span><span class="se">\xb5\xb6\xab</span><span class="s1">Z</span><span class="se">\xb6\xfd</span><span class="s1">UH</span><span class="se">\n\x00\x00</span><span class="s1">ORJ</span><span class="se">\x92\xa9\xad</span><span class="s1">5</span><span class="se">\xbf\xaa\xaa\xdb\xbb\xde\xdb\xa9</span><span class="s1">m</span><span class="se">\xdb\xf7</span><span class="s1">Ue@</span><span class="se">\t</span><span class="s1">$</span><span class="se">\x01\xaa\x92</span><span class="s1">IV</span><span class="se">\xaa\xda\xcf</span><span class="s1">Z</span><span class="se">\xb5</span><span class="s1">UUR</span><span class="se">\xad</span><span class="s1">U</span><span class="se">\xaa\xb5\xde\xd5</span><span class="s1">R(</span><span class="se">\x80\x00\x95\xfc</span><span class="s1">I*</span><span class="se">\xa2\xd6</span><span class="s1">m</span><span class="se">\xaf\xab</span><span class="s1">V</span><span class="se">\xad</span><span class="s1">j</span><span class="se">\xbd\xb5\xaa\xd6\xd5\x7f\xea\xa8\x92\x04\x92\x02\xdf</span><span class="s1">$</span><span class="se">\xaa</span><span class="s1">U[V</span><span class="se">\xdf</span><span class="s1">UZ</span><span class="se">\xd5\xad\xd6\xda\xd5</span><span class="s1">kt</span><span class="se">\xfa</span><span class="s1">UE@ </span><span class="se">\x00</span><span class="s1">!</span><span class="se">\xfe\xd2</span><span class="s1">UK</span><span class="se">\xac\xbb</span><span class="s1">_</span><span class="se">\xaa\xd5</span><span class="s1">z</span><span class="se">\xb6\xaa\xaf</span><span class="s1">j</span><span class="se">\xbd\xaa</span><span class="s1">?</span><span class="se">\x95\x14</span><span class="s1">"</span><span class="se">\x02</span><span class="s1">H</span><span class="se">\x84\xff</span><span class="s1">m</span><span class="se">\x95</span><span class="s1">-UUOUV</span><span class="se">\xad\xd5</span><span class="s1">[uZ</span><span class="se">\xaa\xe9</span><span class="s1">N</span><span class="se">\xad\xad\x08\x88\x02\x01</span><span class="s1">[_</span><span class="se">\xaa\xa5\xb5</span><span class="s1">{_</span><span class="se">\xaa\xaa\xa6\xae\xed\xab</span><span class="s1">mWT%</span><span class="se">\xf6\xb4</span><span class="s1">R </span><span class="se">\xa4\x10\xbf</span><span class="s1">V</span><span class="se">\xd5</span><span class="s1">Z</span><span class="se">\xd5\xad</span><span class="s1">oV</span><span class="se">\xb5\xb5</span><span class="s1">kUm</span><span class="se">\xb6\xaa\xd5</span><span class="s1">UJ</span><span class="se">\xd0</span><span class="s1">I</span><span class="se">\x00\x00</span><span class="s1">DU</span><span class="se">\xbf\x7f</span><span class="s1">UUj</span><span class="se">\xbf\xaa\xd5</span><span class="s1">U</span><span class="se">\xb5</span><span class="s1">{</span><span class="se">\xb6\xdb</span><span class="s1">U</span><span class="se">\xaa\x05</span><span class="s1">o%$I</span><span class="se">\x12\x01\x7f\xd6\xff\xea\xaa\xb5</span><span class="s1">OU*</span><span class="se">\xaa\xad\xad</span><span class="s1">m</span><span class="se">\xb6\xab\xd1</span><span class="s1">R</span><span class="se">\xd4\x80\xaa\x00</span><span class="s1">@</span><span class="se">\x10</span><span class="s1">-k</span><span class="se">\xff\xf5</span><span class="s1">U</span><span class="se">\xaa\x7f\xaa\xd5</span><span class="s1">[V</span><span class="se">\xab\xb6\xdb\xdd</span><span class="s1">T</span><span class="se">\t</span><span class="s1">RRQI</span><span class="se">\x08\x84\x9f\xd5\xff\xff\xaa</span><span class="s1">UOkV</span><span class="se">\xd5</span><span class="s1">j</span><span class="se">\xdd</span><span class="s1">[mkR</span><span class="se">\xa2\xd9</span><span class="s1">H$</span><span class="se">\x00\x02\x00\x17\xff\xff\xff\xfa\x8a\xbf\xad</span><span class="s1">Z</span><span class="se">\xad\xb7</span><span class="s1">km</span><span class="se">\xb7\xb6\xc9\x11</span><span class="s1">eG</span><span class="se">\n\xa4</span><span class="s1">H$</span><span class="se">\x9d\xef\xff</span><span class="s1">~</span><span class="se">\xff</span><span class="s1">aOUUv</span><span class="se">\xda\xdd\xb6\xda\xdd\xa8\x88\xaa</span><span class="s1">Z</span><span class="se">\x80\x01\x00\x00\x07\x7f\xff\xff\xfd\xdc</span><span class="s1">/</span><span class="se">\xaa\xab\xab</span><span class="s1">m</span><span class="se">\xb6\xdb</span><span class="s1">m</span><span class="se">\xb7</span><span class="s1">U"-</span><span class="se">\x0e\xa5</span><span class="s1">$!"M</span><span class="se">\xdd\xff\xef\xef\xff\x9f</span><span class="s1">U</span><span class="se">\xb5</span><span class="s1">Z</span><span class="se">\xaa\xd5</span><span class="s1">m</span><span class="se">\xb6\xda\xd2\t</span><span class="s1">FE@</span><span class="se">\x00\x04\x08\x07\xff\xff\xfd\xbf\xff\xef\xb6\xad</span><span class="s1">m</span><span class="se">\xb7</span><span class="s1">o</span><span class="se">\xb6\xdb</span><span class="s1">oT</span><span class="se">\xa2\x14\x12\xa8\x91</span><span class="s1"> </span><span class="se">\x00\x92\xab\x7f\xff\xff\xf7\xff\xaa\xb5\xaa\xda\xb4\xdb</span><span class="s1">m</span><span class="se">\xb9\xa2\x08\xa9\x00\xd2\x04\x01</span><span class="s1">"</span><span class="se">\x02\xff\xf7\xff\x7f\x7f\xff\xb6\xd6\xb6\xad\xdb</span><span class="s1">m</span><span class="se">\xb6\xee\xd8\xa2</span><span class="s1">4</span><span class="se">\n</span><span class="s1">i@</span><span class="se">\x90\x08</span><span class="s1">%</span><span class="se">\xb7\xff\xff\xfb\xff\x7f\xdb</span><span class="s1">[kj</span><span class="se">\xad\xb6\xdb</span><span class="s1">U</span><span class="se">\xa5\x08</span><span class="s1">9 *</span><span class="se">\xa4\x02</span><span class="s1"> </span><span class="se">\x82\xfd\xbe\xfd\xef\xed\xff</span><span class="s1">Uj</span><span class="se">\xdd\xb6\xd6\xdb</span><span class="s1">m</span><span class="se">\xf6\xd8</span><span class="s1">A</span><span class="se">\x14\x81\x17\x00\x88\x00\x03\xaf\xfb\xf7\xff\xbf\xef\xad\xad</span><span class="s1">j</span><span class="se">\xd5</span><span class="s1">uj</span><span class="se">\xb6\x9b</span><span class="s1">j</span><span class="se">\x10\x8a\x05</span><span class="s1">%H </span><span class="se">\x84</span><span class="s1"> </span><span class="se">\xd4\xbf\xff\xff\xff\x7f\xb5</span><span class="s1">U</span><span class="se">\xaf</span><span class="s1">[</span><span class="se">\xae\xad\xdb</span><span class="s1">j</span><span class="se">\xd5</span><span class="s1">D*</span><span class="se">\x80</span><span class="s1">H</span><span class="se">\x02\x00\x10\x8b</span><span class="s1">U</span><span class="se">\xaf\xbf\xbf\xfd\xff\xaa\xda\xa9\xb6\xb5\xd6\xb6\xd5</span><span class="s1">i</span><span class="se">\x00\x80\x00\x05</span><span class="s1"> </span><span class="se">\x84</span><span class="s1">@</span><span class="se">\x00\xaa\xb5\xfe\xf6\xef</span><span class="s1">_</span><span class="se">\xb6\xab</span><span class="s1">V</span><span class="se">\xdb</span><span class="s1">Z</span><span class="se">\xbb\xdb</span><span class="s1">i</span><span class="se">\xb4\x90\x14</span><span class="s1">I(</span><span class="se">\x88</span><span class="s1">!</span><span class="se">\x02\x05\xaa\xdf</span><span class="s1">o</span><span class="se">\xff\xfd\xbf</span><span class="s1">UZ</span><span class="se">\xda\xad\xef</span><span class="s1">mm</span><span class="se">\xa5</span><span class="s1">U</span><span class="se">\x02</span><span class="s1">A</span><span class="se">\x00</span><span class="s1">E</span><span class="se">\x02\x00\x08</span><span class="s1">QUU</span><span class="se">\xbf\xff\xff\xff\xaa\xd5</span><span class="s1">m</span><span class="se">\xb5</span><span class="s1">)</span><span class="se">\xb5\xb6\xd2\xea</span><span class="s1"> </span><span class="se">\x00\x12</span><span class="s1">" </span><span class="se">\x88</span><span class="s1"> </span><span class="se">\x02\xae\xda\xdb\xdd\xdf\xff</span><span class="s1">[V</span><span class="se">\xaa\xd6\xee\xd6\xdb</span><span class="s1">UX</span><span class="se">\x82\x92</span><span class="s1">@</span><span class="se">\x94\x88</span><span class="s1">!</span><span class="se">\x01\x05</span><span class="s1">Skn</span><span class="se">\xff\xfd\xbf\xaa\xaa\xd6\xb5</span><span class="s1">U[UB</span><span class="se">\xea\x08\x00\x08\t\x02\x00\x00</span><span class="s1">!Z</span><span class="se">\xb5</span><span class="s1">U</span><span class="se">\xab\xff\xff</span><span class="s1">U[[[</span><span class="se">\xbb</span><span class="s1">m</span><span class="se">\xbb</span><span class="s1">UU!"</span><span class="se">\x92</span><span class="s1">DP</span><span class="se">\x84</span><span class="s1">H</span><span class="se">\x85</span><span class="s1">UV</span><span class="se">\xb6\xaf\xf7\xef\xaa\xd4\xb5\xed</span><span class="s1">m</span><span class="se">\xb6\xd5</span><span class="s1">J</span><span class="se">\xe8\x00\x08\x00</span><span class="s1">"</span><span class="se">\x02</span><span class="s1"> </span><span class="se">\x00\t</span><span class="s1">*</span><span class="se">\xaa\xd5</span><span class="s1">U</span><span class="se">\xbf\x7f\x15</span><span class="s1">V</span><span class="se">\xd6</span><span class="s1">V</span><span class="se">\xd6\xd5</span><span class="s1">n</span><span class="se">\xa5</span><span class="s1">UJAQ</span><span class="se">\x14\x90\x01\x02</span><span class="s1">"</span><span class="se">\xaa\x95</span><span class="s1">Uk</span><span class="se">\xfa\xff\x85</span><span class="s1">Z</span><span class="se">\xab\xab</span><span class="s1">k[</span><span class="se">\xb5\xa9</span><span class="s1">h</span><span class="se">\x00\x10\n</span><span class="s1">JD</span><span class="se">\x88\x10\n\xa5</span><span class="s1">J</span><span class="se">\xaa\xaa\xd5</span><span class="s1">OR</span><span class="se">\xa5</span><span class="s1">Z</span><span class="se">\xb5</span><span class="s1">]</span><span class="se">\xb6\xde\xad\xaa</span><span class="s1">I</span><span class="se">\x04</span><span class="s1">$</span><span class="se">\x11\x10</span><span class="s1"> </span><span class="se">\x01</span><span class="s1">$</span><span class="se">\x90</span><span class="s1">%U</span><span class="se">\xaa\xaf\x7f</span><span class="s1">@</span><span class="se">\xaa\xaa\xdb</span><span class="s1">j</span><span class="se">\xdb</span><span class="s1">kR</span><span class="se">\xa8\x00</span><span class="s1"> </span><span class="se">\x8a\x88</span><span class="s1">B</span><span class="se">\x00\x84\x02</span><span class="s1">%</span><span class="se">\x12\x96\xad</span><span class="s1">R</span><span class="se">\xaf</span><span class="s1">ZU</span><span class="se">\xb6\xad\xb7</span><span class="s1">m</span><span class="se">\xb5\xad</span><span class="s1">eT</span><span class="se">\x82\x02</span><span class="s1">E</span><span class="se">\x08\x82\x00</span><span class="s1">I</span><span class="se">\x08</span><span class="s1">HUU</span><span class="se">\xad\xaf</span><span class="s1">T</span><span class="se">\x15</span><span class="s1">U</span><span class="se">\xb6\xaa\xb6\xae\xab\xa8\x00\x00</span><span class="s1">)( </span><span class="se">\x10\x10\x10\xa0\x0b</span><span class="s1">Uj</span><span class="se">\xaa\xbf\x92\x8a\xad</span><span class="s1">Z</span><span class="se">\xdd\xdb</span><span class="s1">wl</span><span class="se">\xa5</span><span class="s1">$</span><span class="se">\x08\x84\x82\x82</span><span class="s1">@</span><span class="se">\x02</span><span class="s1">D</span><span class="se">\x02\xb5</span><span class="s1">U</span><span class="se">\xaa\xd6\xaf</span><span class="s1">UR</span><span class="se">\xb6\xed</span><span class="s1">km</span><span class="se">\xad\xab</span><span class="s1">h</span><span class="se">\x02</span><span class="s1">@</span><span class="se">\x12</span><span class="s1">(</span><span class="se">\x10\x00</span><span class="s1">@</span><span class="se">\x00</span><span class="s1">)Z</span><span class="se">\xaa\xb7</span><span class="s1">Z</span><span class="se">\xdf</span><span class="s1">UB</span><span class="se">\xab</span><span class="s1">W</span><span class="se">\xb6\xb6\xf6\xaa\xa4\x88\x02</span><span class="s1">E</span><span class="se">\x05</span><span class="s1">D</span><span class="se">\x84\x01\x10\xaf</span><span class="s1">m</span><span class="se">\xda\x95</span><span class="s1">k_</span><span class="se">\xaa\xa8\xaa\xfa\xdb</span><span class="s1">m</span><span class="se">\xad\xd5</span><span class="s1">r </span><span class="se">\x08\x10</span><span class="s1">P</span><span class="se">\x90\x00\x08\x05</span><span class="s1">U</span><span class="se">\xaa\xb5</span><span class="s1">j</span><span class="se">\xaa\xaf</span><span class="s1">E_UWm</span><span class="se">\xb6\xdb</span><span class="s1">v</span><span class="se">\xa9\x02</span><span class="s1">@</span><span class="se">\x85\n</span><span class="s1">B </span><span class="se">\x80\x91</span><span class="s1">Z</span><span class="se">\xb5</span><span class="s1">Z</span><span class="se">\xaa\xaa\xaf\xbf\xfb\xab</span><span class="s1">m</span><span class="se">\xdb</span><span class="s1">mn</span><span class="se">\xda\xed</span><span class="s1">@</span><span class="se">\x02</span><span class="s1"> D(</span><span class="se">\x82\x04\n\xab</span><span class="s1">UUUU_</span><span class="se">\xfa\xaa\n\xbb</span><span class="s1">}</span><span class="se">\xb7\xb7\xab</span><span class="s1">Z</span><span class="se">\x10\x88\x14\x91\x00\x00\x10\xad</span><span class="s1">U</span><span class="se">\xb5</span><span class="s1">V</span><span class="se">\xaa</span><span class="s1">UO</span><span class="se">\x8a\x91</span><span class="s1">U</span><span class="se">\xaf\xb6\xda\xda\xf5</span><span class="s1">u</span><span class="se">\x82\x00\x80\x00\xa4</span><span class="s1"> </span><span class="se">\x02\xaa\xae\xd5</span><span class="s1">)QJ_d</span><span class="se">\xae\xfe\xda\xef</span><span class="s1">mo</span><span class="se">\xaa\xd4</span><span class="s1">@</span><span class="se">\x10</span><span class="s1">*J</span><span class="se">\x11\x02</span><span class="s1">%USZ</span><span class="se">\x95</span><span class="s1">U)O[</span><span class="se">\xff\xa9</span><span class="s1">W</span><span class="se">\xbd\xdb\xb5\xb5</span><span class="s1">kPB</span><span class="se">\x80\x10\x80\x08\x05\xaa\xb5</span><span class="s1">UUT</span><span class="se">\x95</span><span class="s1">/</span><span class="se">\xfe\xa9</span><span class="s1">P:</span><span class="se">\xf7\xed</span><span class="s1">[j</span><span class="se">\xbd\x02\x00</span><span class="s1">"</span><span class="se">\xa5</span><span class="s1">H@</span><span class="se">\x15</span><span class="s1">mUV</span><span class="se">\xa2\x95</span><span class="s1">H</span><span class="se">\xaf\x12\xaa\xaa\x8d\xfe\xf6\xed\xd5\xd5</span><span class="s1">h </span><span class="se">\x80</span><span class="s1">D</span><span class="se">\x01\x00\x8a\xaa\xaa\xa9</span><span class="s1">Y$</span><span class="se">\xa5\x1f</span><span class="s1">J</span><span class="se">\xaa\xad\xf6\xaf\xbb</span><span class="s1">V</span><span class="se">\xd5</span><span class="s1">j</span><span class="se">\x80\x82\x12\x92\xa0\x12\x05\xa5</span><span class="s1">RUT</span><span class="se">\x92\x92</span><span class="s1">O</span><span class="se">\xb4\xab\xff\xfd\xbb\xec\x8b</span><span class="s1">j</span><span class="se">\xaa\xa8\x00</span><span class="s1">A*</span><span class="se">\x04</span><span class="s1">@</span><span class="se">\x15</span><span class="s1">T</span><span class="se">\x95</span><span class="s1">UBI)_</span><span class="se">\xd7\xff\x7f\xff\xd6\xba</span><span class="s1">U</span><span class="se">\xb5</span><span class="s1">jP</span><span class="se">\x08\x04\x85</span><span class="s1">P</span><span class="se">\x00</span><span class="s1">B</span><span class="se">\xaa</span><span class="s1">H</span><span class="se">\x92</span><span class="s1">Y$</span><span class="se">\x94\x8f\xfb\xff\xfb\xff\x7f\xfa\x92\xd4\xb5\x04</span><span class="s1"> </span><span class="se">\x11</span><span class="s1">i</span><span class="se">\x01\x12\t</span><span class="s1">QRI$</span><span class="se">\x92</span><span class="s1">B_</span><span class="se">\xee\xff\xff\xfa\xd5\xa4</span><span class="s1">Kj</span><span class="se">\xaa\xa0\x81\x01</span><span class="s1">*</span><span class="se">\x90</span><span class="s1">@"</span><span class="se">\xad</span><span class="s1">IT</span><span class="se">\x92</span><span class="s1">I)/</span><span class="se">\xbb\xbf\xff\xff</span><span class="s1">}h</span><span class="se">\x01\xb5</span><span class="s1">TH</span><span class="se">\x00\x05\xaa</span><span class="s1">"</span><span class="se">\x01\x00\x90\x92\x02</span><span class="s1">I$</span><span class="se">\x94\x8f\xff\xff\xff\xfd\xfe\xa1\x15</span><span class="s1">Uj</span><span class="se">\x80\x08</span><span class="s1">@</span><span class="se">\xaa\x80\x10\n</span><span class="s1">E$</span><span class="se">\xa9</span><span class="s1">$</span><span class="se">\x92</span><span class="s1">B_</span><span class="se">\xff\x7f\xff\xef\xff</span><span class="s1">TE</span><span class="se">\xea\xaa\x12</span><span class="s1">!</span><span class="se">\x0b</span><span class="s1">R)</span><span class="se">\x02</span><span class="s1">A</span><span class="se">\x10\x00\x14\x92</span><span class="s1">I)/</span><span class="se">\xdf\xef\xff\xff\xff\xaa\xb6\xb5</span><span class="s1">U@</span><span class="se">\x04\x02\xaa\x80</span><span class="s1">@</span><span class="se">\x04\x00\x81\x01</span><span class="s1">)$D</span><span class="se">\x8f\xff\xbf\xff\xff\xff\xeb</span><span class="s1">[T</span><span class="se">\xa9\x00\x10</span><span class="s1">E$H</span><span class="se">\x08</span><span class="s1"> </span><span class="se">\x00\x08</span><span class="s1">PD</span><span class="se">\x89</span><span class="s1">*_</span><span class="se">\xbf\xf7\xff\xff\xff\xfd\xed\xda\xb4\x92</span><span class="s1">D</span><span class="se">\x95</span><span class="s1">R</span><span class="se">\x82\x01\x00\x84\x00\x02\x12</span><span class="s1">UU</span><span class="se">\xaf\xfe\xfd\xef\xff\xff\xea\x92</span><span class="s1">mU</span><span class="se">\x00\t\x06\x89</span><span class="s1"> @</span><span class="se">\x12\x00</span><span class="s1"> </span><span class="se">\x00\x05</span><span class="s1">UU_'</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>IMG_1028_bw.py</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="n">width</span> <span class="o">=</span> <span class="mi">184</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="n">height</span> <span class="o">=</span> <span class="mi">135</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="n">img_bw</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="sa">b</span><span class="s1">'</span><span class="se">\x01\x82</span><span class="s1">{</span><span class="se">\xf1\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\xc0\x02\x08\x7f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00</span><span class="s1">`</span><span class="se">\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00</span><span class="s1"> </span><span class="se">\x08\x06\x0f\xff\xff\xff\xff\xff\xff\xff\xff\xfe</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x10\x00\xcf\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\x9f\xff\xff\xff\xff\xff\xff\xff\xff\x80\x08\x00</span><span class="s1">O</span><span class="se">\x01\xff\xf3\xff\xff\xff\xff\xff\xff\xff\xbf\xff\xff\xff\xff\xff\xff\xff\xff\xc0\x04\x00</span><span class="s1">?</span><span class="se">\x81\xe7\x81\xff\xff\xff\xff\xff\xff\xff\xbf\xff\xff\xff\xff\xff\xff\xff\xff\xc0\x02\x00\x01\x80\xe3\xc3\xef\xff\xff\xff\xff\xff\xff\x9f\xff\xff\xff\xff\xff\xff\xff\xff</span><span class="s1">`</span><span class="se">\x00\x00\x00\xc0</span><span class="s1">q</span><span class="se">\xe3\xf0\xff\xff\xff\xff\xff\xff\x9f\xff\xff\xff\xff\xff\xff\xff\xff</span><span class="s1">0</span><span class="se">\x00\x00\x00\xc0</span><span class="s1">0</span><span class="se">\xff\xfc\x7f\xff\xff\xff\xff\xff\x1f\xff\xff\xff\xff\xff\xff\xff\xff</span><span class="s1">0</span><span class="se">\x00\x00\x07</span><span class="s1">@</span><span class="se">\x00\x7f\xfe\x0f\xff\xff\xff\xff\xff\x0f\xff\xff\xff\xff\xff\xff\xff\xff\x18\x00\x00\x06</span><span class="s1"> </span><span class="se">\x00\x7f\xff\x03\xff\xff\xff\xff\xff\x8f\xff\xff\xff\xff\xff\xff\xff\xff\x0c\x00\x00\x00</span><span class="s1">0</span><span class="se">\x00</span><span class="s1">?</span><span class="se">\xff\x80\x7f\xff\xff\xff\xff\x87\xff\xff\xff\xff\xff\xff\xff\xff\x0e\x00\x00\x00</span><span class="s1">0</span><span class="se">\x00\x07\xff\xc0\x07\xff\xff\xff\xff\xa7\xff\xff\xff\xff\xff\xff\xff\xff\x06\x00\x00\x00\x00\x00\x07\xff\xe0\x00\xff\xff\xf7\xff\xa7\xff\xff\xff\xff\xff\xff\xff\xff\x03\x00\x10\x00\x08\x00\x0f\xff\xf1\xf8\x7f\xff\xf7\xff</span><span class="s1">7</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x01\x00\x00\x00\x04\x00\x1f\xff\xfd\xfc\x1f\xff\xe7\xff</span><span class="s1">7</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00</span><span class="s1">@</span><span class="se">\x00\x7f\xff\xfe\xff\x0f\xff\xe7\xfe</span><span class="s1">7</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00</span><span class="s1">@</span><span class="se">\x00\xff\xff\xff\xff\x8f\xff\xc3\xfe</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x01\xff\xff\xff\xff\xff\xdf\xc1\xfc</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x01\x00\x00\x00\x00\x07\xff\xff\xff\xef\xff\xff\x80\xd0</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x0f\xff\xff\xff\xe7\xff\xfe</span><span class="s1">@`</span><span class="se">\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x1f\xff\xff\xff\xc7\xff\xff\xc0</span><span class="s1">`</span><span class="se">\xf7\xff\xff\xff\xff\xff\xff\xff\xff\x00\x80\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xc7\xff\xff\xfc</span><span class="s1">@w</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x7f\xff\xff\xff\xe7\xff\xff\xfc\x00\'\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\xff\xff\xff\xff\xe7\xff\xff</span><span class="s1">L</span><span class="se">\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x01\xff\xff\xff\xff\xc7\xff\xc8\x0f\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x03\xff\xff\xff\xff\xc3\xff\xc0\x13\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x0f\xff\xff\xff\xff\xf7\xff\xc0</span><span class="s1">"`</span><span class="se">\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\x80</span><span class="s1">,</span><span class="se">\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00</span><span class="s1">{</span><span class="se">\xff\xff\xff\xff\xff\xff\xc0\x08\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x01\xff\xff\xff\xff\xff\xff\xff\xc0</span><span class="s1">P</span><span class="se">\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xc0</span><span class="s1">p</span><span class="se">\x00\x0f\xff\xff\xf7\xff\xff\xff\xff\xff\x00\x00\x00\x07\xff\xff\xff\xff\xff\xff\xff\xc0</span><span class="s1">n</span><span class="se">\x00\x0f\xff\xff\xfb\xff\xff\xff\xff\xff\x00\x00\x00\x03\xff\xff\xff\xfe\xff\xff\xff\xe2</span><span class="s1">|</span><span class="se">\x00\x0f\xff\xff\xf8\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xfe\x7f\xff\xff\xe6\x7f\x00\x0f\xff\xff\xfd\xff\xff\xff\xff\xff\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xef\x7f\xff\xff\xf6\x7f\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xc7</span><span class="s1">?</span><span class="se">\xff\xff\xf0</span><span class="s1">?</span><span class="se">\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x7f\xff\xff\xc0</span><span class="s1">?</span><span class="se">\xff\xf7\xf0\x1f\x80\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x03\xff\xff\xc0</span><span class="s1">?</span><span class="se">\xff\xf7\xb0\x07\xc0</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x01\x07\xff\xff\xe0</span><span class="s1">?</span><span class="se">\xff\xff</span><span class="s1">p</span><span class="se">\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x01</span><span class="s1">?</span><span class="se">\xff\xff\xe0</span><span class="s1">?</span><span class="se">\xff\xff\xf0\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xdf\xf2\xff\xff\xff\xe0\x0e\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xe3\xef\xc7\xff\xff\xff\xff\xe0\x07\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xc7\xff\xe7\xff\xff\xff\xff\xc0</span><span class="s1">g</span><span class="se">\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x03\xc0\xc4\xef\xfb\xff\xff\xff\xff\xc0</span><span class="s1">g</span><span class="se">\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x07\xf0\xff\xff\xff\xff\xff\xfb\xff\xe0</span><span class="s1">?</span><span class="se">\x80\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x7f\xf3\xff\xff\xff\xff\xff\xff\xff\xe0</span><span class="s1">?</span><span class="se">\x80\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\xf7\xe7\xff\xff\xff\xff\xff\xff\xff\xc0\x02\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\xe7\xef\xff\xff\xff\xff\xff\xff\xff\xe0\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x0f\xe3\xef\xff\xff\xff\xff\xfe\xff\xff\xe0\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x07\xff\xcf\xff\xff\xff\xff\xfe\x00\xff\xe0\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x07\xff\xc3\xff\xff\xff\xff\xff\x00\xff\xc0\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x0f\xff\xf9\xff\xff\xff\xff\xff\xc0\x7f\xe0\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x0f\xff\xff\xef\xff\xff\xff\xff\xe0\x1f\xe0\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00</span><span class="s1">?</span><span class="se">\xdf\xe0\x0f\xff\xff\xff\xff\xfc\x1f\xe0\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00</span><span class="s1">?</span><span class="se">\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xfe\x7f\xe0\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xf0\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xf8\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xff\xf8\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\xf8\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\x01\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xc0\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x7f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe0\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe0\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe0\x00\x01\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xc0\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xc0\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x80\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf8\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xfc\x01\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x81\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe3\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe6\x00\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff</span><span class="s1">d</span><span class="se">\x00\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xfc\x00\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf8\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf0\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xc0\x00\x00\x01\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x8e\x00\x00\x01\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xfe</span><span class="s1">?</span><span class="se">\x80\x00\x01\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf8\x7f\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf0\xff\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xbf\xff\xc3\xff\x00\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xdf\xff\xd1\xfe\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xfe\x7f\x80\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xfb\xff\xef\x1f\x00\x00\x00\x1f\xff\xff\xff\xff\xfb\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xd3\xff\xff\x8e</span><span class="s1">@</span><span class="se">\x00\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe7\xff\xff\xc0\x00\x00\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff</span><span class="s1">7</span><span class="se">\xff\x9f\xf0\x00\x00\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x17\xfe\x07\xf8\x00\x00\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff</span><span class="s1">E</span><span class="se">\xfc\x04\xfe\x00\x00\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff</span><span class="s1">,=</span><span class="se">\x00\xff\xc0\x00\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x08</span><span class="s1">?</span><span class="se">\x80\x7f\xc0\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00</span><span class="s1">?</span><span class="se">\x81\xbf\x80\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xc0\xbf\x83\x9f\x80\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xc0\x1f\x00\xcf\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x80\x08\x00</span><span class="s1">o</span><span class="se">\x80\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x80\x00\x00</span><span class="s1">?</span><span class="se">\x80\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x1f\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00</span><span class="s1">o</span><span class="se">\x00\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x7f\x80\x00\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00</span><span class="s1"> </span><span class="se">\x00</span><span class="s1">?</span><span class="se">\xc0\x00\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00</span><span class="s1">/</span><span class="se">\x00\x00\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x1f\x00\x00\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xfe\x00\x00</span><span class="s1">0</span><span class="se">\x1e\x80\x00\x00\x07\xff\xff\xff\xff\xff\xff\xcf\xff\xff\xff\xff\xff\xff\xff\xfe\x00\x00\x1f</span><span class="s1">?</span><span class="se">\xe0\x00\x00\x0f\xff\xff\xff\xff\xff\xff\xf3\xff\xff\xff\xff\xff\xff\xff\xfe\x00\x00\x1f\xff\xa0\x00\x00\x0f\xff\xff\xff\xff\xff\xff\xf1\xff\xff\xff\xff\xff\xff\xff\xfe\x00\x00\x1f\xcf\x80\x00\x00\x0f\xff</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\x7f\xff\xff\xff\xff\xff\xff\xff\x00\x00\x0f\xe4\x00\x00\x00\x1f\xf4\x1f\xff\xff\xff\xff\xff</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xff\x02\x00\x0f\xfe\x00\x00\x00\x1f\x00\x0f\xff\xff\xff\xff\xff\xdf\xff\xff\xff\xff\xff\xff\xfe\x02\x00\x0f\xbf\x80\x00\x00\x00\x01\xff\xff\xff\xff\xff\xff\xe7\xff\xff\xff\xff\xff\xff\xfe\x02\x00\x1f\x82\xc0\x00\x00\x00</span><span class="s1">?</span><span class="se">\xff\xff\xff\xff\xff\xff\xfb\xff\xff\xff\xff\xff\xff\xfc\x00\x00\x0f\x1f\xe0\x00\x00\x00\x7f\xff\xff\xff\xff\xff\xff\xfd\xff\xff\xff\xff\xff\xff\xff\x00\x00\x1e</span><span class="s1">?</span><span class="se">\xf0\x00\x00\x01\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x80\x00</span><span class="s1"> _</span><span class="se">\xf0\x00\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x80\x00\x00\xcf</span><span class="s1">x</span><span class="se">\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\x8f\xff\xff\xff\xff\xff\xff\xc0\x00</span><span class="s1"> </span><span class="se">\x80\x18\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xc0\x00</span><span class="s1"> </span><span class="se">\x00</span><span class="s1">`</span><span class="se">\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe0\x00</span><span class="s1">0</span><span class="se">\x04</span><span class="s1">0</span><span class="se">\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe0\x00</span><span class="s1"> </span><span class="se">\x7f\xc0\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xfe\x7f\xff\xff\xff\xff\xff\xe0\x00\xa1\xff\xc0\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xbf\xff\xff\xff\xff\xff\xf8\x00\x81\xff\xc0\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf8\x00</span><span class="s1">A</span><span class="se">\xff\xc0\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf8\x00\x01\xff\x80\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf0\x00\x03\xff\xc0\x00\x0f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf0\x00\x03\xff\xc0\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf0\x00\x01\xff\xc0\x00\x07\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xfc\x07\xff\xff\xd0\x00\x01\xff\xa0\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xf8\x07\xff\xff\xc0\x00\x03\xff\xc0\x00\x03\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xfd\x7f\xff\xff\xc0\x00\x03\xff\xe0\x00\x03\xc0\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xc0\x00\x07\xff\xa0\x00\x00\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xc0\x08\x07\xff\xe0\x00\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xc0\x1c\x0f\xff\xc0\x00\x00\x00\x00\x00\x1f\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xc0\x0f\xef\xff\xc0\x00\x00\x00\x00\x00\x0f\xff\xff\xff</span><span class="s1">'</span><span class="p">)</span>
</span></code></pre></div>
<p>I got to move all of the files in the same directory and modify the import statements, as importing from files that aren't initiated as packages didn't work.</p>
<p>I got the code from <a href="https://github.com/phoreglad/pico-epaper">this repo</a>.</p>
<h2 id="75-pico-display">7.5" Pico Display</h2>
<p>After wiring the display according to <a href="https://www.waveshare.com/w/upload/8/8d/Pico-ePaper-connect020.jpg">this picture</a>, I ran the following code from <a href="https://github.com/waveshare/Pico_ePaper_Code/tree/main/python">this repo</a> found from <a href="https://www.waveshare.com/wiki/Pico-ePaper-7.5#python:~:text=Open%20the%20Pico_ePaper%2Dxxx.py%20file%20in%20Thonny%20IDE%2C%20then%20run%20the%20current%20script%20(click%20the%20green%20triangle).">this tutorial</a> in Thonny, and it worked!</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/epaper-pico-wiring.jpeg"></p>
<video src="../../../assets/images/stem/disability-forewarning-system/working-epaper.mp4" controls="controls" style="max-width: 730px;">
</video>

<p><strong>7in5_test_2.py</strong></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">SPI</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="kn">import</span> <span class="nn">framebuf</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="kn">import</span> <span class="nn">utime</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="c1"># Display resolution</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="n">EPD_WIDTH</span>       <span class="o">=</span> <span class="mi">800</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="n">EPD_HEIGHT</span>      <span class="o">=</span> <span class="mi">480</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="n">RST_PIN</span>         <span class="o">=</span> <span class="mi">12</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="n">DC_PIN</span>          <span class="o">=</span> <span class="mi">8</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="n">CS_PIN</span>          <span class="o">=</span> <span class="mi">9</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="n">BUSY_PIN</span>        <span class="o">=</span> <span class="mi">13</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="k">class</span> <span class="nc">EPD_7in5</span><span class="p">(</span><span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">):</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">RST_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a>
</span><span id="__span-26-18"><a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">busy_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">BUSY_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">IN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">PULL_UP</span><span class="p">)</span>
</span><span id="__span-26-19"><a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">CS_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-26-20"><a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">EPD_WIDTH</span>
</span><span id="__span-26-21"><a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">EPD_HEIGHT</span>
</span><span id="__span-26-22"><a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a>
</span><span id="__span-26-23"><a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span> <span class="o">=</span> <span class="n">SPI</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-26-24"><a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">baudrate</span><span class="o">=</span><span class="mi">4000_000</span><span class="p">)</span>
</span><span id="__span-26-25"><a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">DC_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-26-26"><a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a>
</span><span id="__span-26-27"><a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="__span-26-28"><a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_HLSB</span><span class="p">)</span>
</span><span id="__span-26-29"><a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span><span id="__span-26-30"><a id="__codelineno-26-30" name="__codelineno-26-30" href="#__codelineno-26-30"></a>
</span><span id="__span-26-31"><a id="__codelineno-26-31" name="__codelineno-26-31" href="#__codelineno-26-31"></a>    <span class="k">def</span> <span class="nf">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="__span-26-32"><a id="__codelineno-26-32" name="__codelineno-26-32" href="#__codelineno-26-32"></a>        <span class="n">pin</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="__span-26-33"><a id="__codelineno-26-33" name="__codelineno-26-33" href="#__codelineno-26-33"></a>
</span><span id="__span-26-34"><a id="__codelineno-26-34" name="__codelineno-26-34" href="#__codelineno-26-34"></a>    <span class="k">def</span> <span class="nf">digital_read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">):</span>
</span><span id="__span-26-35"><a id="__codelineno-26-35" name="__codelineno-26-35" href="#__codelineno-26-35"></a>        <span class="k">return</span> <span class="n">pin</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
</span><span id="__span-26-36"><a id="__codelineno-26-36" name="__codelineno-26-36" href="#__codelineno-26-36"></a>
</span><span id="__span-26-37"><a id="__codelineno-26-37" name="__codelineno-26-37" href="#__codelineno-26-37"></a>    <span class="k">def</span> <span class="nf">delay_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delaytime</span><span class="p">):</span>
</span><span id="__span-26-38"><a id="__codelineno-26-38" name="__codelineno-26-38" href="#__codelineno-26-38"></a>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delaytime</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">)</span>
</span><span id="__span-26-39"><a id="__codelineno-26-39" name="__codelineno-26-39" href="#__codelineno-26-39"></a>
</span><span id="__span-26-40"><a id="__codelineno-26-40" name="__codelineno-26-40" href="#__codelineno-26-40"></a>    <span class="k">def</span> <span class="nf">spi_writebyte</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-26-41"><a id="__codelineno-26-41" name="__codelineno-26-41" href="#__codelineno-26-41"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="__span-26-42"><a id="__codelineno-26-42" name="__codelineno-26-42" href="#__codelineno-26-42"></a>
</span><span id="__span-26-43"><a id="__codelineno-26-43" name="__codelineno-26-43" href="#__codelineno-26-43"></a>    <span class="k">def</span> <span class="nf">module_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-26-44"><a id="__codelineno-26-44" name="__codelineno-26-44" href="#__codelineno-26-44"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-26-45"><a id="__codelineno-26-45" name="__codelineno-26-45" href="#__codelineno-26-45"></a>
</span><span id="__span-26-46"><a id="__codelineno-26-46" name="__codelineno-26-46" href="#__codelineno-26-46"></a>    <span class="c1"># Hardware reset</span>
</span><span id="__span-26-47"><a id="__codelineno-26-47" name="__codelineno-26-47" href="#__codelineno-26-47"></a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-26-48"><a id="__codelineno-26-48" name="__codelineno-26-48" href="#__codelineno-26-48"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-26-49"><a id="__codelineno-26-49" name="__codelineno-26-49" href="#__codelineno-26-49"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> 
</span><span id="__span-26-50"><a id="__codelineno-26-50" name="__codelineno-26-50" href="#__codelineno-26-50"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-26-51"><a id="__codelineno-26-51" name="__codelineno-26-51" href="#__codelineno-26-51"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-26-52"><a id="__codelineno-26-52" name="__codelineno-26-52" href="#__codelineno-26-52"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-26-53"><a id="__codelineno-26-53" name="__codelineno-26-53" href="#__codelineno-26-53"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>   
</span><span id="__span-26-54"><a id="__codelineno-26-54" name="__codelineno-26-54" href="#__codelineno-26-54"></a>
</span><span id="__span-26-55"><a id="__codelineno-26-55" name="__codelineno-26-55" href="#__codelineno-26-55"></a>    <span class="k">def</span> <span class="nf">send_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
</span><span id="__span-26-56"><a id="__codelineno-26-56" name="__codelineno-26-56" href="#__codelineno-26-56"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-26-57"><a id="__codelineno-26-57" name="__codelineno-26-57" href="#__codelineno-26-57"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-26-58"><a id="__codelineno-26-58" name="__codelineno-26-58" href="#__codelineno-26-58"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi_writebyte</span><span class="p">([</span><span class="n">command</span><span class="p">])</span>
</span><span id="__span-26-59"><a id="__codelineno-26-59" name="__codelineno-26-59" href="#__codelineno-26-59"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-26-60"><a id="__codelineno-26-60" name="__codelineno-26-60" href="#__codelineno-26-60"></a>
</span><span id="__span-26-61"><a id="__codelineno-26-61" name="__codelineno-26-61" href="#__codelineno-26-61"></a>    <span class="k">def</span> <span class="nf">send_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-26-62"><a id="__codelineno-26-62" name="__codelineno-26-62" href="#__codelineno-26-62"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-26-63"><a id="__codelineno-26-63" name="__codelineno-26-63" href="#__codelineno-26-63"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-26-64"><a id="__codelineno-26-64" name="__codelineno-26-64" href="#__codelineno-26-64"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi_writebyte</span><span class="p">([</span><span class="n">data</span><span class="p">])</span>
</span><span id="__span-26-65"><a id="__codelineno-26-65" name="__codelineno-26-65" href="#__codelineno-26-65"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-26-66"><a id="__codelineno-26-66" name="__codelineno-26-66" href="#__codelineno-26-66"></a>
</span><span id="__span-26-67"><a id="__codelineno-26-67" name="__codelineno-26-67" href="#__codelineno-26-67"></a>    <span class="k">def</span> <span class="nf">send_data1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buf</span><span class="p">):</span>
</span><span id="__span-26-68"><a id="__codelineno-26-68" name="__codelineno-26-68" href="#__codelineno-26-68"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-26-69"><a id="__codelineno-26-69" name="__codelineno-26-69" href="#__codelineno-26-69"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-26-70"><a id="__codelineno-26-70" name="__codelineno-26-70" href="#__codelineno-26-70"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">buf</span><span class="p">))</span>
</span><span id="__span-26-71"><a id="__codelineno-26-71" name="__codelineno-26-71" href="#__codelineno-26-71"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-26-72"><a id="__codelineno-26-72" name="__codelineno-26-72" href="#__codelineno-26-72"></a>
</span><span id="__span-26-73"><a id="__codelineno-26-73" name="__codelineno-26-73" href="#__codelineno-26-73"></a>    <span class="k">def</span> <span class="nf">WaitUntilIdle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-26-74"><a id="__codelineno-26-74" name="__codelineno-26-74" href="#__codelineno-26-74"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"e-Paper busy"</span><span class="p">)</span>
</span><span id="__span-26-75"><a id="__codelineno-26-75" name="__codelineno-26-75" href="#__codelineno-26-75"></a>        <span class="k">while</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">digital_read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">busy_pin</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>    <span class="c1"># Wait until the busy_pin goes LOW</span>
</span><span id="__span-26-76"><a id="__codelineno-26-76" name="__codelineno-26-76" href="#__codelineno-26-76"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x71</span><span class="p">)</span>
</span><span id="__span-26-77"><a id="__codelineno-26-77" name="__codelineno-26-77" href="#__codelineno-26-77"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span><span id="__span-26-78"><a id="__codelineno-26-78" name="__codelineno-26-78" href="#__codelineno-26-78"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> 
</span><span id="__span-26-79"><a id="__codelineno-26-79" name="__codelineno-26-79" href="#__codelineno-26-79"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"e-Paper busy release"</span><span class="p">)</span>  
</span><span id="__span-26-80"><a id="__codelineno-26-80" name="__codelineno-26-80" href="#__codelineno-26-80"></a>
</span><span id="__span-26-81"><a id="__codelineno-26-81" name="__codelineno-26-81" href="#__codelineno-26-81"></a>    <span class="k">def</span> <span class="nf">TurnOnDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-26-82"><a id="__codelineno-26-82" name="__codelineno-26-82" href="#__codelineno-26-82"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x12</span><span class="p">)</span> <span class="c1"># DISPLAY REFRESH</span>
</span><span id="__span-26-83"><a id="__codelineno-26-83" name="__codelineno-26-83" href="#__codelineno-26-83"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>      <span class="c1">#!!!The delay here is necessary, 200uS at least!!!</span>
</span><span id="__span-26-84"><a id="__codelineno-26-84" name="__codelineno-26-84" href="#__codelineno-26-84"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-26-85"><a id="__codelineno-26-85" name="__codelineno-26-85" href="#__codelineno-26-85"></a>
</span><span id="__span-26-86"><a id="__codelineno-26-86" name="__codelineno-26-86" href="#__codelineno-26-86"></a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-26-87"><a id="__codelineno-26-87" name="__codelineno-26-87" href="#__codelineno-26-87"></a>        <span class="c1"># EPD hardware init start     </span>
</span><span id="__span-26-88"><a id="__codelineno-26-88" name="__codelineno-26-88" href="#__codelineno-26-88"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="__span-26-89"><a id="__codelineno-26-89" name="__codelineno-26-89" href="#__codelineno-26-89"></a>
</span><span id="__span-26-90"><a id="__codelineno-26-90" name="__codelineno-26-90" href="#__codelineno-26-90"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>  <span class="c1"># POWER SETTING</span>
</span><span id="__span-26-91"><a id="__codelineno-26-91" name="__codelineno-26-91" href="#__codelineno-26-91"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span>
</span><span id="__span-26-92"><a id="__codelineno-26-92" name="__codelineno-26-92" href="#__codelineno-26-92"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span>     <span class="c1"># VGH=20V,VGL=-20V</span>
</span><span id="__span-26-93"><a id="__codelineno-26-93" name="__codelineno-26-93" href="#__codelineno-26-93"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x3f</span><span class="p">)</span>     <span class="c1"># VDH=15V</span>
</span><span id="__span-26-94"><a id="__codelineno-26-94" name="__codelineno-26-94" href="#__codelineno-26-94"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x3f</span><span class="p">)</span>     <span class="c1"># VDL=-15V</span>
</span><span id="__span-26-95"><a id="__codelineno-26-95" name="__codelineno-26-95" href="#__codelineno-26-95"></a>
</span><span id="__span-26-96"><a id="__codelineno-26-96" name="__codelineno-26-96" href="#__codelineno-26-96"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x04</span><span class="p">)</span>  <span class="c1"># POWER ON</span>
</span><span id="__span-26-97"><a id="__codelineno-26-97" name="__codelineno-26-97" href="#__codelineno-26-97"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-26-98"><a id="__codelineno-26-98" name="__codelineno-26-98" href="#__codelineno-26-98"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-26-99"><a id="__codelineno-26-99" name="__codelineno-26-99" href="#__codelineno-26-99"></a>
</span><span id="__span-26-100"><a id="__codelineno-26-100" name="__codelineno-26-100" href="#__codelineno-26-100"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X00</span><span class="p">)</span>   <span class="c1"># PANNEL SETTING</span>
</span><span id="__span-26-101"><a id="__codelineno-26-101" name="__codelineno-26-101" href="#__codelineno-26-101"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x1F</span><span class="p">)</span>      <span class="c1"># KW-3f   KWR-2F  BWROTP 0f   BWOTP 1f</span>
</span><span id="__span-26-102"><a id="__codelineno-26-102" name="__codelineno-26-102" href="#__codelineno-26-102"></a>
</span><span id="__span-26-103"><a id="__codelineno-26-103" name="__codelineno-26-103" href="#__codelineno-26-103"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x61</span><span class="p">)</span>     <span class="c1"># tres</span>
</span><span id="__span-26-104"><a id="__codelineno-26-104" name="__codelineno-26-104" href="#__codelineno-26-104"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x03</span><span class="p">)</span>     <span class="c1"># source 800</span>
</span><span id="__span-26-105"><a id="__codelineno-26-105" name="__codelineno-26-105" href="#__codelineno-26-105"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x20</span><span class="p">)</span>
</span><span id="__span-26-106"><a id="__codelineno-26-106" name="__codelineno-26-106" href="#__codelineno-26-106"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>     <span class="c1"># gate 480</span>
</span><span id="__span-26-107"><a id="__codelineno-26-107" name="__codelineno-26-107" href="#__codelineno-26-107"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0xE0</span><span class="p">)</span>
</span><span id="__span-26-108"><a id="__codelineno-26-108" name="__codelineno-26-108" href="#__codelineno-26-108"></a>
</span><span id="__span-26-109"><a id="__codelineno-26-109" name="__codelineno-26-109" href="#__codelineno-26-109"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X15</span><span class="p">)</span>
</span><span id="__span-26-110"><a id="__codelineno-26-110" name="__codelineno-26-110" href="#__codelineno-26-110"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-26-111"><a id="__codelineno-26-111" name="__codelineno-26-111" href="#__codelineno-26-111"></a>
</span><span id="__span-26-112"><a id="__codelineno-26-112" name="__codelineno-26-112" href="#__codelineno-26-112"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X50</span><span class="p">)</span>     <span class="c1"># VCOM AND DATA INTERVAL SETTING</span>
</span><span id="__span-26-113"><a id="__codelineno-26-113" name="__codelineno-26-113" href="#__codelineno-26-113"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-26-114"><a id="__codelineno-26-114" name="__codelineno-26-114" href="#__codelineno-26-114"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-26-115"><a id="__codelineno-26-115" name="__codelineno-26-115" href="#__codelineno-26-115"></a>
</span><span id="__span-26-116"><a id="__codelineno-26-116" name="__codelineno-26-116" href="#__codelineno-26-116"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X60</span><span class="p">)</span>     <span class="c1"># TCON SETTING</span>
</span><span id="__span-26-117"><a id="__codelineno-26-117" name="__codelineno-26-117" href="#__codelineno-26-117"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x22</span><span class="p">)</span>
</span><span id="__span-26-118"><a id="__codelineno-26-118" name="__codelineno-26-118" href="#__codelineno-26-118"></a>
</span><span id="__span-26-119"><a id="__codelineno-26-119" name="__codelineno-26-119" href="#__codelineno-26-119"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x65</span><span class="p">)</span>     <span class="c1"># Resolution setting</span>
</span><span id="__span-26-120"><a id="__codelineno-26-120" name="__codelineno-26-120" href="#__codelineno-26-120"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-26-121"><a id="__codelineno-26-121" name="__codelineno-26-121" href="#__codelineno-26-121"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>     <span class="c1"># 800*480</span>
</span><span id="__span-26-122"><a id="__codelineno-26-122" name="__codelineno-26-122" href="#__codelineno-26-122"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-26-123"><a id="__codelineno-26-123" name="__codelineno-26-123" href="#__codelineno-26-123"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-26-124"><a id="__codelineno-26-124" name="__codelineno-26-124" href="#__codelineno-26-124"></a>
</span><span id="__span-26-125"><a id="__codelineno-26-125" name="__codelineno-26-125" href="#__codelineno-26-125"></a>        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="__span-26-126"><a id="__codelineno-26-126" name="__codelineno-26-126" href="#__codelineno-26-126"></a>
</span><span id="__span-26-127"><a id="__codelineno-26-127" name="__codelineno-26-127" href="#__codelineno-26-127"></a>    <span class="k">def</span> <span class="nf">Clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-26-128"><a id="__codelineno-26-128" name="__codelineno-26-128" href="#__codelineno-26-128"></a>
</span><span id="__span-26-129"><a id="__codelineno-26-129" name="__codelineno-26-129" href="#__codelineno-26-129"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-26-130"><a id="__codelineno-26-130" name="__codelineno-26-130" href="#__codelineno-26-130"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-26-131"><a id="__codelineno-26-131" name="__codelineno-26-131" href="#__codelineno-26-131"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-26-132"><a id="__codelineno-26-132" name="__codelineno-26-132" href="#__codelineno-26-132"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-26-133"><a id="__codelineno-26-133" name="__codelineno-26-133" href="#__codelineno-26-133"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-26-134"><a id="__codelineno-26-134" name="__codelineno-26-134" href="#__codelineno-26-134"></a>
</span><span id="__span-26-135"><a id="__codelineno-26-135" name="__codelineno-26-135" href="#__codelineno-26-135"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-26-136"><a id="__codelineno-26-136" name="__codelineno-26-136" href="#__codelineno-26-136"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-26-137"><a id="__codelineno-26-137" name="__codelineno-26-137" href="#__codelineno-26-137"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0xff</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-26-138"><a id="__codelineno-26-138" name="__codelineno-26-138" href="#__codelineno-26-138"></a>
</span><span id="__span-26-139"><a id="__codelineno-26-139" name="__codelineno-26-139" href="#__codelineno-26-139"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-26-140"><a id="__codelineno-26-140" name="__codelineno-26-140" href="#__codelineno-26-140"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-26-141"><a id="__codelineno-26-141" name="__codelineno-26-141" href="#__codelineno-26-141"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0x00</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-26-142"><a id="__codelineno-26-142" name="__codelineno-26-142" href="#__codelineno-26-142"></a>
</span><span id="__span-26-143"><a id="__codelineno-26-143" name="__codelineno-26-143" href="#__codelineno-26-143"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-26-144"><a id="__codelineno-26-144" name="__codelineno-26-144" href="#__codelineno-26-144"></a>
</span><span id="__span-26-145"><a id="__codelineno-26-145" name="__codelineno-26-145" href="#__codelineno-26-145"></a>    <span class="k">def</span> <span class="nf">ClearBlack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-26-146"><a id="__codelineno-26-146" name="__codelineno-26-146" href="#__codelineno-26-146"></a>
</span><span id="__span-26-147"><a id="__codelineno-26-147" name="__codelineno-26-147" href="#__codelineno-26-147"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-26-148"><a id="__codelineno-26-148" name="__codelineno-26-148" href="#__codelineno-26-148"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-26-149"><a id="__codelineno-26-149" name="__codelineno-26-149" href="#__codelineno-26-149"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-26-150"><a id="__codelineno-26-150" name="__codelineno-26-150" href="#__codelineno-26-150"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-26-151"><a id="__codelineno-26-151" name="__codelineno-26-151" href="#__codelineno-26-151"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-26-152"><a id="__codelineno-26-152" name="__codelineno-26-152" href="#__codelineno-26-152"></a>
</span><span id="__span-26-153"><a id="__codelineno-26-153" name="__codelineno-26-153" href="#__codelineno-26-153"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-26-154"><a id="__codelineno-26-154" name="__codelineno-26-154" href="#__codelineno-26-154"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-26-155"><a id="__codelineno-26-155" name="__codelineno-26-155" href="#__codelineno-26-155"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0x00</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-26-156"><a id="__codelineno-26-156" name="__codelineno-26-156" href="#__codelineno-26-156"></a>
</span><span id="__span-26-157"><a id="__codelineno-26-157" name="__codelineno-26-157" href="#__codelineno-26-157"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-26-158"><a id="__codelineno-26-158" name="__codelineno-26-158" href="#__codelineno-26-158"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-26-159"><a id="__codelineno-26-159" name="__codelineno-26-159" href="#__codelineno-26-159"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0xff</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-26-160"><a id="__codelineno-26-160" name="__codelineno-26-160" href="#__codelineno-26-160"></a>
</span><span id="__span-26-161"><a id="__codelineno-26-161" name="__codelineno-26-161" href="#__codelineno-26-161"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-26-162"><a id="__codelineno-26-162" name="__codelineno-26-162" href="#__codelineno-26-162"></a>
</span><span id="__span-26-163"><a id="__codelineno-26-163" name="__codelineno-26-163" href="#__codelineno-26-163"></a>    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">blackimage</span><span class="p">):</span>
</span><span id="__span-26-164"><a id="__codelineno-26-164" name="__codelineno-26-164" href="#__codelineno-26-164"></a>
</span><span id="__span-26-165"><a id="__codelineno-26-165" name="__codelineno-26-165" href="#__codelineno-26-165"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-26-166"><a id="__codelineno-26-166" name="__codelineno-26-166" href="#__codelineno-26-166"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-26-167"><a id="__codelineno-26-167" name="__codelineno-26-167" href="#__codelineno-26-167"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-26-168"><a id="__codelineno-26-168" name="__codelineno-26-168" href="#__codelineno-26-168"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-26-169"><a id="__codelineno-26-169" name="__codelineno-26-169" href="#__codelineno-26-169"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-26-170"><a id="__codelineno-26-170" name="__codelineno-26-170" href="#__codelineno-26-170"></a>
</span><span id="__span-26-171"><a id="__codelineno-26-171" name="__codelineno-26-171" href="#__codelineno-26-171"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span> 
</span><span id="__span-26-172"><a id="__codelineno-26-172" name="__codelineno-26-172" href="#__codelineno-26-172"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-26-173"><a id="__codelineno-26-173" name="__codelineno-26-173" href="#__codelineno-26-173"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">(</span><span class="n">blackimage</span><span class="p">[(</span><span class="n">i</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span> <span class="p">:</span> <span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">high</span><span class="p">)])</span>
</span><span id="__span-26-174"><a id="__codelineno-26-174" name="__codelineno-26-174" href="#__codelineno-26-174"></a>
</span><span id="__span-26-175"><a id="__codelineno-26-175" name="__codelineno-26-175" href="#__codelineno-26-175"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-26-176"><a id="__codelineno-26-176" name="__codelineno-26-176" href="#__codelineno-26-176"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-26-177"><a id="__codelineno-26-177" name="__codelineno-26-177" href="#__codelineno-26-177"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">(</span><span class="n">blackimage</span><span class="p">[(</span><span class="n">i</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span> <span class="p">:</span> <span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">high</span><span class="p">)])</span>
</span><span id="__span-26-178"><a id="__codelineno-26-178" name="__codelineno-26-178" href="#__codelineno-26-178"></a>
</span><span id="__span-26-179"><a id="__codelineno-26-179" name="__codelineno-26-179" href="#__codelineno-26-179"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-26-180"><a id="__codelineno-26-180" name="__codelineno-26-180" href="#__codelineno-26-180"></a>
</span><span id="__span-26-181"><a id="__codelineno-26-181" name="__codelineno-26-181" href="#__codelineno-26-181"></a>
</span><span id="__span-26-182"><a id="__codelineno-26-182" name="__codelineno-26-182" href="#__codelineno-26-182"></a>    <span class="k">def</span> <span class="nf">sleep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-26-183"><a id="__codelineno-26-183" name="__codelineno-26-183" href="#__codelineno-26-183"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x02</span><span class="p">)</span> <span class="c1"># power off</span>
</span><span id="__span-26-184"><a id="__codelineno-26-184" name="__codelineno-26-184" href="#__codelineno-26-184"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-26-185"><a id="__codelineno-26-185" name="__codelineno-26-185" href="#__codelineno-26-185"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span> <span class="c1"># deep sleep</span>
</span><span id="__span-26-186"><a id="__codelineno-26-186" name="__codelineno-26-186" href="#__codelineno-26-186"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0xa5</span><span class="p">)</span>
</span><span id="__span-26-187"><a id="__codelineno-26-187" name="__codelineno-26-187" href="#__codelineno-26-187"></a>
</span><span id="__span-26-188"><a id="__codelineno-26-188" name="__codelineno-26-188" href="#__codelineno-26-188"></a><span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">'__main__'</span><span class="p">:</span>
</span><span id="__span-26-189"><a id="__codelineno-26-189" name="__codelineno-26-189" href="#__codelineno-26-189"></a>    <span class="n">epd</span> <span class="o">=</span> <span class="n">EPD_7in5</span><span class="p">()</span>
</span><span id="__span-26-190"><a id="__codelineno-26-190" name="__codelineno-26-190" href="#__codelineno-26-190"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>
</span><span id="__span-26-191"><a id="__codelineno-26-191" name="__codelineno-26-191" href="#__codelineno-26-191"></a>
</span><span id="__span-26-192"><a id="__codelineno-26-192" name="__codelineno-26-192" href="#__codelineno-26-192"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-26-193"><a id="__codelineno-26-193" name="__codelineno-26-193" href="#__codelineno-26-193"></a>
</span><span id="__span-26-194"><a id="__codelineno-26-194" name="__codelineno-26-194" href="#__codelineno-26-194"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">"Waveshare"</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-195"><a id="__codelineno-26-195" name="__codelineno-26-195" href="#__codelineno-26-195"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">"Pico_ePaper-7.5"</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-196"><a id="__codelineno-26-196" name="__codelineno-26-196" href="#__codelineno-26-196"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s2">"Raspberry Pico"</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-197"><a id="__codelineno-26-197" name="__codelineno-26-197" href="#__codelineno-26-197"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">epd</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
</span><span id="__span-26-198"><a id="__codelineno-26-198" name="__codelineno-26-198" href="#__codelineno-26-198"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</span><span id="__span-26-199"><a id="__codelineno-26-199" name="__codelineno-26-199" href="#__codelineno-26-199"></a>
</span><span id="__span-26-200"><a id="__codelineno-26-200" name="__codelineno-26-200" href="#__codelineno-26-200"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">vline</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-201"><a id="__codelineno-26-201" name="__codelineno-26-201" href="#__codelineno-26-201"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">vline</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-202"><a id="__codelineno-26-202" name="__codelineno-26-202" href="#__codelineno-26-202"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">hline</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-203"><a id="__codelineno-26-203" name="__codelineno-26-203" href="#__codelineno-26-203"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">hline</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-204"><a id="__codelineno-26-204" name="__codelineno-26-204" href="#__codelineno-26-204"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-205"><a id="__codelineno-26-205" name="__codelineno-26-205" href="#__codelineno-26-205"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-206"><a id="__codelineno-26-206" name="__codelineno-26-206" href="#__codelineno-26-206"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">epd</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
</span><span id="__span-26-207"><a id="__codelineno-26-207" name="__codelineno-26-207" href="#__codelineno-26-207"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</span><span id="__span-26-208"><a id="__codelineno-26-208" name="__codelineno-26-208" href="#__codelineno-26-208"></a>
</span><span id="__span-26-209"><a id="__codelineno-26-209" name="__codelineno-26-209" href="#__codelineno-26-209"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-210"><a id="__codelineno-26-210" name="__codelineno-26-210" href="#__codelineno-26-210"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-211"><a id="__codelineno-26-211" name="__codelineno-26-211" href="#__codelineno-26-211"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">epd</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
</span><span id="__span-26-212"><a id="__codelineno-26-212" name="__codelineno-26-212" href="#__codelineno-26-212"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</span><span id="__span-26-213"><a id="__codelineno-26-213" name="__codelineno-26-213" href="#__codelineno-26-213"></a>
</span><span id="__span-26-214"><a id="__codelineno-26-214" name="__codelineno-26-214" href="#__codelineno-26-214"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-215"><a id="__codelineno-26-215" name="__codelineno-26-215" href="#__codelineno-26-215"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">310</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-216"><a id="__codelineno-26-216" name="__codelineno-26-216" href="#__codelineno-26-216"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-217"><a id="__codelineno-26-217" name="__codelineno-26-217" href="#__codelineno-26-217"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="mi">560</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-218"><a id="__codelineno-26-218" name="__codelineno-26-218" href="#__codelineno-26-218"></a>
</span><span id="__span-26-219"><a id="__codelineno-26-219" name="__codelineno-26-219" href="#__codelineno-26-219"></a>    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">):</span>
</span><span id="__span-26-220"><a id="__codelineno-26-220" name="__codelineno-26-220" href="#__codelineno-26-220"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">):</span>
</span><span id="__span-26-221"><a id="__codelineno-26-221" name="__codelineno-26-221" href="#__codelineno-26-221"></a>            <span class="n">epd</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="mi">270</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="mi">20</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="p">,</span> <span class="mi">375</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="mi">140</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-222"><a id="__codelineno-26-222" name="__codelineno-26-222" href="#__codelineno-26-222"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">):</span>
</span><span id="__span-26-223"><a id="__codelineno-26-223" name="__codelineno-26-223" href="#__codelineno-26-223"></a>            <span class="n">epd</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="mi">375</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="mi">20</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="p">,</span> <span class="mi">270</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="mi">140</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-224"><a id="__codelineno-26-224" name="__codelineno-26-224" href="#__codelineno-26-224"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">):</span>
</span><span id="__span-26-225"><a id="__codelineno-26-225" name="__codelineno-26-225" href="#__codelineno-26-225"></a>            <span class="n">epd</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="mi">270</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="p">,</span> <span class="mi">20</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="mi">390</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="p">,</span> <span class="mi">125</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-226"><a id="__codelineno-26-226" name="__codelineno-26-226" href="#__codelineno-26-226"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">):</span>
</span><span id="__span-26-227"><a id="__codelineno-26-227" name="__codelineno-26-227" href="#__codelineno-26-227"></a>            <span class="n">epd</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="mi">270</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="p">,</span> <span class="mi">125</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="mi">390</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="p">,</span> <span class="mi">20</span><span class="o">+</span><span class="n">j</span><span class="o">*</span><span class="mi">160</span><span class="o">+</span><span class="n">i</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>        
</span><span id="__span-26-228"><a id="__codelineno-26-228" name="__codelineno-26-228" href="#__codelineno-26-228"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span> <span class="mi">190</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-229"><a id="__codelineno-26-229" name="__codelineno-26-229" href="#__codelineno-26-229"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill_rect</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span> <span class="mi">350</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-26-230"><a id="__codelineno-26-230" name="__codelineno-26-230" href="#__codelineno-26-230"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">epd</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
</span><span id="__span-26-231"><a id="__codelineno-26-231" name="__codelineno-26-231" href="#__codelineno-26-231"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</span><span id="__span-26-232"><a id="__codelineno-26-232" name="__codelineno-26-232" href="#__codelineno-26-232"></a>
</span><span id="__span-26-233"><a id="__codelineno-26-233" name="__codelineno-26-233" href="#__codelineno-26-233"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>
</span><span id="__span-26-234"><a id="__codelineno-26-234" name="__codelineno-26-234" href="#__codelineno-26-234"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
</span><span id="__span-26-235"><a id="__codelineno-26-235" name="__codelineno-26-235" href="#__codelineno-26-235"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"sleep"</span><span class="p">)</span>
</span><span id="__span-26-236"><a id="__codelineno-26-236" name="__codelineno-26-236" href="#__codelineno-26-236"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>
</span></code></pre></div>
<p>Unfortunately, the text was very small, and I tried to change its size via <a href="https://github.com/peterhinch/micropython-font-to-py/issues/25">this forum</a>, but it didn't work, also revealing that larger font sizes may take up too much memory. I tried changing <code>self.width = EPD_WIDTH</code> and <code>self.height = EPD_HEIGHT</code> to <code>self.width = int(EPD_WIDTH/2)</code> and <code>self.height = int(EPD_HEIGHT/2)</code> but the result was grainy and has text smaller than what it was before. I also tried multiplying by too, but I recieved an error about allocating too much memory.</p>
<p>I original decided to try to write my own font library by drawing lines and coordinates (and trying to find people who've done similar things with Desmos) but realized this approach is not time efficient. Here was what I had gotten before I quit.</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">SPI</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="kn">import</span> <span class="nn">framebuf</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="kn">import</span> <span class="nn">utime</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="c1"># Display resolution</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="n">EPD_WIDTH</span>       <span class="o">=</span> <span class="mi">800</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="n">EPD_HEIGHT</span>      <span class="o">=</span> <span class="mi">480</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="n">RST_PIN</span>         <span class="o">=</span> <span class="mi">12</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="n">DC_PIN</span>          <span class="o">=</span> <span class="mi">8</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="n">CS_PIN</span>          <span class="o">=</span> <span class="mi">9</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="n">BUSY_PIN</span>        <span class="o">=</span> <span class="mi">13</span>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a><span class="k">class</span> <span class="nc">EPD_7in5</span><span class="p">(</span><span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">):</span>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">RST_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>
</span><span id="__span-27-18"><a id="__codelineno-27-18" name="__codelineno-27-18" href="#__codelineno-27-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">busy_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">BUSY_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">IN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">PULL_UP</span><span class="p">)</span>
</span><span id="__span-27-19"><a id="__codelineno-27-19" name="__codelineno-27-19" href="#__codelineno-27-19"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">CS_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-27-20"><a id="__codelineno-27-20" name="__codelineno-27-20" href="#__codelineno-27-20"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">EPD_WIDTH</span> 
</span><span id="__span-27-21"><a id="__codelineno-27-21" name="__codelineno-27-21" href="#__codelineno-27-21"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">EPD_HEIGHT</span> 
</span><span id="__span-27-22"><a id="__codelineno-27-22" name="__codelineno-27-22" href="#__codelineno-27-22"></a>
</span><span id="__span-27-23"><a id="__codelineno-27-23" name="__codelineno-27-23" href="#__codelineno-27-23"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span> <span class="o">=</span> <span class="n">SPI</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-27-24"><a id="__codelineno-27-24" name="__codelineno-27-24" href="#__codelineno-27-24"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">baudrate</span><span class="o">=</span><span class="mi">4000_000</span><span class="p">)</span>
</span><span id="__span-27-25"><a id="__codelineno-27-25" name="__codelineno-27-25" href="#__codelineno-27-25"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">DC_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-27-26"><a id="__codelineno-27-26" name="__codelineno-27-26" href="#__codelineno-27-26"></a>
</span><span id="__span-27-27"><a id="__codelineno-27-27" name="__codelineno-27-27" href="#__codelineno-27-27"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="__span-27-28"><a id="__codelineno-27-28" name="__codelineno-27-28" href="#__codelineno-27-28"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_HLSB</span><span class="p">)</span>
</span><span id="__span-27-29"><a id="__codelineno-27-29" name="__codelineno-27-29" href="#__codelineno-27-29"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span><span id="__span-27-30"><a id="__codelineno-27-30" name="__codelineno-27-30" href="#__codelineno-27-30"></a>
</span><span id="__span-27-31"><a id="__codelineno-27-31" name="__codelineno-27-31" href="#__codelineno-27-31"></a>    <span class="k">def</span> <span class="nf">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="__span-27-32"><a id="__codelineno-27-32" name="__codelineno-27-32" href="#__codelineno-27-32"></a>        <span class="n">pin</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="__span-27-33"><a id="__codelineno-27-33" name="__codelineno-27-33" href="#__codelineno-27-33"></a>
</span><span id="__span-27-34"><a id="__codelineno-27-34" name="__codelineno-27-34" href="#__codelineno-27-34"></a>    <span class="k">def</span> <span class="nf">digital_read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">):</span>
</span><span id="__span-27-35"><a id="__codelineno-27-35" name="__codelineno-27-35" href="#__codelineno-27-35"></a>        <span class="k">return</span> <span class="n">pin</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
</span><span id="__span-27-36"><a id="__codelineno-27-36" name="__codelineno-27-36" href="#__codelineno-27-36"></a>
</span><span id="__span-27-37"><a id="__codelineno-27-37" name="__codelineno-27-37" href="#__codelineno-27-37"></a>    <span class="k">def</span> <span class="nf">delay_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delaytime</span><span class="p">):</span>
</span><span id="__span-27-38"><a id="__codelineno-27-38" name="__codelineno-27-38" href="#__codelineno-27-38"></a>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delaytime</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">)</span>
</span><span id="__span-27-39"><a id="__codelineno-27-39" name="__codelineno-27-39" href="#__codelineno-27-39"></a>
</span><span id="__span-27-40"><a id="__codelineno-27-40" name="__codelineno-27-40" href="#__codelineno-27-40"></a>    <span class="k">def</span> <span class="nf">spi_writebyte</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-27-41"><a id="__codelineno-27-41" name="__codelineno-27-41" href="#__codelineno-27-41"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="__span-27-42"><a id="__codelineno-27-42" name="__codelineno-27-42" href="#__codelineno-27-42"></a>
</span><span id="__span-27-43"><a id="__codelineno-27-43" name="__codelineno-27-43" href="#__codelineno-27-43"></a>    <span class="k">def</span> <span class="nf">module_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-27-44"><a id="__codelineno-27-44" name="__codelineno-27-44" href="#__codelineno-27-44"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-27-45"><a id="__codelineno-27-45" name="__codelineno-27-45" href="#__codelineno-27-45"></a>
</span><span id="__span-27-46"><a id="__codelineno-27-46" name="__codelineno-27-46" href="#__codelineno-27-46"></a>    <span class="c1"># Hardware reset</span>
</span><span id="__span-27-47"><a id="__codelineno-27-47" name="__codelineno-27-47" href="#__codelineno-27-47"></a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-27-48"><a id="__codelineno-27-48" name="__codelineno-27-48" href="#__codelineno-27-48"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-27-49"><a id="__codelineno-27-49" name="__codelineno-27-49" href="#__codelineno-27-49"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> 
</span><span id="__span-27-50"><a id="__codelineno-27-50" name="__codelineno-27-50" href="#__codelineno-27-50"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-27-51"><a id="__codelineno-27-51" name="__codelineno-27-51" href="#__codelineno-27-51"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-27-52"><a id="__codelineno-27-52" name="__codelineno-27-52" href="#__codelineno-27-52"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-27-53"><a id="__codelineno-27-53" name="__codelineno-27-53" href="#__codelineno-27-53"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>   
</span><span id="__span-27-54"><a id="__codelineno-27-54" name="__codelineno-27-54" href="#__codelineno-27-54"></a>
</span><span id="__span-27-55"><a id="__codelineno-27-55" name="__codelineno-27-55" href="#__codelineno-27-55"></a>    <span class="k">def</span> <span class="nf">send_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
</span><span id="__span-27-56"><a id="__codelineno-27-56" name="__codelineno-27-56" href="#__codelineno-27-56"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-27-57"><a id="__codelineno-27-57" name="__codelineno-27-57" href="#__codelineno-27-57"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-27-58"><a id="__codelineno-27-58" name="__codelineno-27-58" href="#__codelineno-27-58"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi_writebyte</span><span class="p">([</span><span class="n">command</span><span class="p">])</span>
</span><span id="__span-27-59"><a id="__codelineno-27-59" name="__codelineno-27-59" href="#__codelineno-27-59"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-27-60"><a id="__codelineno-27-60" name="__codelineno-27-60" href="#__codelineno-27-60"></a>
</span><span id="__span-27-61"><a id="__codelineno-27-61" name="__codelineno-27-61" href="#__codelineno-27-61"></a>    <span class="k">def</span> <span class="nf">send_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-27-62"><a id="__codelineno-27-62" name="__codelineno-27-62" href="#__codelineno-27-62"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-27-63"><a id="__codelineno-27-63" name="__codelineno-27-63" href="#__codelineno-27-63"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-27-64"><a id="__codelineno-27-64" name="__codelineno-27-64" href="#__codelineno-27-64"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi_writebyte</span><span class="p">([</span><span class="n">data</span><span class="p">])</span>
</span><span id="__span-27-65"><a id="__codelineno-27-65" name="__codelineno-27-65" href="#__codelineno-27-65"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-27-66"><a id="__codelineno-27-66" name="__codelineno-27-66" href="#__codelineno-27-66"></a>
</span><span id="__span-27-67"><a id="__codelineno-27-67" name="__codelineno-27-67" href="#__codelineno-27-67"></a>    <span class="k">def</span> <span class="nf">send_data1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buf</span><span class="p">):</span>
</span><span id="__span-27-68"><a id="__codelineno-27-68" name="__codelineno-27-68" href="#__codelineno-27-68"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-27-69"><a id="__codelineno-27-69" name="__codelineno-27-69" href="#__codelineno-27-69"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-27-70"><a id="__codelineno-27-70" name="__codelineno-27-70" href="#__codelineno-27-70"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">buf</span><span class="p">))</span>
</span><span id="__span-27-71"><a id="__codelineno-27-71" name="__codelineno-27-71" href="#__codelineno-27-71"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-27-72"><a id="__codelineno-27-72" name="__codelineno-27-72" href="#__codelineno-27-72"></a>
</span><span id="__span-27-73"><a id="__codelineno-27-73" name="__codelineno-27-73" href="#__codelineno-27-73"></a>    <span class="k">def</span> <span class="nf">WaitUntilIdle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-27-74"><a id="__codelineno-27-74" name="__codelineno-27-74" href="#__codelineno-27-74"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"e-Paper busy"</span><span class="p">)</span>
</span><span id="__span-27-75"><a id="__codelineno-27-75" name="__codelineno-27-75" href="#__codelineno-27-75"></a>        <span class="k">while</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">digital_read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">busy_pin</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>    <span class="c1"># Wait until the busy_pin goes LOW</span>
</span><span id="__span-27-76"><a id="__codelineno-27-76" name="__codelineno-27-76" href="#__codelineno-27-76"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x71</span><span class="p">)</span>
</span><span id="__span-27-77"><a id="__codelineno-27-77" name="__codelineno-27-77" href="#__codelineno-27-77"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span><span id="__span-27-78"><a id="__codelineno-27-78" name="__codelineno-27-78" href="#__codelineno-27-78"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> 
</span><span id="__span-27-79"><a id="__codelineno-27-79" name="__codelineno-27-79" href="#__codelineno-27-79"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"e-Paper busy release"</span><span class="p">)</span>  
</span><span id="__span-27-80"><a id="__codelineno-27-80" name="__codelineno-27-80" href="#__codelineno-27-80"></a>
</span><span id="__span-27-81"><a id="__codelineno-27-81" name="__codelineno-27-81" href="#__codelineno-27-81"></a>    <span class="k">def</span> <span class="nf">TurnOnDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-27-82"><a id="__codelineno-27-82" name="__codelineno-27-82" href="#__codelineno-27-82"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x12</span><span class="p">)</span> <span class="c1"># DISPLAY REFRESH</span>
</span><span id="__span-27-83"><a id="__codelineno-27-83" name="__codelineno-27-83" href="#__codelineno-27-83"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>      <span class="c1">#!!!The delay here is necessary, 200uS at least!!!</span>
</span><span id="__span-27-84"><a id="__codelineno-27-84" name="__codelineno-27-84" href="#__codelineno-27-84"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-27-85"><a id="__codelineno-27-85" name="__codelineno-27-85" href="#__codelineno-27-85"></a>
</span><span id="__span-27-86"><a id="__codelineno-27-86" name="__codelineno-27-86" href="#__codelineno-27-86"></a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-27-87"><a id="__codelineno-27-87" name="__codelineno-27-87" href="#__codelineno-27-87"></a>        <span class="c1"># EPD hardware init start     </span>
</span><span id="__span-27-88"><a id="__codelineno-27-88" name="__codelineno-27-88" href="#__codelineno-27-88"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="__span-27-89"><a id="__codelineno-27-89" name="__codelineno-27-89" href="#__codelineno-27-89"></a>
</span><span id="__span-27-90"><a id="__codelineno-27-90" name="__codelineno-27-90" href="#__codelineno-27-90"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>  <span class="c1"># POWER SETTING</span>
</span><span id="__span-27-91"><a id="__codelineno-27-91" name="__codelineno-27-91" href="#__codelineno-27-91"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span>
</span><span id="__span-27-92"><a id="__codelineno-27-92" name="__codelineno-27-92" href="#__codelineno-27-92"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span>     <span class="c1"># VGH=20V,VGL=-20V</span>
</span><span id="__span-27-93"><a id="__codelineno-27-93" name="__codelineno-27-93" href="#__codelineno-27-93"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x3f</span><span class="p">)</span>     <span class="c1"># VDH=15V</span>
</span><span id="__span-27-94"><a id="__codelineno-27-94" name="__codelineno-27-94" href="#__codelineno-27-94"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x3f</span><span class="p">)</span>     <span class="c1"># VDL=-15V</span>
</span><span id="__span-27-95"><a id="__codelineno-27-95" name="__codelineno-27-95" href="#__codelineno-27-95"></a>
</span><span id="__span-27-96"><a id="__codelineno-27-96" name="__codelineno-27-96" href="#__codelineno-27-96"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x04</span><span class="p">)</span>  <span class="c1"># POWER ON</span>
</span><span id="__span-27-97"><a id="__codelineno-27-97" name="__codelineno-27-97" href="#__codelineno-27-97"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-27-98"><a id="__codelineno-27-98" name="__codelineno-27-98" href="#__codelineno-27-98"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-27-99"><a id="__codelineno-27-99" name="__codelineno-27-99" href="#__codelineno-27-99"></a>
</span><span id="__span-27-100"><a id="__codelineno-27-100" name="__codelineno-27-100" href="#__codelineno-27-100"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X00</span><span class="p">)</span>   <span class="c1"># PANNEL SETTING</span>
</span><span id="__span-27-101"><a id="__codelineno-27-101" name="__codelineno-27-101" href="#__codelineno-27-101"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x1F</span><span class="p">)</span>      <span class="c1"># KW-3f   KWR-2F  BWROTP 0f   BWOTP 1f</span>
</span><span id="__span-27-102"><a id="__codelineno-27-102" name="__codelineno-27-102" href="#__codelineno-27-102"></a>
</span><span id="__span-27-103"><a id="__codelineno-27-103" name="__codelineno-27-103" href="#__codelineno-27-103"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x61</span><span class="p">)</span>     <span class="c1"># tres</span>
</span><span id="__span-27-104"><a id="__codelineno-27-104" name="__codelineno-27-104" href="#__codelineno-27-104"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x03</span><span class="p">)</span>     <span class="c1"># source 800</span>
</span><span id="__span-27-105"><a id="__codelineno-27-105" name="__codelineno-27-105" href="#__codelineno-27-105"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x20</span><span class="p">)</span>
</span><span id="__span-27-106"><a id="__codelineno-27-106" name="__codelineno-27-106" href="#__codelineno-27-106"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>     <span class="c1"># gate 480</span>
</span><span id="__span-27-107"><a id="__codelineno-27-107" name="__codelineno-27-107" href="#__codelineno-27-107"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0xE0</span><span class="p">)</span>
</span><span id="__span-27-108"><a id="__codelineno-27-108" name="__codelineno-27-108" href="#__codelineno-27-108"></a>
</span><span id="__span-27-109"><a id="__codelineno-27-109" name="__codelineno-27-109" href="#__codelineno-27-109"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X15</span><span class="p">)</span>
</span><span id="__span-27-110"><a id="__codelineno-27-110" name="__codelineno-27-110" href="#__codelineno-27-110"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-27-111"><a id="__codelineno-27-111" name="__codelineno-27-111" href="#__codelineno-27-111"></a>
</span><span id="__span-27-112"><a id="__codelineno-27-112" name="__codelineno-27-112" href="#__codelineno-27-112"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X50</span><span class="p">)</span>     <span class="c1"># VCOM AND DATA INTERVAL SETTING</span>
</span><span id="__span-27-113"><a id="__codelineno-27-113" name="__codelineno-27-113" href="#__codelineno-27-113"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-27-114"><a id="__codelineno-27-114" name="__codelineno-27-114" href="#__codelineno-27-114"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-27-115"><a id="__codelineno-27-115" name="__codelineno-27-115" href="#__codelineno-27-115"></a>
</span><span id="__span-27-116"><a id="__codelineno-27-116" name="__codelineno-27-116" href="#__codelineno-27-116"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X60</span><span class="p">)</span>     <span class="c1"># TCON SETTING</span>
</span><span id="__span-27-117"><a id="__codelineno-27-117" name="__codelineno-27-117" href="#__codelineno-27-117"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x22</span><span class="p">)</span>
</span><span id="__span-27-118"><a id="__codelineno-27-118" name="__codelineno-27-118" href="#__codelineno-27-118"></a>
</span><span id="__span-27-119"><a id="__codelineno-27-119" name="__codelineno-27-119" href="#__codelineno-27-119"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x65</span><span class="p">)</span>     <span class="c1"># Resolution setting</span>
</span><span id="__span-27-120"><a id="__codelineno-27-120" name="__codelineno-27-120" href="#__codelineno-27-120"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-27-121"><a id="__codelineno-27-121" name="__codelineno-27-121" href="#__codelineno-27-121"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>     <span class="c1"># 800*480</span>
</span><span id="__span-27-122"><a id="__codelineno-27-122" name="__codelineno-27-122" href="#__codelineno-27-122"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-27-123"><a id="__codelineno-27-123" name="__codelineno-27-123" href="#__codelineno-27-123"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-27-124"><a id="__codelineno-27-124" name="__codelineno-27-124" href="#__codelineno-27-124"></a>
</span><span id="__span-27-125"><a id="__codelineno-27-125" name="__codelineno-27-125" href="#__codelineno-27-125"></a>        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="__span-27-126"><a id="__codelineno-27-126" name="__codelineno-27-126" href="#__codelineno-27-126"></a>
</span><span id="__span-27-127"><a id="__codelineno-27-127" name="__codelineno-27-127" href="#__codelineno-27-127"></a>    <span class="k">def</span> <span class="nf">Clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-27-128"><a id="__codelineno-27-128" name="__codelineno-27-128" href="#__codelineno-27-128"></a>
</span><span id="__span-27-129"><a id="__codelineno-27-129" name="__codelineno-27-129" href="#__codelineno-27-129"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-27-130"><a id="__codelineno-27-130" name="__codelineno-27-130" href="#__codelineno-27-130"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-27-131"><a id="__codelineno-27-131" name="__codelineno-27-131" href="#__codelineno-27-131"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-27-132"><a id="__codelineno-27-132" name="__codelineno-27-132" href="#__codelineno-27-132"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-27-133"><a id="__codelineno-27-133" name="__codelineno-27-133" href="#__codelineno-27-133"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-27-134"><a id="__codelineno-27-134" name="__codelineno-27-134" href="#__codelineno-27-134"></a>
</span><span id="__span-27-135"><a id="__codelineno-27-135" name="__codelineno-27-135" href="#__codelineno-27-135"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-27-136"><a id="__codelineno-27-136" name="__codelineno-27-136" href="#__codelineno-27-136"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-27-137"><a id="__codelineno-27-137" name="__codelineno-27-137" href="#__codelineno-27-137"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0xff</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-27-138"><a id="__codelineno-27-138" name="__codelineno-27-138" href="#__codelineno-27-138"></a>
</span><span id="__span-27-139"><a id="__codelineno-27-139" name="__codelineno-27-139" href="#__codelineno-27-139"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-27-140"><a id="__codelineno-27-140" name="__codelineno-27-140" href="#__codelineno-27-140"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-27-141"><a id="__codelineno-27-141" name="__codelineno-27-141" href="#__codelineno-27-141"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0x00</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-27-142"><a id="__codelineno-27-142" name="__codelineno-27-142" href="#__codelineno-27-142"></a>
</span><span id="__span-27-143"><a id="__codelineno-27-143" name="__codelineno-27-143" href="#__codelineno-27-143"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-27-144"><a id="__codelineno-27-144" name="__codelineno-27-144" href="#__codelineno-27-144"></a>
</span><span id="__span-27-145"><a id="__codelineno-27-145" name="__codelineno-27-145" href="#__codelineno-27-145"></a>    <span class="k">def</span> <span class="nf">ClearBlack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-27-146"><a id="__codelineno-27-146" name="__codelineno-27-146" href="#__codelineno-27-146"></a>
</span><span id="__span-27-147"><a id="__codelineno-27-147" name="__codelineno-27-147" href="#__codelineno-27-147"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-27-148"><a id="__codelineno-27-148" name="__codelineno-27-148" href="#__codelineno-27-148"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-27-149"><a id="__codelineno-27-149" name="__codelineno-27-149" href="#__codelineno-27-149"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-27-150"><a id="__codelineno-27-150" name="__codelineno-27-150" href="#__codelineno-27-150"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-27-151"><a id="__codelineno-27-151" name="__codelineno-27-151" href="#__codelineno-27-151"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-27-152"><a id="__codelineno-27-152" name="__codelineno-27-152" href="#__codelineno-27-152"></a>
</span><span id="__span-27-153"><a id="__codelineno-27-153" name="__codelineno-27-153" href="#__codelineno-27-153"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-27-154"><a id="__codelineno-27-154" name="__codelineno-27-154" href="#__codelineno-27-154"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-27-155"><a id="__codelineno-27-155" name="__codelineno-27-155" href="#__codelineno-27-155"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0x00</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-27-156"><a id="__codelineno-27-156" name="__codelineno-27-156" href="#__codelineno-27-156"></a>
</span><span id="__span-27-157"><a id="__codelineno-27-157" name="__codelineno-27-157" href="#__codelineno-27-157"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-27-158"><a id="__codelineno-27-158" name="__codelineno-27-158" href="#__codelineno-27-158"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-27-159"><a id="__codelineno-27-159" name="__codelineno-27-159" href="#__codelineno-27-159"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0xff</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-27-160"><a id="__codelineno-27-160" name="__codelineno-27-160" href="#__codelineno-27-160"></a>
</span><span id="__span-27-161"><a id="__codelineno-27-161" name="__codelineno-27-161" href="#__codelineno-27-161"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-27-162"><a id="__codelineno-27-162" name="__codelineno-27-162" href="#__codelineno-27-162"></a>
</span><span id="__span-27-163"><a id="__codelineno-27-163" name="__codelineno-27-163" href="#__codelineno-27-163"></a>    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">blackimage</span><span class="p">):</span>
</span><span id="__span-27-164"><a id="__codelineno-27-164" name="__codelineno-27-164" href="#__codelineno-27-164"></a>
</span><span id="__span-27-165"><a id="__codelineno-27-165" name="__codelineno-27-165" href="#__codelineno-27-165"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-27-166"><a id="__codelineno-27-166" name="__codelineno-27-166" href="#__codelineno-27-166"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-27-167"><a id="__codelineno-27-167" name="__codelineno-27-167" href="#__codelineno-27-167"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-27-168"><a id="__codelineno-27-168" name="__codelineno-27-168" href="#__codelineno-27-168"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-27-169"><a id="__codelineno-27-169" name="__codelineno-27-169" href="#__codelineno-27-169"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-27-170"><a id="__codelineno-27-170" name="__codelineno-27-170" href="#__codelineno-27-170"></a>
</span><span id="__span-27-171"><a id="__codelineno-27-171" name="__codelineno-27-171" href="#__codelineno-27-171"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span> 
</span><span id="__span-27-172"><a id="__codelineno-27-172" name="__codelineno-27-172" href="#__codelineno-27-172"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-27-173"><a id="__codelineno-27-173" name="__codelineno-27-173" href="#__codelineno-27-173"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">(</span><span class="n">blackimage</span><span class="p">[(</span><span class="n">i</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span> <span class="p">:</span> <span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">high</span><span class="p">)])</span>
</span><span id="__span-27-174"><a id="__codelineno-27-174" name="__codelineno-27-174" href="#__codelineno-27-174"></a>
</span><span id="__span-27-175"><a id="__codelineno-27-175" name="__codelineno-27-175" href="#__codelineno-27-175"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-27-176"><a id="__codelineno-27-176" name="__codelineno-27-176" href="#__codelineno-27-176"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-27-177"><a id="__codelineno-27-177" name="__codelineno-27-177" href="#__codelineno-27-177"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">(</span><span class="n">blackimage</span><span class="p">[(</span><span class="n">i</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span> <span class="p">:</span> <span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">high</span><span class="p">)])</span>
</span><span id="__span-27-178"><a id="__codelineno-27-178" name="__codelineno-27-178" href="#__codelineno-27-178"></a>
</span><span id="__span-27-179"><a id="__codelineno-27-179" name="__codelineno-27-179" href="#__codelineno-27-179"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-27-180"><a id="__codelineno-27-180" name="__codelineno-27-180" href="#__codelineno-27-180"></a>
</span><span id="__span-27-181"><a id="__codelineno-27-181" name="__codelineno-27-181" href="#__codelineno-27-181"></a>
</span><span id="__span-27-182"><a id="__codelineno-27-182" name="__codelineno-27-182" href="#__codelineno-27-182"></a>    <span class="k">def</span> <span class="nf">sleep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-27-183"><a id="__codelineno-27-183" name="__codelineno-27-183" href="#__codelineno-27-183"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x02</span><span class="p">)</span> <span class="c1"># power off</span>
</span><span id="__span-27-184"><a id="__codelineno-27-184" name="__codelineno-27-184" href="#__codelineno-27-184"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-27-185"><a id="__codelineno-27-185" name="__codelineno-27-185" href="#__codelineno-27-185"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span> <span class="c1"># deep sleep</span>
</span><span id="__span-27-186"><a id="__codelineno-27-186" name="__codelineno-27-186" href="#__codelineno-27-186"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0xa5</span><span class="p">)</span>
</span><span id="__span-27-187"><a id="__codelineno-27-187" name="__codelineno-27-187" href="#__codelineno-27-187"></a>
</span><span id="__span-27-188"><a id="__codelineno-27-188" name="__codelineno-27-188" href="#__codelineno-27-188"></a><span class="k">def</span> <span class="nf">poly</span><span class="p">(</span><span class="n">epd</span><span class="p">,</span> <span class="n">points</span><span class="p">):</span>
</span><span id="__span-27-189"><a id="__codelineno-27-189" name="__codelineno-27-189" href="#__codelineno-27-189"></a>    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[[]]</span>
</span><span id="__span-27-190"><a id="__codelineno-27-190" name="__codelineno-27-190" href="#__codelineno-27-190"></a>    <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
</span><span id="__span-27-191"><a id="__codelineno-27-191" name="__codelineno-27-191" href="#__codelineno-27-191"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coordinates</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
</span><span id="__span-27-192"><a id="__codelineno-27-192" name="__codelineno-27-192" href="#__codelineno-27-192"></a>            <span class="n">coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="__span-27-193"><a id="__codelineno-27-193" name="__codelineno-27-193" href="#__codelineno-27-193"></a>            <span class="n">coordinates</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">coordinates</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">coordinates</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">][</span><span class="mi">3</span><span class="p">]]</span>
</span><span id="__span-27-194"><a id="__codelineno-27-194" name="__codelineno-27-194" href="#__codelineno-27-194"></a>        <span class="n">coordinates</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="__span-27-195"><a id="__codelineno-27-195" name="__codelineno-27-195" href="#__codelineno-27-195"></a>        <span class="n">coordinates</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="__span-27-196"><a id="__codelineno-27-196" name="__codelineno-27-196" href="#__codelineno-27-196"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span>
</span><span id="__span-27-197"><a id="__codelineno-27-197" name="__codelineno-27-197" href="#__codelineno-27-197"></a>    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">coordinates</span><span class="p">:</span>
</span><span id="__span-27-198"><a id="__codelineno-27-198" name="__codelineno-27-198" href="#__codelineno-27-198"></a>        <span class="n">epd</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-27-199"><a id="__codelineno-27-199" name="__codelineno-27-199" href="#__codelineno-27-199"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">coordinates</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">coordinates</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">],</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="mh">0xff</span><span class="p">)</span>
</span><span id="__span-27-200"><a id="__codelineno-27-200" name="__codelineno-27-200" href="#__codelineno-27-200"></a>
</span><span id="__span-27-201"><a id="__codelineno-27-201" name="__codelineno-27-201" href="#__codelineno-27-201"></a><span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">'__main__'</span><span class="p">:</span>
</span><span id="__span-27-202"><a id="__codelineno-27-202" name="__codelineno-27-202" href="#__codelineno-27-202"></a>    <span class="n">epd</span> <span class="o">=</span> <span class="n">EPD_7in5</span><span class="p">()</span>
</span><span id="__span-27-203"><a id="__codelineno-27-203" name="__codelineno-27-203" href="#__codelineno-27-203"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>
</span><span id="__span-27-204"><a id="__codelineno-27-204" name="__codelineno-27-204" href="#__codelineno-27-204"></a>
</span><span id="__span-27-205"><a id="__codelineno-27-205" name="__codelineno-27-205" href="#__codelineno-27-205"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-27-206"><a id="__codelineno-27-206" name="__codelineno-27-206" href="#__codelineno-27-206"></a>
</span><span id="__span-27-207"><a id="__codelineno-27-207" name="__codelineno-27-207" href="#__codelineno-27-207"></a>    <span class="n">poly</span><span class="p">(</span><span class="n">epd</span><span class="p">,</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
</span><span id="__span-27-208"><a id="__codelineno-27-208" name="__codelineno-27-208" href="#__codelineno-27-208"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">epd</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
</span><span id="__span-27-209"><a id="__codelineno-27-209" name="__codelineno-27-209" href="#__codelineno-27-209"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</span><span id="__span-27-210"><a id="__codelineno-27-210" name="__codelineno-27-210" href="#__codelineno-27-210"></a>
</span><span id="__span-27-211"><a id="__codelineno-27-211" name="__codelineno-27-211" href="#__codelineno-27-211"></a><span class="w">    </span><span class="sd">"""</span>
</span><span id="__span-27-212"><a id="__codelineno-27-212" name="__codelineno-27-212" href="#__codelineno-27-212"></a><span class="sd">    epd.text("Waveshare", 5, 10, 0xff)</span>
</span><span id="__span-27-213"><a id="__codelineno-27-213" name="__codelineno-27-213" href="#__codelineno-27-213"></a><span class="sd">    epd.text("Pico_ePaper-7.5", 5, 40, 0xff)</span>
</span><span id="__span-27-214"><a id="__codelineno-27-214" name="__codelineno-27-214" href="#__codelineno-27-214"></a><span class="sd">    epd.text("Raspberry Pico", 5, 70, 0xff)</span>
</span><span id="__span-27-215"><a id="__codelineno-27-215" name="__codelineno-27-215" href="#__codelineno-27-215"></a><span class="sd">    epd.display(epd.buffer)</span>
</span><span id="__span-27-216"><a id="__codelineno-27-216" name="__codelineno-27-216" href="#__codelineno-27-216"></a><span class="sd">    epd.delay_ms(5000)</span>
</span><span id="__span-27-217"><a id="__codelineno-27-217" name="__codelineno-27-217" href="#__codelineno-27-217"></a>
</span><span id="__span-27-218"><a id="__codelineno-27-218" name="__codelineno-27-218" href="#__codelineno-27-218"></a><span class="sd">    epd.vline(10, 90, 60, 0xff)</span>
</span><span id="__span-27-219"><a id="__codelineno-27-219" name="__codelineno-27-219" href="#__codelineno-27-219"></a><span class="sd">    epd.vline(120, 90, 60, 0xff)</span>
</span><span id="__span-27-220"><a id="__codelineno-27-220" name="__codelineno-27-220" href="#__codelineno-27-220"></a><span class="sd">    epd.hline(10, 90, 110, 0xff)</span>
</span><span id="__span-27-221"><a id="__codelineno-27-221" name="__codelineno-27-221" href="#__codelineno-27-221"></a><span class="sd">    epd.hline(10, 150, 110, 0xff)</span>
</span><span id="__span-27-222"><a id="__codelineno-27-222" name="__codelineno-27-222" href="#__codelineno-27-222"></a><span class="sd">    epd.line(10, 90, 120, 150, 0xff)</span>
</span><span id="__span-27-223"><a id="__codelineno-27-223" name="__codelineno-27-223" href="#__codelineno-27-223"></a><span class="sd">    epd.line(120, 90, 10, 150, 0xff)</span>
</span><span id="__span-27-224"><a id="__codelineno-27-224" name="__codelineno-27-224" href="#__codelineno-27-224"></a><span class="sd">    epd.display(epd.buffer)</span>
</span><span id="__span-27-225"><a id="__codelineno-27-225" name="__codelineno-27-225" href="#__codelineno-27-225"></a><span class="sd">    epd.delay_ms(5000)</span>
</span><span id="__span-27-226"><a id="__codelineno-27-226" name="__codelineno-27-226" href="#__codelineno-27-226"></a>
</span><span id="__span-27-227"><a id="__codelineno-27-227" name="__codelineno-27-227" href="#__codelineno-27-227"></a><span class="sd">    epd.rect(10, 180, 50, 80, 0xff)</span>
</span><span id="__span-27-228"><a id="__codelineno-27-228" name="__codelineno-27-228" href="#__codelineno-27-228"></a><span class="sd">    epd.fill_rect(70, 180, 50, 80, 0xff)</span>
</span><span id="__span-27-229"><a id="__codelineno-27-229" name="__codelineno-27-229" href="#__codelineno-27-229"></a><span class="sd">    epd.display(epd.buffer)</span>
</span><span id="__span-27-230"><a id="__codelineno-27-230" name="__codelineno-27-230" href="#__codelineno-27-230"></a><span class="sd">    epd.delay_ms(5000)</span>
</span><span id="__span-27-231"><a id="__codelineno-27-231" name="__codelineno-27-231" href="#__codelineno-27-231"></a>
</span><span id="__span-27-232"><a id="__codelineno-27-232" name="__codelineno-27-232" href="#__codelineno-27-232"></a><span class="sd">    epd.fill_rect(250, 150, 480, 20, 0xff)</span>
</span><span id="__span-27-233"><a id="__codelineno-27-233" name="__codelineno-27-233" href="#__codelineno-27-233"></a><span class="sd">    epd.fill_rect(250, 310, 480, 20, 0xff)</span>
</span><span id="__span-27-234"><a id="__codelineno-27-234" name="__codelineno-27-234" href="#__codelineno-27-234"></a><span class="sd">    epd.fill_rect(400, 0, 20, 480, 0xff)</span>
</span><span id="__span-27-235"><a id="__codelineno-27-235" name="__codelineno-27-235" href="#__codelineno-27-235"></a><span class="sd">    epd.fill_rect(560, 0, 20, 480, 0xff)</span>
</span><span id="__span-27-236"><a id="__codelineno-27-236" name="__codelineno-27-236" href="#__codelineno-27-236"></a>
</span><span id="__span-27-237"><a id="__codelineno-27-237" name="__codelineno-27-237" href="#__codelineno-27-237"></a><span class="sd">    for j in range(0, 3):</span>
</span><span id="__span-27-238"><a id="__codelineno-27-238" name="__codelineno-27-238" href="#__codelineno-27-238"></a><span class="sd">        for i in range(0, 15):</span>
</span><span id="__span-27-239"><a id="__codelineno-27-239" name="__codelineno-27-239" href="#__codelineno-27-239"></a><span class="sd">            epd.line(270+j*160+i, 20+j*160, 375+j*160+i, 140+j*160, 0xff)</span>
</span><span id="__span-27-240"><a id="__codelineno-27-240" name="__codelineno-27-240" href="#__codelineno-27-240"></a><span class="sd">        for i in range(0, 15):</span>
</span><span id="__span-27-241"><a id="__codelineno-27-241" name="__codelineno-27-241" href="#__codelineno-27-241"></a><span class="sd">            epd.line(375+j*160+i, 20+j*160, 270+j*160+i, 140+j*160, 0xff)</span>
</span><span id="__span-27-242"><a id="__codelineno-27-242" name="__codelineno-27-242" href="#__codelineno-27-242"></a><span class="sd">        for i in range(0, 15):</span>
</span><span id="__span-27-243"><a id="__codelineno-27-243" name="__codelineno-27-243" href="#__codelineno-27-243"></a><span class="sd">            epd.line(270+j*160, 20+j*160+i, 390+j*160, 125+j*160+i, 0xff)</span>
</span><span id="__span-27-244"><a id="__codelineno-27-244" name="__codelineno-27-244" href="#__codelineno-27-244"></a><span class="sd">        for i in range(0, 15):</span>
</span><span id="__span-27-245"><a id="__codelineno-27-245" name="__codelineno-27-245" href="#__codelineno-27-245"></a><span class="sd">            epd.line(270+j*160, 125+j*160+i, 390+j*160, 20+j*160+i, 0xff)        </span>
</span><span id="__span-27-246"><a id="__codelineno-27-246" name="__codelineno-27-246" href="#__codelineno-27-246"></a><span class="sd">    epd.fill_rect(270, 190, 100, 100, 0xff)</span>
</span><span id="__span-27-247"><a id="__codelineno-27-247" name="__codelineno-27-247" href="#__codelineno-27-247"></a><span class="sd">    epd.fill_rect(270, 350, 100, 100, 0xff)</span>
</span><span id="__span-27-248"><a id="__codelineno-27-248" name="__codelineno-27-248" href="#__codelineno-27-248"></a><span class="sd">    epd.display(epd.buffer)</span>
</span><span id="__span-27-249"><a id="__codelineno-27-249" name="__codelineno-27-249" href="#__codelineno-27-249"></a><span class="sd">    epd.delay_ms(5000)</span>
</span><span id="__span-27-250"><a id="__codelineno-27-250" name="__codelineno-27-250" href="#__codelineno-27-250"></a>
</span><span id="__span-27-251"><a id="__codelineno-27-251" name="__codelineno-27-251" href="#__codelineno-27-251"></a><span class="sd">    """</span>
</span><span id="__span-27-252"><a id="__codelineno-27-252" name="__codelineno-27-252" href="#__codelineno-27-252"></a>
</span><span id="__span-27-253"><a id="__codelineno-27-253" name="__codelineno-27-253" href="#__codelineno-27-253"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>
</span><span id="__span-27-254"><a id="__codelineno-27-254" name="__codelineno-27-254" href="#__codelineno-27-254"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
</span><span id="__span-27-255"><a id="__codelineno-27-255" name="__codelineno-27-255" href="#__codelineno-27-255"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"sleep"</span><span class="p">)</span>
</span><span id="__span-27-256"><a id="__codelineno-27-256" name="__codelineno-27-256" href="#__codelineno-27-256"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>
</span></code></pre></div>
<p>I tried original to use the <code>epd.poly</code> function based off of [this documentation](https://docs.micropython.org/en/latest/library/framebuf.html#:~:text=Given%20a%20list,outline%20is%20drawn, since <code>EPD_7in5</code> inherents from <code>framebuf.FrameBuffer</code>, but I kept getting this error when using an array of points.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>TypeError: object with buffer protocol required
</span></code></pre></div>
<p>Instead I found <a href="https://forum.micropython.org/viewtopic.php?t=4806&amp;start=20#:~:text=from%20machine%20import,28">this example code</a>%0Aoled.show()) and adapted it to the following, which worked!</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/smilie-face.jpeg"></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">SPI</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="kn">import</span> <span class="nn">framebuf</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="kn">import</span> <span class="nn">utime</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="c1"># Display resolution</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="n">EPD_WIDTH</span>       <span class="o">=</span> <span class="mi">800</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="n">EPD_HEIGHT</span>      <span class="o">=</span> <span class="mi">480</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="n">RST_PIN</span>         <span class="o">=</span> <span class="mi">12</span>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="n">DC_PIN</span>          <span class="o">=</span> <span class="mi">8</span>
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="n">CS_PIN</span>          <span class="o">=</span> <span class="mi">9</span>
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="n">BUSY_PIN</span>        <span class="o">=</span> <span class="mi">13</span>
</span><span id="__span-29-13"><a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a>
</span><span id="__span-29-14"><a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="k">class</span> <span class="nc">EPD_7in5</span><span class="p">(</span><span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">):</span>
</span><span id="__span-29-15"><a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-29-16"><a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">RST_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-29-17"><a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a>
</span><span id="__span-29-18"><a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">busy_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">BUSY_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">IN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">PULL_UP</span><span class="p">)</span>
</span><span id="__span-29-19"><a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">CS_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-29-20"><a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">EPD_WIDTH</span> 
</span><span id="__span-29-21"><a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">EPD_HEIGHT</span> 
</span><span id="__span-29-22"><a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a>
</span><span id="__span-29-23"><a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span> <span class="o">=</span> <span class="n">SPI</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-29-24"><a id="__codelineno-29-24" name="__codelineno-29-24" href="#__codelineno-29-24"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">baudrate</span><span class="o">=</span><span class="mi">4000_000</span><span class="p">)</span>
</span><span id="__span-29-25"><a id="__codelineno-29-25" name="__codelineno-29-25" href="#__codelineno-29-25"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">DC_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-29-26"><a id="__codelineno-29-26" name="__codelineno-29-26" href="#__codelineno-29-26"></a>
</span><span id="__span-29-27"><a id="__codelineno-29-27" name="__codelineno-29-27" href="#__codelineno-29-27"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="__span-29-28"><a id="__codelineno-29-28" name="__codelineno-29-28" href="#__codelineno-29-28"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_HLSB</span><span class="p">)</span>
</span><span id="__span-29-29"><a id="__codelineno-29-29" name="__codelineno-29-29" href="#__codelineno-29-29"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span><span id="__span-29-30"><a id="__codelineno-29-30" name="__codelineno-29-30" href="#__codelineno-29-30"></a>
</span><span id="__span-29-31"><a id="__codelineno-29-31" name="__codelineno-29-31" href="#__codelineno-29-31"></a>    <span class="k">def</span> <span class="nf">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="__span-29-32"><a id="__codelineno-29-32" name="__codelineno-29-32" href="#__codelineno-29-32"></a>        <span class="n">pin</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="__span-29-33"><a id="__codelineno-29-33" name="__codelineno-29-33" href="#__codelineno-29-33"></a>
</span><span id="__span-29-34"><a id="__codelineno-29-34" name="__codelineno-29-34" href="#__codelineno-29-34"></a>    <span class="k">def</span> <span class="nf">digital_read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">):</span>
</span><span id="__span-29-35"><a id="__codelineno-29-35" name="__codelineno-29-35" href="#__codelineno-29-35"></a>        <span class="k">return</span> <span class="n">pin</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
</span><span id="__span-29-36"><a id="__codelineno-29-36" name="__codelineno-29-36" href="#__codelineno-29-36"></a>
</span><span id="__span-29-37"><a id="__codelineno-29-37" name="__codelineno-29-37" href="#__codelineno-29-37"></a>    <span class="k">def</span> <span class="nf">delay_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delaytime</span><span class="p">):</span>
</span><span id="__span-29-38"><a id="__codelineno-29-38" name="__codelineno-29-38" href="#__codelineno-29-38"></a>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delaytime</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">)</span>
</span><span id="__span-29-39"><a id="__codelineno-29-39" name="__codelineno-29-39" href="#__codelineno-29-39"></a>
</span><span id="__span-29-40"><a id="__codelineno-29-40" name="__codelineno-29-40" href="#__codelineno-29-40"></a>    <span class="k">def</span> <span class="nf">spi_writebyte</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-29-41"><a id="__codelineno-29-41" name="__codelineno-29-41" href="#__codelineno-29-41"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="__span-29-42"><a id="__codelineno-29-42" name="__codelineno-29-42" href="#__codelineno-29-42"></a>
</span><span id="__span-29-43"><a id="__codelineno-29-43" name="__codelineno-29-43" href="#__codelineno-29-43"></a>    <span class="k">def</span> <span class="nf">module_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-29-44"><a id="__codelineno-29-44" name="__codelineno-29-44" href="#__codelineno-29-44"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-29-45"><a id="__codelineno-29-45" name="__codelineno-29-45" href="#__codelineno-29-45"></a>
</span><span id="__span-29-46"><a id="__codelineno-29-46" name="__codelineno-29-46" href="#__codelineno-29-46"></a>    <span class="c1"># Hardware reset</span>
</span><span id="__span-29-47"><a id="__codelineno-29-47" name="__codelineno-29-47" href="#__codelineno-29-47"></a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-29-48"><a id="__codelineno-29-48" name="__codelineno-29-48" href="#__codelineno-29-48"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-29-49"><a id="__codelineno-29-49" name="__codelineno-29-49" href="#__codelineno-29-49"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> 
</span><span id="__span-29-50"><a id="__codelineno-29-50" name="__codelineno-29-50" href="#__codelineno-29-50"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-29-51"><a id="__codelineno-29-51" name="__codelineno-29-51" href="#__codelineno-29-51"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-29-52"><a id="__codelineno-29-52" name="__codelineno-29-52" href="#__codelineno-29-52"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-29-53"><a id="__codelineno-29-53" name="__codelineno-29-53" href="#__codelineno-29-53"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>   
</span><span id="__span-29-54"><a id="__codelineno-29-54" name="__codelineno-29-54" href="#__codelineno-29-54"></a>
</span><span id="__span-29-55"><a id="__codelineno-29-55" name="__codelineno-29-55" href="#__codelineno-29-55"></a>    <span class="k">def</span> <span class="nf">send_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
</span><span id="__span-29-56"><a id="__codelineno-29-56" name="__codelineno-29-56" href="#__codelineno-29-56"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-29-57"><a id="__codelineno-29-57" name="__codelineno-29-57" href="#__codelineno-29-57"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-29-58"><a id="__codelineno-29-58" name="__codelineno-29-58" href="#__codelineno-29-58"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi_writebyte</span><span class="p">([</span><span class="n">command</span><span class="p">])</span>
</span><span id="__span-29-59"><a id="__codelineno-29-59" name="__codelineno-29-59" href="#__codelineno-29-59"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-29-60"><a id="__codelineno-29-60" name="__codelineno-29-60" href="#__codelineno-29-60"></a>
</span><span id="__span-29-61"><a id="__codelineno-29-61" name="__codelineno-29-61" href="#__codelineno-29-61"></a>    <span class="k">def</span> <span class="nf">send_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-29-62"><a id="__codelineno-29-62" name="__codelineno-29-62" href="#__codelineno-29-62"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-29-63"><a id="__codelineno-29-63" name="__codelineno-29-63" href="#__codelineno-29-63"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-29-64"><a id="__codelineno-29-64" name="__codelineno-29-64" href="#__codelineno-29-64"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi_writebyte</span><span class="p">([</span><span class="n">data</span><span class="p">])</span>
</span><span id="__span-29-65"><a id="__codelineno-29-65" name="__codelineno-29-65" href="#__codelineno-29-65"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-29-66"><a id="__codelineno-29-66" name="__codelineno-29-66" href="#__codelineno-29-66"></a>
</span><span id="__span-29-67"><a id="__codelineno-29-67" name="__codelineno-29-67" href="#__codelineno-29-67"></a>    <span class="k">def</span> <span class="nf">send_data1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buf</span><span class="p">):</span>
</span><span id="__span-29-68"><a id="__codelineno-29-68" name="__codelineno-29-68" href="#__codelineno-29-68"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-29-69"><a id="__codelineno-29-69" name="__codelineno-29-69" href="#__codelineno-29-69"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-29-70"><a id="__codelineno-29-70" name="__codelineno-29-70" href="#__codelineno-29-70"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">buf</span><span class="p">))</span>
</span><span id="__span-29-71"><a id="__codelineno-29-71" name="__codelineno-29-71" href="#__codelineno-29-71"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-29-72"><a id="__codelineno-29-72" name="__codelineno-29-72" href="#__codelineno-29-72"></a>
</span><span id="__span-29-73"><a id="__codelineno-29-73" name="__codelineno-29-73" href="#__codelineno-29-73"></a>    <span class="k">def</span> <span class="nf">WaitUntilIdle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-29-74"><a id="__codelineno-29-74" name="__codelineno-29-74" href="#__codelineno-29-74"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"e-Paper busy"</span><span class="p">)</span>
</span><span id="__span-29-75"><a id="__codelineno-29-75" name="__codelineno-29-75" href="#__codelineno-29-75"></a>        <span class="k">while</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">digital_read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">busy_pin</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>    <span class="c1"># Wait until the busy_pin goes LOW</span>
</span><span id="__span-29-76"><a id="__codelineno-29-76" name="__codelineno-29-76" href="#__codelineno-29-76"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x71</span><span class="p">)</span>
</span><span id="__span-29-77"><a id="__codelineno-29-77" name="__codelineno-29-77" href="#__codelineno-29-77"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span><span id="__span-29-78"><a id="__codelineno-29-78" name="__codelineno-29-78" href="#__codelineno-29-78"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> 
</span><span id="__span-29-79"><a id="__codelineno-29-79" name="__codelineno-29-79" href="#__codelineno-29-79"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"e-Paper busy release"</span><span class="p">)</span>  
</span><span id="__span-29-80"><a id="__codelineno-29-80" name="__codelineno-29-80" href="#__codelineno-29-80"></a>
</span><span id="__span-29-81"><a id="__codelineno-29-81" name="__codelineno-29-81" href="#__codelineno-29-81"></a>    <span class="k">def</span> <span class="nf">TurnOnDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-29-82"><a id="__codelineno-29-82" name="__codelineno-29-82" href="#__codelineno-29-82"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x12</span><span class="p">)</span> <span class="c1"># DISPLAY REFRESH</span>
</span><span id="__span-29-83"><a id="__codelineno-29-83" name="__codelineno-29-83" href="#__codelineno-29-83"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>      <span class="c1">#!!!The delay here is necessary, 200uS at least!!!</span>
</span><span id="__span-29-84"><a id="__codelineno-29-84" name="__codelineno-29-84" href="#__codelineno-29-84"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-29-85"><a id="__codelineno-29-85" name="__codelineno-29-85" href="#__codelineno-29-85"></a>
</span><span id="__span-29-86"><a id="__codelineno-29-86" name="__codelineno-29-86" href="#__codelineno-29-86"></a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-29-87"><a id="__codelineno-29-87" name="__codelineno-29-87" href="#__codelineno-29-87"></a>        <span class="c1"># EPD hardware init start     </span>
</span><span id="__span-29-88"><a id="__codelineno-29-88" name="__codelineno-29-88" href="#__codelineno-29-88"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="__span-29-89"><a id="__codelineno-29-89" name="__codelineno-29-89" href="#__codelineno-29-89"></a>
</span><span id="__span-29-90"><a id="__codelineno-29-90" name="__codelineno-29-90" href="#__codelineno-29-90"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>  <span class="c1"># POWER SETTING</span>
</span><span id="__span-29-91"><a id="__codelineno-29-91" name="__codelineno-29-91" href="#__codelineno-29-91"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span>
</span><span id="__span-29-92"><a id="__codelineno-29-92" name="__codelineno-29-92" href="#__codelineno-29-92"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span>     <span class="c1"># VGH=20V,VGL=-20V</span>
</span><span id="__span-29-93"><a id="__codelineno-29-93" name="__codelineno-29-93" href="#__codelineno-29-93"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x3f</span><span class="p">)</span>     <span class="c1"># VDH=15V</span>
</span><span id="__span-29-94"><a id="__codelineno-29-94" name="__codelineno-29-94" href="#__codelineno-29-94"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x3f</span><span class="p">)</span>     <span class="c1"># VDL=-15V</span>
</span><span id="__span-29-95"><a id="__codelineno-29-95" name="__codelineno-29-95" href="#__codelineno-29-95"></a>
</span><span id="__span-29-96"><a id="__codelineno-29-96" name="__codelineno-29-96" href="#__codelineno-29-96"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x04</span><span class="p">)</span>  <span class="c1"># POWER ON</span>
</span><span id="__span-29-97"><a id="__codelineno-29-97" name="__codelineno-29-97" href="#__codelineno-29-97"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-29-98"><a id="__codelineno-29-98" name="__codelineno-29-98" href="#__codelineno-29-98"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-29-99"><a id="__codelineno-29-99" name="__codelineno-29-99" href="#__codelineno-29-99"></a>
</span><span id="__span-29-100"><a id="__codelineno-29-100" name="__codelineno-29-100" href="#__codelineno-29-100"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X00</span><span class="p">)</span>   <span class="c1"># PANNEL SETTING</span>
</span><span id="__span-29-101"><a id="__codelineno-29-101" name="__codelineno-29-101" href="#__codelineno-29-101"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x1F</span><span class="p">)</span>      <span class="c1"># KW-3f   KWR-2F  BWROTP 0f   BWOTP 1f</span>
</span><span id="__span-29-102"><a id="__codelineno-29-102" name="__codelineno-29-102" href="#__codelineno-29-102"></a>
</span><span id="__span-29-103"><a id="__codelineno-29-103" name="__codelineno-29-103" href="#__codelineno-29-103"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x61</span><span class="p">)</span>     <span class="c1"># tres</span>
</span><span id="__span-29-104"><a id="__codelineno-29-104" name="__codelineno-29-104" href="#__codelineno-29-104"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x03</span><span class="p">)</span>     <span class="c1"># source 800</span>
</span><span id="__span-29-105"><a id="__codelineno-29-105" name="__codelineno-29-105" href="#__codelineno-29-105"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x20</span><span class="p">)</span>
</span><span id="__span-29-106"><a id="__codelineno-29-106" name="__codelineno-29-106" href="#__codelineno-29-106"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>     <span class="c1"># gate 480</span>
</span><span id="__span-29-107"><a id="__codelineno-29-107" name="__codelineno-29-107" href="#__codelineno-29-107"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0xE0</span><span class="p">)</span>
</span><span id="__span-29-108"><a id="__codelineno-29-108" name="__codelineno-29-108" href="#__codelineno-29-108"></a>
</span><span id="__span-29-109"><a id="__codelineno-29-109" name="__codelineno-29-109" href="#__codelineno-29-109"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X15</span><span class="p">)</span>
</span><span id="__span-29-110"><a id="__codelineno-29-110" name="__codelineno-29-110" href="#__codelineno-29-110"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-29-111"><a id="__codelineno-29-111" name="__codelineno-29-111" href="#__codelineno-29-111"></a>
</span><span id="__span-29-112"><a id="__codelineno-29-112" name="__codelineno-29-112" href="#__codelineno-29-112"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X50</span><span class="p">)</span>     <span class="c1"># VCOM AND DATA INTERVAL SETTING</span>
</span><span id="__span-29-113"><a id="__codelineno-29-113" name="__codelineno-29-113" href="#__codelineno-29-113"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-29-114"><a id="__codelineno-29-114" name="__codelineno-29-114" href="#__codelineno-29-114"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-29-115"><a id="__codelineno-29-115" name="__codelineno-29-115" href="#__codelineno-29-115"></a>
</span><span id="__span-29-116"><a id="__codelineno-29-116" name="__codelineno-29-116" href="#__codelineno-29-116"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X60</span><span class="p">)</span>     <span class="c1"># TCON SETTING</span>
</span><span id="__span-29-117"><a id="__codelineno-29-117" name="__codelineno-29-117" href="#__codelineno-29-117"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x22</span><span class="p">)</span>
</span><span id="__span-29-118"><a id="__codelineno-29-118" name="__codelineno-29-118" href="#__codelineno-29-118"></a>
</span><span id="__span-29-119"><a id="__codelineno-29-119" name="__codelineno-29-119" href="#__codelineno-29-119"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x65</span><span class="p">)</span>     <span class="c1"># Resolution setting</span>
</span><span id="__span-29-120"><a id="__codelineno-29-120" name="__codelineno-29-120" href="#__codelineno-29-120"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-29-121"><a id="__codelineno-29-121" name="__codelineno-29-121" href="#__codelineno-29-121"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>     <span class="c1"># 800*480</span>
</span><span id="__span-29-122"><a id="__codelineno-29-122" name="__codelineno-29-122" href="#__codelineno-29-122"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-29-123"><a id="__codelineno-29-123" name="__codelineno-29-123" href="#__codelineno-29-123"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-29-124"><a id="__codelineno-29-124" name="__codelineno-29-124" href="#__codelineno-29-124"></a>
</span><span id="__span-29-125"><a id="__codelineno-29-125" name="__codelineno-29-125" href="#__codelineno-29-125"></a>        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="__span-29-126"><a id="__codelineno-29-126" name="__codelineno-29-126" href="#__codelineno-29-126"></a>
</span><span id="__span-29-127"><a id="__codelineno-29-127" name="__codelineno-29-127" href="#__codelineno-29-127"></a>    <span class="k">def</span> <span class="nf">Clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-29-128"><a id="__codelineno-29-128" name="__codelineno-29-128" href="#__codelineno-29-128"></a>
</span><span id="__span-29-129"><a id="__codelineno-29-129" name="__codelineno-29-129" href="#__codelineno-29-129"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-29-130"><a id="__codelineno-29-130" name="__codelineno-29-130" href="#__codelineno-29-130"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-29-131"><a id="__codelineno-29-131" name="__codelineno-29-131" href="#__codelineno-29-131"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-29-132"><a id="__codelineno-29-132" name="__codelineno-29-132" href="#__codelineno-29-132"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-29-133"><a id="__codelineno-29-133" name="__codelineno-29-133" href="#__codelineno-29-133"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-29-134"><a id="__codelineno-29-134" name="__codelineno-29-134" href="#__codelineno-29-134"></a>
</span><span id="__span-29-135"><a id="__codelineno-29-135" name="__codelineno-29-135" href="#__codelineno-29-135"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-29-136"><a id="__codelineno-29-136" name="__codelineno-29-136" href="#__codelineno-29-136"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-29-137"><a id="__codelineno-29-137" name="__codelineno-29-137" href="#__codelineno-29-137"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0xff</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-29-138"><a id="__codelineno-29-138" name="__codelineno-29-138" href="#__codelineno-29-138"></a>
</span><span id="__span-29-139"><a id="__codelineno-29-139" name="__codelineno-29-139" href="#__codelineno-29-139"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-29-140"><a id="__codelineno-29-140" name="__codelineno-29-140" href="#__codelineno-29-140"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-29-141"><a id="__codelineno-29-141" name="__codelineno-29-141" href="#__codelineno-29-141"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0x00</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-29-142"><a id="__codelineno-29-142" name="__codelineno-29-142" href="#__codelineno-29-142"></a>
</span><span id="__span-29-143"><a id="__codelineno-29-143" name="__codelineno-29-143" href="#__codelineno-29-143"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-29-144"><a id="__codelineno-29-144" name="__codelineno-29-144" href="#__codelineno-29-144"></a>
</span><span id="__span-29-145"><a id="__codelineno-29-145" name="__codelineno-29-145" href="#__codelineno-29-145"></a>    <span class="k">def</span> <span class="nf">ClearBlack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-29-146"><a id="__codelineno-29-146" name="__codelineno-29-146" href="#__codelineno-29-146"></a>
</span><span id="__span-29-147"><a id="__codelineno-29-147" name="__codelineno-29-147" href="#__codelineno-29-147"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-29-148"><a id="__codelineno-29-148" name="__codelineno-29-148" href="#__codelineno-29-148"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-29-149"><a id="__codelineno-29-149" name="__codelineno-29-149" href="#__codelineno-29-149"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-29-150"><a id="__codelineno-29-150" name="__codelineno-29-150" href="#__codelineno-29-150"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-29-151"><a id="__codelineno-29-151" name="__codelineno-29-151" href="#__codelineno-29-151"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-29-152"><a id="__codelineno-29-152" name="__codelineno-29-152" href="#__codelineno-29-152"></a>
</span><span id="__span-29-153"><a id="__codelineno-29-153" name="__codelineno-29-153" href="#__codelineno-29-153"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-29-154"><a id="__codelineno-29-154" name="__codelineno-29-154" href="#__codelineno-29-154"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-29-155"><a id="__codelineno-29-155" name="__codelineno-29-155" href="#__codelineno-29-155"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0x00</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-29-156"><a id="__codelineno-29-156" name="__codelineno-29-156" href="#__codelineno-29-156"></a>
</span><span id="__span-29-157"><a id="__codelineno-29-157" name="__codelineno-29-157" href="#__codelineno-29-157"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-29-158"><a id="__codelineno-29-158" name="__codelineno-29-158" href="#__codelineno-29-158"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-29-159"><a id="__codelineno-29-159" name="__codelineno-29-159" href="#__codelineno-29-159"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0xff</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-29-160"><a id="__codelineno-29-160" name="__codelineno-29-160" href="#__codelineno-29-160"></a>
</span><span id="__span-29-161"><a id="__codelineno-29-161" name="__codelineno-29-161" href="#__codelineno-29-161"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-29-162"><a id="__codelineno-29-162" name="__codelineno-29-162" href="#__codelineno-29-162"></a>
</span><span id="__span-29-163"><a id="__codelineno-29-163" name="__codelineno-29-163" href="#__codelineno-29-163"></a>    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">blackimage</span><span class="p">):</span>
</span><span id="__span-29-164"><a id="__codelineno-29-164" name="__codelineno-29-164" href="#__codelineno-29-164"></a>
</span><span id="__span-29-165"><a id="__codelineno-29-165" name="__codelineno-29-165" href="#__codelineno-29-165"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-29-166"><a id="__codelineno-29-166" name="__codelineno-29-166" href="#__codelineno-29-166"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-29-167"><a id="__codelineno-29-167" name="__codelineno-29-167" href="#__codelineno-29-167"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-29-168"><a id="__codelineno-29-168" name="__codelineno-29-168" href="#__codelineno-29-168"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-29-169"><a id="__codelineno-29-169" name="__codelineno-29-169" href="#__codelineno-29-169"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-29-170"><a id="__codelineno-29-170" name="__codelineno-29-170" href="#__codelineno-29-170"></a>
</span><span id="__span-29-171"><a id="__codelineno-29-171" name="__codelineno-29-171" href="#__codelineno-29-171"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span> 
</span><span id="__span-29-172"><a id="__codelineno-29-172" name="__codelineno-29-172" href="#__codelineno-29-172"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-29-173"><a id="__codelineno-29-173" name="__codelineno-29-173" href="#__codelineno-29-173"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">(</span><span class="n">blackimage</span><span class="p">[(</span><span class="n">i</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span> <span class="p">:</span> <span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">high</span><span class="p">)])</span>
</span><span id="__span-29-174"><a id="__codelineno-29-174" name="__codelineno-29-174" href="#__codelineno-29-174"></a>
</span><span id="__span-29-175"><a id="__codelineno-29-175" name="__codelineno-29-175" href="#__codelineno-29-175"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-29-176"><a id="__codelineno-29-176" name="__codelineno-29-176" href="#__codelineno-29-176"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-29-177"><a id="__codelineno-29-177" name="__codelineno-29-177" href="#__codelineno-29-177"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">(</span><span class="n">blackimage</span><span class="p">[(</span><span class="n">i</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span> <span class="p">:</span> <span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">high</span><span class="p">)])</span>
</span><span id="__span-29-178"><a id="__codelineno-29-178" name="__codelineno-29-178" href="#__codelineno-29-178"></a>
</span><span id="__span-29-179"><a id="__codelineno-29-179" name="__codelineno-29-179" href="#__codelineno-29-179"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-29-180"><a id="__codelineno-29-180" name="__codelineno-29-180" href="#__codelineno-29-180"></a>
</span><span id="__span-29-181"><a id="__codelineno-29-181" name="__codelineno-29-181" href="#__codelineno-29-181"></a>
</span><span id="__span-29-182"><a id="__codelineno-29-182" name="__codelineno-29-182" href="#__codelineno-29-182"></a>    <span class="k">def</span> <span class="nf">sleep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-29-183"><a id="__codelineno-29-183" name="__codelineno-29-183" href="#__codelineno-29-183"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x02</span><span class="p">)</span> <span class="c1"># power off</span>
</span><span id="__span-29-184"><a id="__codelineno-29-184" name="__codelineno-29-184" href="#__codelineno-29-184"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-29-185"><a id="__codelineno-29-185" name="__codelineno-29-185" href="#__codelineno-29-185"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span> <span class="c1"># deep sleep</span>
</span><span id="__span-29-186"><a id="__codelineno-29-186" name="__codelineno-29-186" href="#__codelineno-29-186"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0xa5</span><span class="p">)</span>
</span><span id="__span-29-187"><a id="__codelineno-29-187" name="__codelineno-29-187" href="#__codelineno-29-187"></a><span class="sd">"""</span>
</span><span id="__span-29-188"><a id="__codelineno-29-188" name="__codelineno-29-188" href="#__codelineno-29-188"></a><span class="sd">def poly(epd, points):</span>
</span><span id="__span-29-189"><a id="__codelineno-29-189" name="__codelineno-29-189" href="#__codelineno-29-189"></a><span class="sd">    coordinates = [[]]</span>
</span><span id="__span-29-190"><a id="__codelineno-29-190" name="__codelineno-29-190" href="#__codelineno-29-190"></a><span class="sd">    for point in points:</span>
</span><span id="__span-29-191"><a id="__codelineno-29-191" name="__codelineno-29-191" href="#__codelineno-29-191"></a><span class="sd">        if len(coordinates[-1]) == 4:</span>
</span><span id="__span-29-192"><a id="__codelineno-29-192" name="__codelineno-29-192" href="#__codelineno-29-192"></a><span class="sd">            coordinates.append([])</span>
</span><span id="__span-29-193"><a id="__codelineno-29-193" name="__codelineno-29-193" href="#__codelineno-29-193"></a><span class="sd">            coordinates[-1] += [coordinates[-2][2], coordinates[-2][3]]</span>
</span><span id="__span-29-194"><a id="__codelineno-29-194" name="__codelineno-29-194" href="#__codelineno-29-194"></a><span class="sd">        coordinates[-1].append(point[0])</span>
</span><span id="__span-29-195"><a id="__codelineno-29-195" name="__codelineno-29-195" href="#__codelineno-29-195"></a><span class="sd">        coordinates[-1].append(point[1])</span>
</span><span id="__span-29-196"><a id="__codelineno-29-196" name="__codelineno-29-196" href="#__codelineno-29-196"></a><span class="sd">    print(coordinates)</span>
</span><span id="__span-29-197"><a id="__codelineno-29-197" name="__codelineno-29-197" href="#__codelineno-29-197"></a><span class="sd">    for c in coordinates:</span>
</span><span id="__span-29-198"><a id="__codelineno-29-198" name="__codelineno-29-198" href="#__codelineno-29-198"></a><span class="sd">        epd.line(c[0], c[1], c[2], c[3], 0xff)</span>
</span><span id="__span-29-199"><a id="__codelineno-29-199" name="__codelineno-29-199" href="#__codelineno-29-199"></a><span class="sd">    epd.line(coordinates[-1][2], coordinates[-1][3], coordinates[0][0], coordinates[0][1], 0xff)</span>
</span><span id="__span-29-200"><a id="__codelineno-29-200" name="__codelineno-29-200" href="#__codelineno-29-200"></a><span class="sd">"""</span>
</span><span id="__span-29-201"><a id="__codelineno-29-201" name="__codelineno-29-201" href="#__codelineno-29-201"></a><span class="n">fb_smile1</span> <span class="o">=</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="sa">b</span><span class="s1">'</span><span class="se">\x00</span><span class="s1">~</span><span class="se">\x00\x03\xff\xc0\x07\x81\xe0\x1e\x00</span><span class="s1">x8</span><span class="se">\x00\x1c</span><span class="s1">0</span><span class="se">\x00\x0c</span><span class="s1">`</span><span class="se">\x00\x0e</span><span class="s1">a</span><span class="se">\xc3\x86\xe0\x00\x07\xc0\x00\x03\xc0\x00\x03\xc0\x00\x02\xc0\x00\x03\xc0\x00\x03\xe0</span><span class="s1">B</span><span class="se">\x07</span><span class="s1">`&lt;</span><span class="se">\x06</span><span class="s1">`</span><span class="se">\x00\x06</span><span class="s1">0</span><span class="se">\x00\x0c</span><span class="s1">8</span><span class="se">\x00\x1c\x1e\x00</span><span class="s1">x</span><span class="se">\x07\x81\xe0\x03\xff\xc0\x00\xff\x00</span><span class="s1">'</span><span class="p">),</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_HLSB</span><span class="p">)</span>
</span><span id="__span-29-202"><a id="__codelineno-29-202" name="__codelineno-29-202" href="#__codelineno-29-202"></a>
</span><span id="__span-29-203"><a id="__codelineno-29-203" name="__codelineno-29-203" href="#__codelineno-29-203"></a><span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">'__main__'</span><span class="p">:</span>
</span><span id="__span-29-204"><a id="__codelineno-29-204" name="__codelineno-29-204" href="#__codelineno-29-204"></a>    <span class="n">epd</span> <span class="o">=</span> <span class="n">EPD_7in5</span><span class="p">()</span>
</span><span id="__span-29-205"><a id="__codelineno-29-205" name="__codelineno-29-205" href="#__codelineno-29-205"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>
</span><span id="__span-29-206"><a id="__codelineno-29-206" name="__codelineno-29-206" href="#__codelineno-29-206"></a>
</span><span id="__span-29-207"><a id="__codelineno-29-207" name="__codelineno-29-207" href="#__codelineno-29-207"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-29-208"><a id="__codelineno-29-208" name="__codelineno-29-208" href="#__codelineno-29-208"></a>
</span><span id="__span-29-209"><a id="__codelineno-29-209" name="__codelineno-29-209" href="#__codelineno-29-209"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">fb_smile1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</span><span id="__span-29-210"><a id="__codelineno-29-210" name="__codelineno-29-210" href="#__codelineno-29-210"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">epd</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
</span><span id="__span-29-211"><a id="__codelineno-29-211" name="__codelineno-29-211" href="#__codelineno-29-211"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</span><span id="__span-29-212"><a id="__codelineno-29-212" name="__codelineno-29-212" href="#__codelineno-29-212"></a>
</span><span id="__span-29-213"><a id="__codelineno-29-213" name="__codelineno-29-213" href="#__codelineno-29-213"></a><span class="w">    </span><span class="sd">"""</span>
</span><span id="__span-29-214"><a id="__codelineno-29-214" name="__codelineno-29-214" href="#__codelineno-29-214"></a><span class="sd">    epd.text("Waveshare", 5, 10, 0xff)</span>
</span><span id="__span-29-215"><a id="__codelineno-29-215" name="__codelineno-29-215" href="#__codelineno-29-215"></a><span class="sd">    epd.text("Pico_ePaper-7.5", 5, 40, 0xff)</span>
</span><span id="__span-29-216"><a id="__codelineno-29-216" name="__codelineno-29-216" href="#__codelineno-29-216"></a><span class="sd">    epd.text("Raspberry Pico", 5, 70, 0xff)</span>
</span><span id="__span-29-217"><a id="__codelineno-29-217" name="__codelineno-29-217" href="#__codelineno-29-217"></a><span class="sd">    epd.display(epd.buffer)</span>
</span><span id="__span-29-218"><a id="__codelineno-29-218" name="__codelineno-29-218" href="#__codelineno-29-218"></a><span class="sd">    epd.delay_ms(5000)</span>
</span><span id="__span-29-219"><a id="__codelineno-29-219" name="__codelineno-29-219" href="#__codelineno-29-219"></a>
</span><span id="__span-29-220"><a id="__codelineno-29-220" name="__codelineno-29-220" href="#__codelineno-29-220"></a><span class="sd">    epd.vline(10, 90, 60, 0xff)</span>
</span><span id="__span-29-221"><a id="__codelineno-29-221" name="__codelineno-29-221" href="#__codelineno-29-221"></a><span class="sd">    epd.vline(120, 90, 60, 0xff)</span>
</span><span id="__span-29-222"><a id="__codelineno-29-222" name="__codelineno-29-222" href="#__codelineno-29-222"></a><span class="sd">    epd.hline(10, 90, 110, 0xff)</span>
</span><span id="__span-29-223"><a id="__codelineno-29-223" name="__codelineno-29-223" href="#__codelineno-29-223"></a><span class="sd">    epd.hline(10, 150, 110, 0xff)</span>
</span><span id="__span-29-224"><a id="__codelineno-29-224" name="__codelineno-29-224" href="#__codelineno-29-224"></a><span class="sd">    epd.line(10, 90, 120, 150, 0xff)</span>
</span><span id="__span-29-225"><a id="__codelineno-29-225" name="__codelineno-29-225" href="#__codelineno-29-225"></a><span class="sd">    epd.line(120, 90, 10, 150, 0xff)</span>
</span><span id="__span-29-226"><a id="__codelineno-29-226" name="__codelineno-29-226" href="#__codelineno-29-226"></a><span class="sd">    epd.display(epd.buffer)</span>
</span><span id="__span-29-227"><a id="__codelineno-29-227" name="__codelineno-29-227" href="#__codelineno-29-227"></a><span class="sd">    epd.delay_ms(5000)</span>
</span><span id="__span-29-228"><a id="__codelineno-29-228" name="__codelineno-29-228" href="#__codelineno-29-228"></a>
</span><span id="__span-29-229"><a id="__codelineno-29-229" name="__codelineno-29-229" href="#__codelineno-29-229"></a><span class="sd">    epd.rect(10, 180, 50, 80, 0xff)</span>
</span><span id="__span-29-230"><a id="__codelineno-29-230" name="__codelineno-29-230" href="#__codelineno-29-230"></a><span class="sd">    epd.fill_rect(70, 180, 50, 80, 0xff)</span>
</span><span id="__span-29-231"><a id="__codelineno-29-231" name="__codelineno-29-231" href="#__codelineno-29-231"></a><span class="sd">    epd.display(epd.buffer)</span>
</span><span id="__span-29-232"><a id="__codelineno-29-232" name="__codelineno-29-232" href="#__codelineno-29-232"></a><span class="sd">    epd.delay_ms(5000)</span>
</span><span id="__span-29-233"><a id="__codelineno-29-233" name="__codelineno-29-233" href="#__codelineno-29-233"></a>
</span><span id="__span-29-234"><a id="__codelineno-29-234" name="__codelineno-29-234" href="#__codelineno-29-234"></a><span class="sd">    epd.fill_rect(250, 150, 480, 20, 0xff)</span>
</span><span id="__span-29-235"><a id="__codelineno-29-235" name="__codelineno-29-235" href="#__codelineno-29-235"></a><span class="sd">    epd.fill_rect(250, 310, 480, 20, 0xff)</span>
</span><span id="__span-29-236"><a id="__codelineno-29-236" name="__codelineno-29-236" href="#__codelineno-29-236"></a><span class="sd">    epd.fill_rect(400, 0, 20, 480, 0xff)</span>
</span><span id="__span-29-237"><a id="__codelineno-29-237" name="__codelineno-29-237" href="#__codelineno-29-237"></a><span class="sd">    epd.fill_rect(560, 0, 20, 480, 0xff)</span>
</span><span id="__span-29-238"><a id="__codelineno-29-238" name="__codelineno-29-238" href="#__codelineno-29-238"></a>
</span><span id="__span-29-239"><a id="__codelineno-29-239" name="__codelineno-29-239" href="#__codelineno-29-239"></a><span class="sd">    for j in range(0, 3):</span>
</span><span id="__span-29-240"><a id="__codelineno-29-240" name="__codelineno-29-240" href="#__codelineno-29-240"></a><span class="sd">        for i in range(0, 15):</span>
</span><span id="__span-29-241"><a id="__codelineno-29-241" name="__codelineno-29-241" href="#__codelineno-29-241"></a><span class="sd">            epd.line(270+j*160+i, 20+j*160, 375+j*160+i, 140+j*160, 0xff)</span>
</span><span id="__span-29-242"><a id="__codelineno-29-242" name="__codelineno-29-242" href="#__codelineno-29-242"></a><span class="sd">        for i in range(0, 15):</span>
</span><span id="__span-29-243"><a id="__codelineno-29-243" name="__codelineno-29-243" href="#__codelineno-29-243"></a><span class="sd">            epd.line(375+j*160+i, 20+j*160, 270+j*160+i, 140+j*160, 0xff)</span>
</span><span id="__span-29-244"><a id="__codelineno-29-244" name="__codelineno-29-244" href="#__codelineno-29-244"></a><span class="sd">        for i in range(0, 15):</span>
</span><span id="__span-29-245"><a id="__codelineno-29-245" name="__codelineno-29-245" href="#__codelineno-29-245"></a><span class="sd">            epd.line(270+j*160, 20+j*160+i, 390+j*160, 125+j*160+i, 0xff)</span>
</span><span id="__span-29-246"><a id="__codelineno-29-246" name="__codelineno-29-246" href="#__codelineno-29-246"></a><span class="sd">        for i in range(0, 15):</span>
</span><span id="__span-29-247"><a id="__codelineno-29-247" name="__codelineno-29-247" href="#__codelineno-29-247"></a><span class="sd">            epd.line(270+j*160, 125+j*160+i, 390+j*160, 20+j*160+i, 0xff)        </span>
</span><span id="__span-29-248"><a id="__codelineno-29-248" name="__codelineno-29-248" href="#__codelineno-29-248"></a><span class="sd">    epd.fill_rect(270, 190, 100, 100, 0xff)</span>
</span><span id="__span-29-249"><a id="__codelineno-29-249" name="__codelineno-29-249" href="#__codelineno-29-249"></a><span class="sd">    epd.fill_rect(270, 350, 100, 100, 0xff)</span>
</span><span id="__span-29-250"><a id="__codelineno-29-250" name="__codelineno-29-250" href="#__codelineno-29-250"></a><span class="sd">    epd.display(epd.buffer)</span>
</span><span id="__span-29-251"><a id="__codelineno-29-251" name="__codelineno-29-251" href="#__codelineno-29-251"></a><span class="sd">    epd.delay_ms(5000)</span>
</span><span id="__span-29-252"><a id="__codelineno-29-252" name="__codelineno-29-252" href="#__codelineno-29-252"></a>
</span><span id="__span-29-253"><a id="__codelineno-29-253" name="__codelineno-29-253" href="#__codelineno-29-253"></a><span class="sd">    """</span>
</span><span id="__span-29-254"><a id="__codelineno-29-254" name="__codelineno-29-254" href="#__codelineno-29-254"></a>
</span><span id="__span-29-255"><a id="__codelineno-29-255" name="__codelineno-29-255" href="#__codelineno-29-255"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>
</span><span id="__span-29-256"><a id="__codelineno-29-256" name="__codelineno-29-256" href="#__codelineno-29-256"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
</span><span id="__span-29-257"><a id="__codelineno-29-257" name="__codelineno-29-257" href="#__codelineno-29-257"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"sleep"</span><span class="p">)</span>
</span><span id="__span-29-258"><a id="__codelineno-29-258" name="__codelineno-29-258" href="#__codelineno-29-258"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>
</span></code></pre></div>
<p>Now I just had to make my display image and convert it into a byte array. In the future I'll consider trying to get the text to write bigger so that I can change the text in real time from the app without generating a new byte array (which is also a possibility), but for now I'll leave it at this.</p>
<p>I used <a href="https://www.mischianti.org/images-to-byte-array-online-converter-cpp-arduino/">this website</a> to create a byte array of this image.</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/medical-symbol.jpg"></p>
<p>But it was far too large and I got a memory allocation error (Thonny was very slow saving the program). I also noticed it had commas instead of slashes. I tried running this python code on my computer so I could decompress it on the RP2040, but this also failed as I crashed Thonny when copying the output from the terminal..</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="n">str_</span> <span class="o">=</span> <span class="s2">"""THE BYTE ARRAY"""</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="k">for</span> <span class="n">item_</span> <span class="ow">in</span> <span class="n">str_</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">):</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>    <span class="n">item</span> <span class="o">=</span> <span class="n">item_</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>    <span class="k">if</span> <span class="n">items</span> <span class="ow">and</span> <span class="n">item</span> <span class="o">==</span> <span class="n">items</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>        <span class="n">items</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>        <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">item</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</span></code></pre></div>
<p>I re-ran the byte array creation instead at a resolution of 100x100 but got a weird dot pattern when I run the program.</p>
<p><img alt="weird dot patter" src="../../../assets/images/stem/disability-forewarning-system/weird-dot-pattern.jpeg"></p>
<p>I tried converting it with this, but it also failed.</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="n">str_</span> <span class="o">=</span> <span class="s2">"""*the byte list*"""</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">str_</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">" "</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"0x"</span><span class="p">,</span> <span class="s2">"</span><span class="se">\\</span><span class="s2">x"</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span><span class="p">,</span><span class="s2">""</span><span class="p">))</span>
</span></code></pre></div>
<p>Next I tried using <a href="https://cloudconvert.com/">this website</a> to download a BMP file. I uploaded it to the Pico and changed the python to this, which gave a different, weird dot pattern.</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'medical-symbol.bmp'</span><span class="p">,</span> <span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>    <span class="n">fb_smile1</span> <span class="o">=</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()),</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_HLSB</span><span class="p">)</span>
</span></code></pre></div>
<p>I tried every single one of the formats <a href="https://docs.micropython.org/en/latest/library/framebuf.html#constants">here</a> and changed the dimensions to <code>100, 100</code>, but nothing worked.</p>
<p>Finally, <a href="https://forum.micropython.org/viewtopic.php?t=4806&amp;start=20#:~:text=Saved%20that%20as%20a%20.BMP%20file.%20Now%20I%20convert%20that%20into%20a%20very%20old%20bitmap%20format%20(binary%20PBM%20file%20format%20%27P4%27%20by%20Jef%20Poskanzer).%20That%20stuff%20dates%20back%20to%20the%201980%27s%2C%20but%20the%20fun%20here%20is%20that%20the%20data%20of%20that%20bitmap%20is%20arranged%20EXACTLY%20as%20it%20is%20in%20a%20MONO_HLSB%20type%20MicroPython%20FrameBuffer.">this forum</a>, which I had used earlier, revealed that the MONO_HLSB is the same as a PBM file, so I used <a href="https://convertio.co/download/056e909eac491c9db80720981b0d65a0c341e9/">this website</a> to convert my BMP to PBM and uploaded to the Pico. This time the result was much closer to what I wanted.</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'medical-symbol.pbm'</span><span class="p">,</span> <span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>    <span class="n">fb_smile1</span> <span class="o">=</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()),</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_HLSB</span><span class="p">)</span>
</span></code></pre></div>
<p>The graininess was strange as the BMP file was not grainy whatsoever.</p>
<p>I tried using <a href="https://github.com/seth-c-stenzel/bmp-to-pbm-converter">this python program</a> to convert the BMP file instead, since maybe it was a problem with the converting website, but this created no change.</p>
<p>I tried using the original JPG size of 580x531 and still had the same problem. I even used <a href="https://kylepaulsen.com/stuff/NetpbmViewer/">this website</a> to verify it wasn' a problem with the PBM file.</p>
<p>I decided to print out the bytes with <code>print(f.read())</code> and the first 12 characters were <code>P4\n580 531</code>. I decided to try to cut these off by changing <code>fb_smile1 = framebuf.FrameBuffer(bytearray(f.read()), 100, 100, framebuf.MONO_HLSB)</code> to <code>fb_smile1 = framebuf.FrameBuffer(bytearray(f.read()[12:]), 100, 100, framebuf.MONO_HLSB)</code>, and this worked! (I also had to restart Thonny and reinstall MicroPython everytime I printed out the bytes then tried to stop the program when it would get stuck). When I printed out <code>f.read()[:13]</code> there were two more characters than what I intended to cut off - I'm not sure what these were, but the program works so I'll leave it for now.</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/working-medical.jpeg"></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">SPI</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="kn">import</span> <span class="nn">framebuf</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="kn">import</span> <span class="nn">utime</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="c1"># Display resolution</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="n">EPD_WIDTH</span>       <span class="o">=</span> <span class="mi">800</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="n">EPD_HEIGHT</span>      <span class="o">=</span> <span class="mi">480</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="n">RST_PIN</span>         <span class="o">=</span> <span class="mi">12</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="n">DC_PIN</span>          <span class="o">=</span> <span class="mi">8</span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="n">CS_PIN</span>          <span class="o">=</span> <span class="mi">9</span>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="n">BUSY_PIN</span>        <span class="o">=</span> <span class="mi">13</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a>
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a><span class="k">class</span> <span class="nc">EPD_7in5</span><span class="p">(</span><span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">):</span>
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">RST_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a>
</span><span id="__span-34-18"><a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">busy_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">BUSY_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">IN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">PULL_UP</span><span class="p">)</span>
</span><span id="__span-34-19"><a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">CS_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-34-20"><a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">EPD_WIDTH</span> 
</span><span id="__span-34-21"><a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">EPD_HEIGHT</span> 
</span><span id="__span-34-22"><a id="__codelineno-34-22" name="__codelineno-34-22" href="#__codelineno-34-22"></a>
</span><span id="__span-34-23"><a id="__codelineno-34-23" name="__codelineno-34-23" href="#__codelineno-34-23"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span> <span class="o">=</span> <span class="n">SPI</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-34-24"><a id="__codelineno-34-24" name="__codelineno-34-24" href="#__codelineno-34-24"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">baudrate</span><span class="o">=</span><span class="mi">4000_000</span><span class="p">)</span>
</span><span id="__span-34-25"><a id="__codelineno-34-25" name="__codelineno-34-25" href="#__codelineno-34-25"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">DC_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-34-26"><a id="__codelineno-34-26" name="__codelineno-34-26" href="#__codelineno-34-26"></a>
</span><span id="__span-34-27"><a id="__codelineno-34-27" name="__codelineno-34-27" href="#__codelineno-34-27"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="__span-34-28"><a id="__codelineno-34-28" name="__codelineno-34-28" href="#__codelineno-34-28"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_HLSB</span><span class="p">)</span>
</span><span id="__span-34-29"><a id="__codelineno-34-29" name="__codelineno-34-29" href="#__codelineno-34-29"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span><span id="__span-34-30"><a id="__codelineno-34-30" name="__codelineno-34-30" href="#__codelineno-34-30"></a>
</span><span id="__span-34-31"><a id="__codelineno-34-31" name="__codelineno-34-31" href="#__codelineno-34-31"></a>    <span class="k">def</span> <span class="nf">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="__span-34-32"><a id="__codelineno-34-32" name="__codelineno-34-32" href="#__codelineno-34-32"></a>        <span class="n">pin</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="__span-34-33"><a id="__codelineno-34-33" name="__codelineno-34-33" href="#__codelineno-34-33"></a>
</span><span id="__span-34-34"><a id="__codelineno-34-34" name="__codelineno-34-34" href="#__codelineno-34-34"></a>    <span class="k">def</span> <span class="nf">digital_read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">):</span>
</span><span id="__span-34-35"><a id="__codelineno-34-35" name="__codelineno-34-35" href="#__codelineno-34-35"></a>        <span class="k">return</span> <span class="n">pin</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
</span><span id="__span-34-36"><a id="__codelineno-34-36" name="__codelineno-34-36" href="#__codelineno-34-36"></a>
</span><span id="__span-34-37"><a id="__codelineno-34-37" name="__codelineno-34-37" href="#__codelineno-34-37"></a>    <span class="k">def</span> <span class="nf">delay_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delaytime</span><span class="p">):</span>
</span><span id="__span-34-38"><a id="__codelineno-34-38" name="__codelineno-34-38" href="#__codelineno-34-38"></a>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delaytime</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">)</span>
</span><span id="__span-34-39"><a id="__codelineno-34-39" name="__codelineno-34-39" href="#__codelineno-34-39"></a>
</span><span id="__span-34-40"><a id="__codelineno-34-40" name="__codelineno-34-40" href="#__codelineno-34-40"></a>    <span class="k">def</span> <span class="nf">spi_writebyte</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-34-41"><a id="__codelineno-34-41" name="__codelineno-34-41" href="#__codelineno-34-41"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="__span-34-42"><a id="__codelineno-34-42" name="__codelineno-34-42" href="#__codelineno-34-42"></a>
</span><span id="__span-34-43"><a id="__codelineno-34-43" name="__codelineno-34-43" href="#__codelineno-34-43"></a>    <span class="k">def</span> <span class="nf">module_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-34-44"><a id="__codelineno-34-44" name="__codelineno-34-44" href="#__codelineno-34-44"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-34-45"><a id="__codelineno-34-45" name="__codelineno-34-45" href="#__codelineno-34-45"></a>
</span><span id="__span-34-46"><a id="__codelineno-34-46" name="__codelineno-34-46" href="#__codelineno-34-46"></a>    <span class="c1"># Hardware reset</span>
</span><span id="__span-34-47"><a id="__codelineno-34-47" name="__codelineno-34-47" href="#__codelineno-34-47"></a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-34-48"><a id="__codelineno-34-48" name="__codelineno-34-48" href="#__codelineno-34-48"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-34-49"><a id="__codelineno-34-49" name="__codelineno-34-49" href="#__codelineno-34-49"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> 
</span><span id="__span-34-50"><a id="__codelineno-34-50" name="__codelineno-34-50" href="#__codelineno-34-50"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-34-51"><a id="__codelineno-34-51" name="__codelineno-34-51" href="#__codelineno-34-51"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-34-52"><a id="__codelineno-34-52" name="__codelineno-34-52" href="#__codelineno-34-52"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-34-53"><a id="__codelineno-34-53" name="__codelineno-34-53" href="#__codelineno-34-53"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>   
</span><span id="__span-34-54"><a id="__codelineno-34-54" name="__codelineno-34-54" href="#__codelineno-34-54"></a>
</span><span id="__span-34-55"><a id="__codelineno-34-55" name="__codelineno-34-55" href="#__codelineno-34-55"></a>    <span class="k">def</span> <span class="nf">send_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
</span><span id="__span-34-56"><a id="__codelineno-34-56" name="__codelineno-34-56" href="#__codelineno-34-56"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-34-57"><a id="__codelineno-34-57" name="__codelineno-34-57" href="#__codelineno-34-57"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-34-58"><a id="__codelineno-34-58" name="__codelineno-34-58" href="#__codelineno-34-58"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi_writebyte</span><span class="p">([</span><span class="n">command</span><span class="p">])</span>
</span><span id="__span-34-59"><a id="__codelineno-34-59" name="__codelineno-34-59" href="#__codelineno-34-59"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-34-60"><a id="__codelineno-34-60" name="__codelineno-34-60" href="#__codelineno-34-60"></a>
</span><span id="__span-34-61"><a id="__codelineno-34-61" name="__codelineno-34-61" href="#__codelineno-34-61"></a>    <span class="k">def</span> <span class="nf">send_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-34-62"><a id="__codelineno-34-62" name="__codelineno-34-62" href="#__codelineno-34-62"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-34-63"><a id="__codelineno-34-63" name="__codelineno-34-63" href="#__codelineno-34-63"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-34-64"><a id="__codelineno-34-64" name="__codelineno-34-64" href="#__codelineno-34-64"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi_writebyte</span><span class="p">([</span><span class="n">data</span><span class="p">])</span>
</span><span id="__span-34-65"><a id="__codelineno-34-65" name="__codelineno-34-65" href="#__codelineno-34-65"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-34-66"><a id="__codelineno-34-66" name="__codelineno-34-66" href="#__codelineno-34-66"></a>
</span><span id="__span-34-67"><a id="__codelineno-34-67" name="__codelineno-34-67" href="#__codelineno-34-67"></a>    <span class="k">def</span> <span class="nf">send_data1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buf</span><span class="p">):</span>
</span><span id="__span-34-68"><a id="__codelineno-34-68" name="__codelineno-34-68" href="#__codelineno-34-68"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-34-69"><a id="__codelineno-34-69" name="__codelineno-34-69" href="#__codelineno-34-69"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-34-70"><a id="__codelineno-34-70" name="__codelineno-34-70" href="#__codelineno-34-70"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">buf</span><span class="p">))</span>
</span><span id="__span-34-71"><a id="__codelineno-34-71" name="__codelineno-34-71" href="#__codelineno-34-71"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-34-72"><a id="__codelineno-34-72" name="__codelineno-34-72" href="#__codelineno-34-72"></a>
</span><span id="__span-34-73"><a id="__codelineno-34-73" name="__codelineno-34-73" href="#__codelineno-34-73"></a>    <span class="k">def</span> <span class="nf">WaitUntilIdle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-34-74"><a id="__codelineno-34-74" name="__codelineno-34-74" href="#__codelineno-34-74"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"e-Paper busy"</span><span class="p">)</span>
</span><span id="__span-34-75"><a id="__codelineno-34-75" name="__codelineno-34-75" href="#__codelineno-34-75"></a>        <span class="k">while</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">digital_read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">busy_pin</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>    <span class="c1"># Wait until the busy_pin goes LOW</span>
</span><span id="__span-34-76"><a id="__codelineno-34-76" name="__codelineno-34-76" href="#__codelineno-34-76"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x71</span><span class="p">)</span>
</span><span id="__span-34-77"><a id="__codelineno-34-77" name="__codelineno-34-77" href="#__codelineno-34-77"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span><span id="__span-34-78"><a id="__codelineno-34-78" name="__codelineno-34-78" href="#__codelineno-34-78"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> 
</span><span id="__span-34-79"><a id="__codelineno-34-79" name="__codelineno-34-79" href="#__codelineno-34-79"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"e-Paper busy release"</span><span class="p">)</span>  
</span><span id="__span-34-80"><a id="__codelineno-34-80" name="__codelineno-34-80" href="#__codelineno-34-80"></a>
</span><span id="__span-34-81"><a id="__codelineno-34-81" name="__codelineno-34-81" href="#__codelineno-34-81"></a>    <span class="k">def</span> <span class="nf">TurnOnDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-34-82"><a id="__codelineno-34-82" name="__codelineno-34-82" href="#__codelineno-34-82"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x12</span><span class="p">)</span> <span class="c1"># DISPLAY REFRESH</span>
</span><span id="__span-34-83"><a id="__codelineno-34-83" name="__codelineno-34-83" href="#__codelineno-34-83"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>      <span class="c1">#!!!The delay here is necessary, 200uS at least!!!</span>
</span><span id="__span-34-84"><a id="__codelineno-34-84" name="__codelineno-34-84" href="#__codelineno-34-84"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-34-85"><a id="__codelineno-34-85" name="__codelineno-34-85" href="#__codelineno-34-85"></a>
</span><span id="__span-34-86"><a id="__codelineno-34-86" name="__codelineno-34-86" href="#__codelineno-34-86"></a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-34-87"><a id="__codelineno-34-87" name="__codelineno-34-87" href="#__codelineno-34-87"></a>        <span class="c1"># EPD hardware init start     </span>
</span><span id="__span-34-88"><a id="__codelineno-34-88" name="__codelineno-34-88" href="#__codelineno-34-88"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="__span-34-89"><a id="__codelineno-34-89" name="__codelineno-34-89" href="#__codelineno-34-89"></a>
</span><span id="__span-34-90"><a id="__codelineno-34-90" name="__codelineno-34-90" href="#__codelineno-34-90"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>  <span class="c1"># POWER SETTING</span>
</span><span id="__span-34-91"><a id="__codelineno-34-91" name="__codelineno-34-91" href="#__codelineno-34-91"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span>
</span><span id="__span-34-92"><a id="__codelineno-34-92" name="__codelineno-34-92" href="#__codelineno-34-92"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span>     <span class="c1"># VGH=20V,VGL=-20V</span>
</span><span id="__span-34-93"><a id="__codelineno-34-93" name="__codelineno-34-93" href="#__codelineno-34-93"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x3f</span><span class="p">)</span>     <span class="c1"># VDH=15V</span>
</span><span id="__span-34-94"><a id="__codelineno-34-94" name="__codelineno-34-94" href="#__codelineno-34-94"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x3f</span><span class="p">)</span>     <span class="c1"># VDL=-15V</span>
</span><span id="__span-34-95"><a id="__codelineno-34-95" name="__codelineno-34-95" href="#__codelineno-34-95"></a>
</span><span id="__span-34-96"><a id="__codelineno-34-96" name="__codelineno-34-96" href="#__codelineno-34-96"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x04</span><span class="p">)</span>  <span class="c1"># POWER ON</span>
</span><span id="__span-34-97"><a id="__codelineno-34-97" name="__codelineno-34-97" href="#__codelineno-34-97"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-34-98"><a id="__codelineno-34-98" name="__codelineno-34-98" href="#__codelineno-34-98"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-34-99"><a id="__codelineno-34-99" name="__codelineno-34-99" href="#__codelineno-34-99"></a>
</span><span id="__span-34-100"><a id="__codelineno-34-100" name="__codelineno-34-100" href="#__codelineno-34-100"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X00</span><span class="p">)</span>   <span class="c1"># PANNEL SETTING</span>
</span><span id="__span-34-101"><a id="__codelineno-34-101" name="__codelineno-34-101" href="#__codelineno-34-101"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x1F</span><span class="p">)</span>      <span class="c1"># KW-3f   KWR-2F  BWROTP 0f   BWOTP 1f</span>
</span><span id="__span-34-102"><a id="__codelineno-34-102" name="__codelineno-34-102" href="#__codelineno-34-102"></a>
</span><span id="__span-34-103"><a id="__codelineno-34-103" name="__codelineno-34-103" href="#__codelineno-34-103"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x61</span><span class="p">)</span>     <span class="c1"># tres</span>
</span><span id="__span-34-104"><a id="__codelineno-34-104" name="__codelineno-34-104" href="#__codelineno-34-104"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x03</span><span class="p">)</span>     <span class="c1"># source 800</span>
</span><span id="__span-34-105"><a id="__codelineno-34-105" name="__codelineno-34-105" href="#__codelineno-34-105"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x20</span><span class="p">)</span>
</span><span id="__span-34-106"><a id="__codelineno-34-106" name="__codelineno-34-106" href="#__codelineno-34-106"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>     <span class="c1"># gate 480</span>
</span><span id="__span-34-107"><a id="__codelineno-34-107" name="__codelineno-34-107" href="#__codelineno-34-107"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0xE0</span><span class="p">)</span>
</span><span id="__span-34-108"><a id="__codelineno-34-108" name="__codelineno-34-108" href="#__codelineno-34-108"></a>
</span><span id="__span-34-109"><a id="__codelineno-34-109" name="__codelineno-34-109" href="#__codelineno-34-109"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X15</span><span class="p">)</span>
</span><span id="__span-34-110"><a id="__codelineno-34-110" name="__codelineno-34-110" href="#__codelineno-34-110"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-34-111"><a id="__codelineno-34-111" name="__codelineno-34-111" href="#__codelineno-34-111"></a>
</span><span id="__span-34-112"><a id="__codelineno-34-112" name="__codelineno-34-112" href="#__codelineno-34-112"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X50</span><span class="p">)</span>     <span class="c1"># VCOM AND DATA INTERVAL SETTING</span>
</span><span id="__span-34-113"><a id="__codelineno-34-113" name="__codelineno-34-113" href="#__codelineno-34-113"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-34-114"><a id="__codelineno-34-114" name="__codelineno-34-114" href="#__codelineno-34-114"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-34-115"><a id="__codelineno-34-115" name="__codelineno-34-115" href="#__codelineno-34-115"></a>
</span><span id="__span-34-116"><a id="__codelineno-34-116" name="__codelineno-34-116" href="#__codelineno-34-116"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X60</span><span class="p">)</span>     <span class="c1"># TCON SETTING</span>
</span><span id="__span-34-117"><a id="__codelineno-34-117" name="__codelineno-34-117" href="#__codelineno-34-117"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x22</span><span class="p">)</span>
</span><span id="__span-34-118"><a id="__codelineno-34-118" name="__codelineno-34-118" href="#__codelineno-34-118"></a>
</span><span id="__span-34-119"><a id="__codelineno-34-119" name="__codelineno-34-119" href="#__codelineno-34-119"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x65</span><span class="p">)</span>     <span class="c1"># Resolution setting</span>
</span><span id="__span-34-120"><a id="__codelineno-34-120" name="__codelineno-34-120" href="#__codelineno-34-120"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-34-121"><a id="__codelineno-34-121" name="__codelineno-34-121" href="#__codelineno-34-121"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>     <span class="c1"># 800*480</span>
</span><span id="__span-34-122"><a id="__codelineno-34-122" name="__codelineno-34-122" href="#__codelineno-34-122"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-34-123"><a id="__codelineno-34-123" name="__codelineno-34-123" href="#__codelineno-34-123"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-34-124"><a id="__codelineno-34-124" name="__codelineno-34-124" href="#__codelineno-34-124"></a>
</span><span id="__span-34-125"><a id="__codelineno-34-125" name="__codelineno-34-125" href="#__codelineno-34-125"></a>        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="__span-34-126"><a id="__codelineno-34-126" name="__codelineno-34-126" href="#__codelineno-34-126"></a>
</span><span id="__span-34-127"><a id="__codelineno-34-127" name="__codelineno-34-127" href="#__codelineno-34-127"></a>    <span class="k">def</span> <span class="nf">Clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-34-128"><a id="__codelineno-34-128" name="__codelineno-34-128" href="#__codelineno-34-128"></a>
</span><span id="__span-34-129"><a id="__codelineno-34-129" name="__codelineno-34-129" href="#__codelineno-34-129"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-34-130"><a id="__codelineno-34-130" name="__codelineno-34-130" href="#__codelineno-34-130"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-34-131"><a id="__codelineno-34-131" name="__codelineno-34-131" href="#__codelineno-34-131"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-34-132"><a id="__codelineno-34-132" name="__codelineno-34-132" href="#__codelineno-34-132"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-34-133"><a id="__codelineno-34-133" name="__codelineno-34-133" href="#__codelineno-34-133"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-34-134"><a id="__codelineno-34-134" name="__codelineno-34-134" href="#__codelineno-34-134"></a>
</span><span id="__span-34-135"><a id="__codelineno-34-135" name="__codelineno-34-135" href="#__codelineno-34-135"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-34-136"><a id="__codelineno-34-136" name="__codelineno-34-136" href="#__codelineno-34-136"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-34-137"><a id="__codelineno-34-137" name="__codelineno-34-137" href="#__codelineno-34-137"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0xff</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-34-138"><a id="__codelineno-34-138" name="__codelineno-34-138" href="#__codelineno-34-138"></a>
</span><span id="__span-34-139"><a id="__codelineno-34-139" name="__codelineno-34-139" href="#__codelineno-34-139"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-34-140"><a id="__codelineno-34-140" name="__codelineno-34-140" href="#__codelineno-34-140"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-34-141"><a id="__codelineno-34-141" name="__codelineno-34-141" href="#__codelineno-34-141"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0x00</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-34-142"><a id="__codelineno-34-142" name="__codelineno-34-142" href="#__codelineno-34-142"></a>
</span><span id="__span-34-143"><a id="__codelineno-34-143" name="__codelineno-34-143" href="#__codelineno-34-143"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-34-144"><a id="__codelineno-34-144" name="__codelineno-34-144" href="#__codelineno-34-144"></a>
</span><span id="__span-34-145"><a id="__codelineno-34-145" name="__codelineno-34-145" href="#__codelineno-34-145"></a>    <span class="k">def</span> <span class="nf">ClearBlack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-34-146"><a id="__codelineno-34-146" name="__codelineno-34-146" href="#__codelineno-34-146"></a>
</span><span id="__span-34-147"><a id="__codelineno-34-147" name="__codelineno-34-147" href="#__codelineno-34-147"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-34-148"><a id="__codelineno-34-148" name="__codelineno-34-148" href="#__codelineno-34-148"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-34-149"><a id="__codelineno-34-149" name="__codelineno-34-149" href="#__codelineno-34-149"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-34-150"><a id="__codelineno-34-150" name="__codelineno-34-150" href="#__codelineno-34-150"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-34-151"><a id="__codelineno-34-151" name="__codelineno-34-151" href="#__codelineno-34-151"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-34-152"><a id="__codelineno-34-152" name="__codelineno-34-152" href="#__codelineno-34-152"></a>
</span><span id="__span-34-153"><a id="__codelineno-34-153" name="__codelineno-34-153" href="#__codelineno-34-153"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-34-154"><a id="__codelineno-34-154" name="__codelineno-34-154" href="#__codelineno-34-154"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-34-155"><a id="__codelineno-34-155" name="__codelineno-34-155" href="#__codelineno-34-155"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0x00</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-34-156"><a id="__codelineno-34-156" name="__codelineno-34-156" href="#__codelineno-34-156"></a>
</span><span id="__span-34-157"><a id="__codelineno-34-157" name="__codelineno-34-157" href="#__codelineno-34-157"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-34-158"><a id="__codelineno-34-158" name="__codelineno-34-158" href="#__codelineno-34-158"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-34-159"><a id="__codelineno-34-159" name="__codelineno-34-159" href="#__codelineno-34-159"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0xff</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-34-160"><a id="__codelineno-34-160" name="__codelineno-34-160" href="#__codelineno-34-160"></a>
</span><span id="__span-34-161"><a id="__codelineno-34-161" name="__codelineno-34-161" href="#__codelineno-34-161"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-34-162"><a id="__codelineno-34-162" name="__codelineno-34-162" href="#__codelineno-34-162"></a>
</span><span id="__span-34-163"><a id="__codelineno-34-163" name="__codelineno-34-163" href="#__codelineno-34-163"></a>    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">blackimage</span><span class="p">):</span>
</span><span id="__span-34-164"><a id="__codelineno-34-164" name="__codelineno-34-164" href="#__codelineno-34-164"></a>
</span><span id="__span-34-165"><a id="__codelineno-34-165" name="__codelineno-34-165" href="#__codelineno-34-165"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-34-166"><a id="__codelineno-34-166" name="__codelineno-34-166" href="#__codelineno-34-166"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-34-167"><a id="__codelineno-34-167" name="__codelineno-34-167" href="#__codelineno-34-167"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-34-168"><a id="__codelineno-34-168" name="__codelineno-34-168" href="#__codelineno-34-168"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-34-169"><a id="__codelineno-34-169" name="__codelineno-34-169" href="#__codelineno-34-169"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-34-170"><a id="__codelineno-34-170" name="__codelineno-34-170" href="#__codelineno-34-170"></a>
</span><span id="__span-34-171"><a id="__codelineno-34-171" name="__codelineno-34-171" href="#__codelineno-34-171"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span> 
</span><span id="__span-34-172"><a id="__codelineno-34-172" name="__codelineno-34-172" href="#__codelineno-34-172"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-34-173"><a id="__codelineno-34-173" name="__codelineno-34-173" href="#__codelineno-34-173"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">(</span><span class="n">blackimage</span><span class="p">[(</span><span class="n">i</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span> <span class="p">:</span> <span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">high</span><span class="p">)])</span>
</span><span id="__span-34-174"><a id="__codelineno-34-174" name="__codelineno-34-174" href="#__codelineno-34-174"></a>
</span><span id="__span-34-175"><a id="__codelineno-34-175" name="__codelineno-34-175" href="#__codelineno-34-175"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-34-176"><a id="__codelineno-34-176" name="__codelineno-34-176" href="#__codelineno-34-176"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-34-177"><a id="__codelineno-34-177" name="__codelineno-34-177" href="#__codelineno-34-177"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">(</span><span class="n">blackimage</span><span class="p">[(</span><span class="n">i</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span> <span class="p">:</span> <span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">high</span><span class="p">)])</span>
</span><span id="__span-34-178"><a id="__codelineno-34-178" name="__codelineno-34-178" href="#__codelineno-34-178"></a>
</span><span id="__span-34-179"><a id="__codelineno-34-179" name="__codelineno-34-179" href="#__codelineno-34-179"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-34-180"><a id="__codelineno-34-180" name="__codelineno-34-180" href="#__codelineno-34-180"></a>
</span><span id="__span-34-181"><a id="__codelineno-34-181" name="__codelineno-34-181" href="#__codelineno-34-181"></a>
</span><span id="__span-34-182"><a id="__codelineno-34-182" name="__codelineno-34-182" href="#__codelineno-34-182"></a>    <span class="k">def</span> <span class="nf">sleep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-34-183"><a id="__codelineno-34-183" name="__codelineno-34-183" href="#__codelineno-34-183"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x02</span><span class="p">)</span> <span class="c1"># power off</span>
</span><span id="__span-34-184"><a id="__codelineno-34-184" name="__codelineno-34-184" href="#__codelineno-34-184"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-34-185"><a id="__codelineno-34-185" name="__codelineno-34-185" href="#__codelineno-34-185"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span> <span class="c1"># deep sleep</span>
</span><span id="__span-34-186"><a id="__codelineno-34-186" name="__codelineno-34-186" href="#__codelineno-34-186"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0xa5</span><span class="p">)</span>
</span><span id="__span-34-187"><a id="__codelineno-34-187" name="__codelineno-34-187" href="#__codelineno-34-187"></a><span class="sd">"""</span>
</span><span id="__span-34-188"><a id="__codelineno-34-188" name="__codelineno-34-188" href="#__codelineno-34-188"></a><span class="sd">def poly(epd, points):</span>
</span><span id="__span-34-189"><a id="__codelineno-34-189" name="__codelineno-34-189" href="#__codelineno-34-189"></a><span class="sd">    coordinates = [[]]</span>
</span><span id="__span-34-190"><a id="__codelineno-34-190" name="__codelineno-34-190" href="#__codelineno-34-190"></a><span class="sd">    for point in points:</span>
</span><span id="__span-34-191"><a id="__codelineno-34-191" name="__codelineno-34-191" href="#__codelineno-34-191"></a><span class="sd">        if len(coordinates[-1]) == 4:</span>
</span><span id="__span-34-192"><a id="__codelineno-34-192" name="__codelineno-34-192" href="#__codelineno-34-192"></a><span class="sd">            coordinates.append([])</span>
</span><span id="__span-34-193"><a id="__codelineno-34-193" name="__codelineno-34-193" href="#__codelineno-34-193"></a><span class="sd">            coordinates[-1] += [coordinates[-2][2], coordinates[-2][3]]</span>
</span><span id="__span-34-194"><a id="__codelineno-34-194" name="__codelineno-34-194" href="#__codelineno-34-194"></a><span class="sd">        coordinates[-1].append(point[0])</span>
</span><span id="__span-34-195"><a id="__codelineno-34-195" name="__codelineno-34-195" href="#__codelineno-34-195"></a><span class="sd">        coordinates[-1].append(point[1])</span>
</span><span id="__span-34-196"><a id="__codelineno-34-196" name="__codelineno-34-196" href="#__codelineno-34-196"></a><span class="sd">    print(coordinates)</span>
</span><span id="__span-34-197"><a id="__codelineno-34-197" name="__codelineno-34-197" href="#__codelineno-34-197"></a><span class="sd">    for c in coordinates:</span>
</span><span id="__span-34-198"><a id="__codelineno-34-198" name="__codelineno-34-198" href="#__codelineno-34-198"></a><span class="sd">        epd.line(c[0], c[1], c[2], c[3], 0xff)</span>
</span><span id="__span-34-199"><a id="__codelineno-34-199" name="__codelineno-34-199" href="#__codelineno-34-199"></a><span class="sd">    epd.line(coordinates[-1][2], coordinates[-1][3], coordinates[0][0], coordinates[0][1], 0xff)</span>
</span><span id="__span-34-200"><a id="__codelineno-34-200" name="__codelineno-34-200" href="#__codelineno-34-200"></a><span class="sd">"""</span>
</span><span id="__span-34-201"><a id="__codelineno-34-201" name="__codelineno-34-201" href="#__codelineno-34-201"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'medical-symbol-o-o.pbm'</span><span class="p">,</span> <span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="__span-34-202"><a id="__codelineno-34-202" name="__codelineno-34-202" href="#__codelineno-34-202"></a>    <span class="n">fb_smile1</span> <span class="o">=</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()[</span><span class="mi">12</span><span class="p">:]),</span> <span class="mi">580</span><span class="p">,</span> <span class="mi">531</span><span class="p">,</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_HLSB</span><span class="p">)</span>
</span><span id="__span-34-203"><a id="__codelineno-34-203" name="__codelineno-34-203" href="#__codelineno-34-203"></a>
</span><span id="__span-34-204"><a id="__codelineno-34-204" name="__codelineno-34-204" href="#__codelineno-34-204"></a><span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">'__main__'</span><span class="p">:</span>
</span><span id="__span-34-205"><a id="__codelineno-34-205" name="__codelineno-34-205" href="#__codelineno-34-205"></a>    <span class="n">epd</span> <span class="o">=</span> <span class="n">EPD_7in5</span><span class="p">()</span>
</span><span id="__span-34-206"><a id="__codelineno-34-206" name="__codelineno-34-206" href="#__codelineno-34-206"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>
</span><span id="__span-34-207"><a id="__codelineno-34-207" name="__codelineno-34-207" href="#__codelineno-34-207"></a>
</span><span id="__span-34-208"><a id="__codelineno-34-208" name="__codelineno-34-208" href="#__codelineno-34-208"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-34-209"><a id="__codelineno-34-209" name="__codelineno-34-209" href="#__codelineno-34-209"></a>
</span><span id="__span-34-210"><a id="__codelineno-34-210" name="__codelineno-34-210" href="#__codelineno-34-210"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">fb_smile1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span>
</span><span id="__span-34-211"><a id="__codelineno-34-211" name="__codelineno-34-211" href="#__codelineno-34-211"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">epd</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
</span><span id="__span-34-212"><a id="__codelineno-34-212" name="__codelineno-34-212" href="#__codelineno-34-212"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</span><span id="__span-34-213"><a id="__codelineno-34-213" name="__codelineno-34-213" href="#__codelineno-34-213"></a>
</span><span id="__span-34-214"><a id="__codelineno-34-214" name="__codelineno-34-214" href="#__codelineno-34-214"></a><span class="w">    </span><span class="sd">"""</span>
</span><span id="__span-34-215"><a id="__codelineno-34-215" name="__codelineno-34-215" href="#__codelineno-34-215"></a><span class="sd">    epd.text("Waveshare", 5, 10, 0xff)</span>
</span><span id="__span-34-216"><a id="__codelineno-34-216" name="__codelineno-34-216" href="#__codelineno-34-216"></a><span class="sd">    epd.text("Pico_ePaper-7.5", 5, 40, 0xff)</span>
</span><span id="__span-34-217"><a id="__codelineno-34-217" name="__codelineno-34-217" href="#__codelineno-34-217"></a><span class="sd">    epd.text("Raspberry Pico", 5, 70, 0xff)</span>
</span><span id="__span-34-218"><a id="__codelineno-34-218" name="__codelineno-34-218" href="#__codelineno-34-218"></a><span class="sd">    epd.display(epd.buffer)</span>
</span><span id="__span-34-219"><a id="__codelineno-34-219" name="__codelineno-34-219" href="#__codelineno-34-219"></a><span class="sd">    epd.delay_ms(5000)</span>
</span><span id="__span-34-220"><a id="__codelineno-34-220" name="__codelineno-34-220" href="#__codelineno-34-220"></a>
</span><span id="__span-34-221"><a id="__codelineno-34-221" name="__codelineno-34-221" href="#__codelineno-34-221"></a><span class="sd">    epd.vline(10, 90, 60, 0xff)</span>
</span><span id="__span-34-222"><a id="__codelineno-34-222" name="__codelineno-34-222" href="#__codelineno-34-222"></a><span class="sd">    epd.vline(120, 90, 60, 0xff)</span>
</span><span id="__span-34-223"><a id="__codelineno-34-223" name="__codelineno-34-223" href="#__codelineno-34-223"></a><span class="sd">    epd.hline(10, 90, 110, 0xff)</span>
</span><span id="__span-34-224"><a id="__codelineno-34-224" name="__codelineno-34-224" href="#__codelineno-34-224"></a><span class="sd">    epd.hline(10, 150, 110, 0xff)</span>
</span><span id="__span-34-225"><a id="__codelineno-34-225" name="__codelineno-34-225" href="#__codelineno-34-225"></a><span class="sd">    epd.line(10, 90, 120, 150, 0xff)</span>
</span><span id="__span-34-226"><a id="__codelineno-34-226" name="__codelineno-34-226" href="#__codelineno-34-226"></a><span class="sd">    epd.line(120, 90, 10, 150, 0xff)</span>
</span><span id="__span-34-227"><a id="__codelineno-34-227" name="__codelineno-34-227" href="#__codelineno-34-227"></a><span class="sd">    epd.display(epd.buffer)</span>
</span><span id="__span-34-228"><a id="__codelineno-34-228" name="__codelineno-34-228" href="#__codelineno-34-228"></a><span class="sd">    epd.delay_ms(5000)</span>
</span><span id="__span-34-229"><a id="__codelineno-34-229" name="__codelineno-34-229" href="#__codelineno-34-229"></a>
</span><span id="__span-34-230"><a id="__codelineno-34-230" name="__codelineno-34-230" href="#__codelineno-34-230"></a><span class="sd">    epd.rect(10, 180, 50, 80, 0xff)</span>
</span><span id="__span-34-231"><a id="__codelineno-34-231" name="__codelineno-34-231" href="#__codelineno-34-231"></a><span class="sd">    epd.fill_rect(70, 180, 50, 80, 0xff)</span>
</span><span id="__span-34-232"><a id="__codelineno-34-232" name="__codelineno-34-232" href="#__codelineno-34-232"></a><span class="sd">    epd.display(epd.buffer)</span>
</span><span id="__span-34-233"><a id="__codelineno-34-233" name="__codelineno-34-233" href="#__codelineno-34-233"></a><span class="sd">    epd.delay_ms(5000)</span>
</span><span id="__span-34-234"><a id="__codelineno-34-234" name="__codelineno-34-234" href="#__codelineno-34-234"></a>
</span><span id="__span-34-235"><a id="__codelineno-34-235" name="__codelineno-34-235" href="#__codelineno-34-235"></a><span class="sd">    epd.fill_rect(250, 150, 480, 20, 0xff)</span>
</span><span id="__span-34-236"><a id="__codelineno-34-236" name="__codelineno-34-236" href="#__codelineno-34-236"></a><span class="sd">    epd.fill_rect(250, 310, 480, 20, 0xff)</span>
</span><span id="__span-34-237"><a id="__codelineno-34-237" name="__codelineno-34-237" href="#__codelineno-34-237"></a><span class="sd">    epd.fill_rect(400, 0, 20, 480, 0xff)</span>
</span><span id="__span-34-238"><a id="__codelineno-34-238" name="__codelineno-34-238" href="#__codelineno-34-238"></a><span class="sd">    epd.fill_rect(560, 0, 20, 480, 0xff)</span>
</span><span id="__span-34-239"><a id="__codelineno-34-239" name="__codelineno-34-239" href="#__codelineno-34-239"></a>
</span><span id="__span-34-240"><a id="__codelineno-34-240" name="__codelineno-34-240" href="#__codelineno-34-240"></a><span class="sd">    for j in range(0, 3):</span>
</span><span id="__span-34-241"><a id="__codelineno-34-241" name="__codelineno-34-241" href="#__codelineno-34-241"></a><span class="sd">        for i in range(0, 15):</span>
</span><span id="__span-34-242"><a id="__codelineno-34-242" name="__codelineno-34-242" href="#__codelineno-34-242"></a><span class="sd">            epd.line(270+j*160+i, 20+j*160, 375+j*160+i, 140+j*160, 0xff)</span>
</span><span id="__span-34-243"><a id="__codelineno-34-243" name="__codelineno-34-243" href="#__codelineno-34-243"></a><span class="sd">        for i in range(0, 15):</span>
</span><span id="__span-34-244"><a id="__codelineno-34-244" name="__codelineno-34-244" href="#__codelineno-34-244"></a><span class="sd">            epd.line(375+j*160+i, 20+j*160, 270+j*160+i, 140+j*160, 0xff)</span>
</span><span id="__span-34-245"><a id="__codelineno-34-245" name="__codelineno-34-245" href="#__codelineno-34-245"></a><span class="sd">        for i in range(0, 15):</span>
</span><span id="__span-34-246"><a id="__codelineno-34-246" name="__codelineno-34-246" href="#__codelineno-34-246"></a><span class="sd">            epd.line(270+j*160, 20+j*160+i, 390+j*160, 125+j*160+i, 0xff)</span>
</span><span id="__span-34-247"><a id="__codelineno-34-247" name="__codelineno-34-247" href="#__codelineno-34-247"></a><span class="sd">        for i in range(0, 15):</span>
</span><span id="__span-34-248"><a id="__codelineno-34-248" name="__codelineno-34-248" href="#__codelineno-34-248"></a><span class="sd">            epd.line(270+j*160, 125+j*160+i, 390+j*160, 20+j*160+i, 0xff)        </span>
</span><span id="__span-34-249"><a id="__codelineno-34-249" name="__codelineno-34-249" href="#__codelineno-34-249"></a><span class="sd">    epd.fill_rect(270, 190, 100, 100, 0xff)</span>
</span><span id="__span-34-250"><a id="__codelineno-34-250" name="__codelineno-34-250" href="#__codelineno-34-250"></a><span class="sd">    epd.fill_rect(270, 350, 100, 100, 0xff)</span>
</span><span id="__span-34-251"><a id="__codelineno-34-251" name="__codelineno-34-251" href="#__codelineno-34-251"></a><span class="sd">    epd.display(epd.buffer)</span>
</span><span id="__span-34-252"><a id="__codelineno-34-252" name="__codelineno-34-252" href="#__codelineno-34-252"></a><span class="sd">    epd.delay_ms(5000)</span>
</span><span id="__span-34-253"><a id="__codelineno-34-253" name="__codelineno-34-253" href="#__codelineno-34-253"></a>
</span><span id="__span-34-254"><a id="__codelineno-34-254" name="__codelineno-34-254" href="#__codelineno-34-254"></a><span class="sd">    """</span>
</span><span id="__span-34-255"><a id="__codelineno-34-255" name="__codelineno-34-255" href="#__codelineno-34-255"></a>
</span><span id="__span-34-256"><a id="__codelineno-34-256" name="__codelineno-34-256" href="#__codelineno-34-256"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>
</span><span id="__span-34-257"><a id="__codelineno-34-257" name="__codelineno-34-257" href="#__codelineno-34-257"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
</span><span id="__span-34-258"><a id="__codelineno-34-258" name="__codelineno-34-258" href="#__codelineno-34-258"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"sleep"</span><span class="p">)</span>
</span><span id="__span-34-259"><a id="__codelineno-34-259" name="__codelineno-34-259" href="#__codelineno-34-259"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>
</span></code></pre></div>
<h3 id="final-image">Final Image</h3>
<p>I created a new project in <a href="https://www.adobe.com/creativecloud/business/teams.html?sdid=B16P3W9X&amp;mv=search&amp;ef_id=CjwKCAjw1MajBhAcEiwAagW9MQWN2rzAf6raCD9Bak35L31fb3aLxki7eZ432obabxN6koCqr-4Q2RoCFQMQAvD_BwE:G:s&amp;s_kwcid=AL!3085!3!566814725454!e!!g!!adobe%20premiere%20pro!15482932269!136265040208&amp;gad=1">Adobe Premiere Pro</a> and made a new, white <code>Color Matte</code> that is <code>800x480</code> pixels per <a href="https://www.waveshare.com/wiki/7.5inch_NFC-Powered_e-Paper#:~:text=Paper%20Module%2C%20with-,800%20x%20480,-resolution.%20Users%20can">this website</a> to match the epaper display. After creating a frame with the desired image, I clicked the camera icon in the preview window and exported the frame as a BMP. I just ignored the <code>.bmp.xmp</code> file as I'm not sure of its purpose. I then converted it to a PBM file with the same website as above.</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/final-img.jpg"></p>
<p>It worked perfectly!! I also removed the code that clears the screen at the end of the program.</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/final-img-working.jpeg"></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">SPI</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="kn">import</span> <span class="nn">framebuf</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="kn">import</span> <span class="nn">utime</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="c1"># Display resolution</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="n">EPD_WIDTH</span>       <span class="o">=</span> <span class="mi">800</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="n">EPD_HEIGHT</span>      <span class="o">=</span> <span class="mi">480</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="n">RST_PIN</span>         <span class="o">=</span> <span class="mi">12</span>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="n">DC_PIN</span>          <span class="o">=</span> <span class="mi">8</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="n">CS_PIN</span>          <span class="o">=</span> <span class="mi">9</span>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="n">BUSY_PIN</span>        <span class="o">=</span> <span class="mi">13</span>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="k">class</span> <span class="nc">EPD_7in5</span><span class="p">(</span><span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">):</span>
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">RST_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a>
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">busy_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">BUSY_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">IN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">PULL_UP</span><span class="p">)</span>
</span><span id="__span-35-19"><a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">CS_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-35-20"><a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">EPD_WIDTH</span> 
</span><span id="__span-35-21"><a id="__codelineno-35-21" name="__codelineno-35-21" href="#__codelineno-35-21"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">EPD_HEIGHT</span> 
</span><span id="__span-35-22"><a id="__codelineno-35-22" name="__codelineno-35-22" href="#__codelineno-35-22"></a>
</span><span id="__span-35-23"><a id="__codelineno-35-23" name="__codelineno-35-23" href="#__codelineno-35-23"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span> <span class="o">=</span> <span class="n">SPI</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-35-24"><a id="__codelineno-35-24" name="__codelineno-35-24" href="#__codelineno-35-24"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">baudrate</span><span class="o">=</span><span class="mi">4000_000</span><span class="p">)</span>
</span><span id="__span-35-25"><a id="__codelineno-35-25" name="__codelineno-35-25" href="#__codelineno-35-25"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">DC_PIN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span><span id="__span-35-26"><a id="__codelineno-35-26" name="__codelineno-35-26" href="#__codelineno-35-26"></a>
</span><span id="__span-35-27"><a id="__codelineno-35-27" name="__codelineno-35-27" href="#__codelineno-35-27"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span><span class="p">)</span>
</span><span id="__span-35-28"><a id="__codelineno-35-28" name="__codelineno-35-28" href="#__codelineno-35-28"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_HLSB</span><span class="p">)</span>
</span><span id="__span-35-29"><a id="__codelineno-35-29" name="__codelineno-35-29" href="#__codelineno-35-29"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span><span id="__span-35-30"><a id="__codelineno-35-30" name="__codelineno-35-30" href="#__codelineno-35-30"></a>
</span><span id="__span-35-31"><a id="__codelineno-35-31" name="__codelineno-35-31" href="#__codelineno-35-31"></a>    <span class="k">def</span> <span class="nf">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="__span-35-32"><a id="__codelineno-35-32" name="__codelineno-35-32" href="#__codelineno-35-32"></a>        <span class="n">pin</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="__span-35-33"><a id="__codelineno-35-33" name="__codelineno-35-33" href="#__codelineno-35-33"></a>
</span><span id="__span-35-34"><a id="__codelineno-35-34" name="__codelineno-35-34" href="#__codelineno-35-34"></a>    <span class="k">def</span> <span class="nf">digital_read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">):</span>
</span><span id="__span-35-35"><a id="__codelineno-35-35" name="__codelineno-35-35" href="#__codelineno-35-35"></a>        <span class="k">return</span> <span class="n">pin</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
</span><span id="__span-35-36"><a id="__codelineno-35-36" name="__codelineno-35-36" href="#__codelineno-35-36"></a>
</span><span id="__span-35-37"><a id="__codelineno-35-37" name="__codelineno-35-37" href="#__codelineno-35-37"></a>    <span class="k">def</span> <span class="nf">delay_ms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delaytime</span><span class="p">):</span>
</span><span id="__span-35-38"><a id="__codelineno-35-38" name="__codelineno-35-38" href="#__codelineno-35-38"></a>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delaytime</span> <span class="o">/</span> <span class="mf">1000.0</span><span class="p">)</span>
</span><span id="__span-35-39"><a id="__codelineno-35-39" name="__codelineno-35-39" href="#__codelineno-35-39"></a>
</span><span id="__span-35-40"><a id="__codelineno-35-40" name="__codelineno-35-40" href="#__codelineno-35-40"></a>    <span class="k">def</span> <span class="nf">spi_writebyte</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-35-41"><a id="__codelineno-35-41" name="__codelineno-35-41" href="#__codelineno-35-41"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="__span-35-42"><a id="__codelineno-35-42" name="__codelineno-35-42" href="#__codelineno-35-42"></a>
</span><span id="__span-35-43"><a id="__codelineno-35-43" name="__codelineno-35-43" href="#__codelineno-35-43"></a>    <span class="k">def</span> <span class="nf">module_exit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-35-44"><a id="__codelineno-35-44" name="__codelineno-35-44" href="#__codelineno-35-44"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-35-45"><a id="__codelineno-35-45" name="__codelineno-35-45" href="#__codelineno-35-45"></a>
</span><span id="__span-35-46"><a id="__codelineno-35-46" name="__codelineno-35-46" href="#__codelineno-35-46"></a>    <span class="c1"># Hardware reset</span>
</span><span id="__span-35-47"><a id="__codelineno-35-47" name="__codelineno-35-47" href="#__codelineno-35-47"></a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-35-48"><a id="__codelineno-35-48" name="__codelineno-35-48" href="#__codelineno-35-48"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-35-49"><a id="__codelineno-35-49" name="__codelineno-35-49" href="#__codelineno-35-49"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> 
</span><span id="__span-35-50"><a id="__codelineno-35-50" name="__codelineno-35-50" href="#__codelineno-35-50"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-35-51"><a id="__codelineno-35-51" name="__codelineno-35-51" href="#__codelineno-35-51"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-35-52"><a id="__codelineno-35-52" name="__codelineno-35-52" href="#__codelineno-35-52"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-35-53"><a id="__codelineno-35-53" name="__codelineno-35-53" href="#__codelineno-35-53"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>   
</span><span id="__span-35-54"><a id="__codelineno-35-54" name="__codelineno-35-54" href="#__codelineno-35-54"></a>
</span><span id="__span-35-55"><a id="__codelineno-35-55" name="__codelineno-35-55" href="#__codelineno-35-55"></a>    <span class="k">def</span> <span class="nf">send_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
</span><span id="__span-35-56"><a id="__codelineno-35-56" name="__codelineno-35-56" href="#__codelineno-35-56"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-35-57"><a id="__codelineno-35-57" name="__codelineno-35-57" href="#__codelineno-35-57"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-35-58"><a id="__codelineno-35-58" name="__codelineno-35-58" href="#__codelineno-35-58"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi_writebyte</span><span class="p">([</span><span class="n">command</span><span class="p">])</span>
</span><span id="__span-35-59"><a id="__codelineno-35-59" name="__codelineno-35-59" href="#__codelineno-35-59"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-35-60"><a id="__codelineno-35-60" name="__codelineno-35-60" href="#__codelineno-35-60"></a>
</span><span id="__span-35-61"><a id="__codelineno-35-61" name="__codelineno-35-61" href="#__codelineno-35-61"></a>    <span class="k">def</span> <span class="nf">send_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span><span id="__span-35-62"><a id="__codelineno-35-62" name="__codelineno-35-62" href="#__codelineno-35-62"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-35-63"><a id="__codelineno-35-63" name="__codelineno-35-63" href="#__codelineno-35-63"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-35-64"><a id="__codelineno-35-64" name="__codelineno-35-64" href="#__codelineno-35-64"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi_writebyte</span><span class="p">([</span><span class="n">data</span><span class="p">])</span>
</span><span id="__span-35-65"><a id="__codelineno-35-65" name="__codelineno-35-65" href="#__codelineno-35-65"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-35-66"><a id="__codelineno-35-66" name="__codelineno-35-66" href="#__codelineno-35-66"></a>
</span><span id="__span-35-67"><a id="__codelineno-35-67" name="__codelineno-35-67" href="#__codelineno-35-67"></a>    <span class="k">def</span> <span class="nf">send_data1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buf</span><span class="p">):</span>
</span><span id="__span-35-68"><a id="__codelineno-35-68" name="__codelineno-35-68" href="#__codelineno-35-68"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dc_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-35-69"><a id="__codelineno-35-69" name="__codelineno-35-69" href="#__codelineno-35-69"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-35-70"><a id="__codelineno-35-70" name="__codelineno-35-70" href="#__codelineno-35-70"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">buf</span><span class="p">))</span>
</span><span id="__span-35-71"><a id="__codelineno-35-71" name="__codelineno-35-71" href="#__codelineno-35-71"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cs_pin</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-35-72"><a id="__codelineno-35-72" name="__codelineno-35-72" href="#__codelineno-35-72"></a>
</span><span id="__span-35-73"><a id="__codelineno-35-73" name="__codelineno-35-73" href="#__codelineno-35-73"></a>    <span class="k">def</span> <span class="nf">WaitUntilIdle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-35-74"><a id="__codelineno-35-74" name="__codelineno-35-74" href="#__codelineno-35-74"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"e-Paper busy"</span><span class="p">)</span>
</span><span id="__span-35-75"><a id="__codelineno-35-75" name="__codelineno-35-75" href="#__codelineno-35-75"></a>        <span class="k">while</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">digital_read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">busy_pin</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>    <span class="c1"># Wait until the busy_pin goes LOW</span>
</span><span id="__span-35-76"><a id="__codelineno-35-76" name="__codelineno-35-76" href="#__codelineno-35-76"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x71</span><span class="p">)</span>
</span><span id="__span-35-77"><a id="__codelineno-35-77" name="__codelineno-35-77" href="#__codelineno-35-77"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span><span id="__span-35-78"><a id="__codelineno-35-78" name="__codelineno-35-78" href="#__codelineno-35-78"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> 
</span><span id="__span-35-79"><a id="__codelineno-35-79" name="__codelineno-35-79" href="#__codelineno-35-79"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"e-Paper busy release"</span><span class="p">)</span>  
</span><span id="__span-35-80"><a id="__codelineno-35-80" name="__codelineno-35-80" href="#__codelineno-35-80"></a>
</span><span id="__span-35-81"><a id="__codelineno-35-81" name="__codelineno-35-81" href="#__codelineno-35-81"></a>    <span class="k">def</span> <span class="nf">TurnOnDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-35-82"><a id="__codelineno-35-82" name="__codelineno-35-82" href="#__codelineno-35-82"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x12</span><span class="p">)</span> <span class="c1"># DISPLAY REFRESH</span>
</span><span id="__span-35-83"><a id="__codelineno-35-83" name="__codelineno-35-83" href="#__codelineno-35-83"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>      <span class="c1">#!!!The delay here is necessary, 200uS at least!!!</span>
</span><span id="__span-35-84"><a id="__codelineno-35-84" name="__codelineno-35-84" href="#__codelineno-35-84"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-35-85"><a id="__codelineno-35-85" name="__codelineno-35-85" href="#__codelineno-35-85"></a>
</span><span id="__span-35-86"><a id="__codelineno-35-86" name="__codelineno-35-86" href="#__codelineno-35-86"></a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-35-87"><a id="__codelineno-35-87" name="__codelineno-35-87" href="#__codelineno-35-87"></a>        <span class="c1"># EPD hardware init start     </span>
</span><span id="__span-35-88"><a id="__codelineno-35-88" name="__codelineno-35-88" href="#__codelineno-35-88"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="__span-35-89"><a id="__codelineno-35-89" name="__codelineno-35-89" href="#__codelineno-35-89"></a>
</span><span id="__span-35-90"><a id="__codelineno-35-90" name="__codelineno-35-90" href="#__codelineno-35-90"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>  <span class="c1"># POWER SETTING</span>
</span><span id="__span-35-91"><a id="__codelineno-35-91" name="__codelineno-35-91" href="#__codelineno-35-91"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span>
</span><span id="__span-35-92"><a id="__codelineno-35-92" name="__codelineno-35-92" href="#__codelineno-35-92"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span>     <span class="c1"># VGH=20V,VGL=-20V</span>
</span><span id="__span-35-93"><a id="__codelineno-35-93" name="__codelineno-35-93" href="#__codelineno-35-93"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x3f</span><span class="p">)</span>     <span class="c1"># VDH=15V</span>
</span><span id="__span-35-94"><a id="__codelineno-35-94" name="__codelineno-35-94" href="#__codelineno-35-94"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x3f</span><span class="p">)</span>     <span class="c1"># VDL=-15V</span>
</span><span id="__span-35-95"><a id="__codelineno-35-95" name="__codelineno-35-95" href="#__codelineno-35-95"></a>
</span><span id="__span-35-96"><a id="__codelineno-35-96" name="__codelineno-35-96" href="#__codelineno-35-96"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x04</span><span class="p">)</span>  <span class="c1"># POWER ON</span>
</span><span id="__span-35-97"><a id="__codelineno-35-97" name="__codelineno-35-97" href="#__codelineno-35-97"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">delay_ms</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span id="__span-35-98"><a id="__codelineno-35-98" name="__codelineno-35-98" href="#__codelineno-35-98"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-35-99"><a id="__codelineno-35-99" name="__codelineno-35-99" href="#__codelineno-35-99"></a>
</span><span id="__span-35-100"><a id="__codelineno-35-100" name="__codelineno-35-100" href="#__codelineno-35-100"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X00</span><span class="p">)</span>   <span class="c1"># PANNEL SETTING</span>
</span><span id="__span-35-101"><a id="__codelineno-35-101" name="__codelineno-35-101" href="#__codelineno-35-101"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x1F</span><span class="p">)</span>      <span class="c1"># KW-3f   KWR-2F  BWROTP 0f   BWOTP 1f</span>
</span><span id="__span-35-102"><a id="__codelineno-35-102" name="__codelineno-35-102" href="#__codelineno-35-102"></a>
</span><span id="__span-35-103"><a id="__codelineno-35-103" name="__codelineno-35-103" href="#__codelineno-35-103"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x61</span><span class="p">)</span>     <span class="c1"># tres</span>
</span><span id="__span-35-104"><a id="__codelineno-35-104" name="__codelineno-35-104" href="#__codelineno-35-104"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x03</span><span class="p">)</span>     <span class="c1"># source 800</span>
</span><span id="__span-35-105"><a id="__codelineno-35-105" name="__codelineno-35-105" href="#__codelineno-35-105"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x20</span><span class="p">)</span>
</span><span id="__span-35-106"><a id="__codelineno-35-106" name="__codelineno-35-106" href="#__codelineno-35-106"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x01</span><span class="p">)</span>     <span class="c1"># gate 480</span>
</span><span id="__span-35-107"><a id="__codelineno-35-107" name="__codelineno-35-107" href="#__codelineno-35-107"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0xE0</span><span class="p">)</span>
</span><span id="__span-35-108"><a id="__codelineno-35-108" name="__codelineno-35-108" href="#__codelineno-35-108"></a>
</span><span id="__span-35-109"><a id="__codelineno-35-109" name="__codelineno-35-109" href="#__codelineno-35-109"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X15</span><span class="p">)</span>
</span><span id="__span-35-110"><a id="__codelineno-35-110" name="__codelineno-35-110" href="#__codelineno-35-110"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-35-111"><a id="__codelineno-35-111" name="__codelineno-35-111" href="#__codelineno-35-111"></a>
</span><span id="__span-35-112"><a id="__codelineno-35-112" name="__codelineno-35-112" href="#__codelineno-35-112"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X50</span><span class="p">)</span>     <span class="c1"># VCOM AND DATA INTERVAL SETTING</span>
</span><span id="__span-35-113"><a id="__codelineno-35-113" name="__codelineno-35-113" href="#__codelineno-35-113"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-35-114"><a id="__codelineno-35-114" name="__codelineno-35-114" href="#__codelineno-35-114"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-35-115"><a id="__codelineno-35-115" name="__codelineno-35-115" href="#__codelineno-35-115"></a>
</span><span id="__span-35-116"><a id="__codelineno-35-116" name="__codelineno-35-116" href="#__codelineno-35-116"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0X60</span><span class="p">)</span>     <span class="c1"># TCON SETTING</span>
</span><span id="__span-35-117"><a id="__codelineno-35-117" name="__codelineno-35-117" href="#__codelineno-35-117"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x22</span><span class="p">)</span>
</span><span id="__span-35-118"><a id="__codelineno-35-118" name="__codelineno-35-118" href="#__codelineno-35-118"></a>
</span><span id="__span-35-119"><a id="__codelineno-35-119" name="__codelineno-35-119" href="#__codelineno-35-119"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x65</span><span class="p">)</span>     <span class="c1"># Resolution setting</span>
</span><span id="__span-35-120"><a id="__codelineno-35-120" name="__codelineno-35-120" href="#__codelineno-35-120"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-35-121"><a id="__codelineno-35-121" name="__codelineno-35-121" href="#__codelineno-35-121"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>     <span class="c1"># 800*480</span>
</span><span id="__span-35-122"><a id="__codelineno-35-122" name="__codelineno-35-122" href="#__codelineno-35-122"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-35-123"><a id="__codelineno-35-123" name="__codelineno-35-123" href="#__codelineno-35-123"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-35-124"><a id="__codelineno-35-124" name="__codelineno-35-124" href="#__codelineno-35-124"></a>
</span><span id="__span-35-125"><a id="__codelineno-35-125" name="__codelineno-35-125" href="#__codelineno-35-125"></a>        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span id="__span-35-126"><a id="__codelineno-35-126" name="__codelineno-35-126" href="#__codelineno-35-126"></a>
</span><span id="__span-35-127"><a id="__codelineno-35-127" name="__codelineno-35-127" href="#__codelineno-35-127"></a>    <span class="k">def</span> <span class="nf">Clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-35-128"><a id="__codelineno-35-128" name="__codelineno-35-128" href="#__codelineno-35-128"></a>
</span><span id="__span-35-129"><a id="__codelineno-35-129" name="__codelineno-35-129" href="#__codelineno-35-129"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-35-130"><a id="__codelineno-35-130" name="__codelineno-35-130" href="#__codelineno-35-130"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-35-131"><a id="__codelineno-35-131" name="__codelineno-35-131" href="#__codelineno-35-131"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-35-132"><a id="__codelineno-35-132" name="__codelineno-35-132" href="#__codelineno-35-132"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-35-133"><a id="__codelineno-35-133" name="__codelineno-35-133" href="#__codelineno-35-133"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-35-134"><a id="__codelineno-35-134" name="__codelineno-35-134" href="#__codelineno-35-134"></a>
</span><span id="__span-35-135"><a id="__codelineno-35-135" name="__codelineno-35-135" href="#__codelineno-35-135"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-35-136"><a id="__codelineno-35-136" name="__codelineno-35-136" href="#__codelineno-35-136"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-35-137"><a id="__codelineno-35-137" name="__codelineno-35-137" href="#__codelineno-35-137"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0xff</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-35-138"><a id="__codelineno-35-138" name="__codelineno-35-138" href="#__codelineno-35-138"></a>
</span><span id="__span-35-139"><a id="__codelineno-35-139" name="__codelineno-35-139" href="#__codelineno-35-139"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-35-140"><a id="__codelineno-35-140" name="__codelineno-35-140" href="#__codelineno-35-140"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-35-141"><a id="__codelineno-35-141" name="__codelineno-35-141" href="#__codelineno-35-141"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0x00</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-35-142"><a id="__codelineno-35-142" name="__codelineno-35-142" href="#__codelineno-35-142"></a>
</span><span id="__span-35-143"><a id="__codelineno-35-143" name="__codelineno-35-143" href="#__codelineno-35-143"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-35-144"><a id="__codelineno-35-144" name="__codelineno-35-144" href="#__codelineno-35-144"></a>
</span><span id="__span-35-145"><a id="__codelineno-35-145" name="__codelineno-35-145" href="#__codelineno-35-145"></a>    <span class="k">def</span> <span class="nf">ClearBlack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-35-146"><a id="__codelineno-35-146" name="__codelineno-35-146" href="#__codelineno-35-146"></a>
</span><span id="__span-35-147"><a id="__codelineno-35-147" name="__codelineno-35-147" href="#__codelineno-35-147"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-35-148"><a id="__codelineno-35-148" name="__codelineno-35-148" href="#__codelineno-35-148"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-35-149"><a id="__codelineno-35-149" name="__codelineno-35-149" href="#__codelineno-35-149"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-35-150"><a id="__codelineno-35-150" name="__codelineno-35-150" href="#__codelineno-35-150"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-35-151"><a id="__codelineno-35-151" name="__codelineno-35-151" href="#__codelineno-35-151"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-35-152"><a id="__codelineno-35-152" name="__codelineno-35-152" href="#__codelineno-35-152"></a>
</span><span id="__span-35-153"><a id="__codelineno-35-153" name="__codelineno-35-153" href="#__codelineno-35-153"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span>
</span><span id="__span-35-154"><a id="__codelineno-35-154" name="__codelineno-35-154" href="#__codelineno-35-154"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-35-155"><a id="__codelineno-35-155" name="__codelineno-35-155" href="#__codelineno-35-155"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0x00</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-35-156"><a id="__codelineno-35-156" name="__codelineno-35-156" href="#__codelineno-35-156"></a>
</span><span id="__span-35-157"><a id="__codelineno-35-157" name="__codelineno-35-157" href="#__codelineno-35-157"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-35-158"><a id="__codelineno-35-158" name="__codelineno-35-158" href="#__codelineno-35-158"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-35-159"><a id="__codelineno-35-159" name="__codelineno-35-159" href="#__codelineno-35-159"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">([</span><span class="mh">0xff</span><span class="p">]</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span>
</span><span id="__span-35-160"><a id="__codelineno-35-160" name="__codelineno-35-160" href="#__codelineno-35-160"></a>
</span><span id="__span-35-161"><a id="__codelineno-35-161" name="__codelineno-35-161" href="#__codelineno-35-161"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-35-162"><a id="__codelineno-35-162" name="__codelineno-35-162" href="#__codelineno-35-162"></a>
</span><span id="__span-35-163"><a id="__codelineno-35-163" name="__codelineno-35-163" href="#__codelineno-35-163"></a>    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">blackimage</span><span class="p">):</span>
</span><span id="__span-35-164"><a id="__codelineno-35-164" name="__codelineno-35-164" href="#__codelineno-35-164"></a>
</span><span id="__span-35-165"><a id="__codelineno-35-165" name="__codelineno-35-165" href="#__codelineno-35-165"></a>        <span class="n">high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
</span><span id="__span-35-166"><a id="__codelineno-35-166" name="__codelineno-35-166" href="#__codelineno-35-166"></a>        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span>
</span><span id="__span-35-167"><a id="__codelineno-35-167" name="__codelineno-35-167" href="#__codelineno-35-167"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span>
</span><span id="__span-35-168"><a id="__codelineno-35-168" name="__codelineno-35-168" href="#__codelineno-35-168"></a>        <span class="k">else</span> <span class="p">:</span>
</span><span id="__span-35-169"><a id="__codelineno-35-169" name="__codelineno-35-169" href="#__codelineno-35-169"></a>            <span class="n">wide</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="__span-35-170"><a id="__codelineno-35-170" name="__codelineno-35-170" href="#__codelineno-35-170"></a>
</span><span id="__span-35-171"><a id="__codelineno-35-171" name="__codelineno-35-171" href="#__codelineno-35-171"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x10</span><span class="p">)</span> 
</span><span id="__span-35-172"><a id="__codelineno-35-172" name="__codelineno-35-172" href="#__codelineno-35-172"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-35-173"><a id="__codelineno-35-173" name="__codelineno-35-173" href="#__codelineno-35-173"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">(</span><span class="n">blackimage</span><span class="p">[(</span><span class="n">i</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span> <span class="p">:</span> <span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">high</span><span class="p">)])</span>
</span><span id="__span-35-174"><a id="__codelineno-35-174" name="__codelineno-35-174" href="#__codelineno-35-174"></a>
</span><span id="__span-35-175"><a id="__codelineno-35-175" name="__codelineno-35-175" href="#__codelineno-35-175"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x13</span><span class="p">)</span> 
</span><span id="__span-35-176"><a id="__codelineno-35-176" name="__codelineno-35-176" href="#__codelineno-35-176"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wide</span><span class="p">):</span>
</span><span id="__span-35-177"><a id="__codelineno-35-177" name="__codelineno-35-177" href="#__codelineno-35-177"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">send_data1</span><span class="p">(</span><span class="n">blackimage</span><span class="p">[(</span><span class="n">i</span> <span class="o">*</span> <span class="n">high</span><span class="p">)</span> <span class="p">:</span> <span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">high</span><span class="p">)])</span>
</span><span id="__span-35-178"><a id="__codelineno-35-178" name="__codelineno-35-178" href="#__codelineno-35-178"></a>
</span><span id="__span-35-179"><a id="__codelineno-35-179" name="__codelineno-35-179" href="#__codelineno-35-179"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">TurnOnDisplay</span><span class="p">()</span>
</span><span id="__span-35-180"><a id="__codelineno-35-180" name="__codelineno-35-180" href="#__codelineno-35-180"></a>
</span><span id="__span-35-181"><a id="__codelineno-35-181" name="__codelineno-35-181" href="#__codelineno-35-181"></a>
</span><span id="__span-35-182"><a id="__codelineno-35-182" name="__codelineno-35-182" href="#__codelineno-35-182"></a>    <span class="k">def</span> <span class="nf">sleep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-35-183"><a id="__codelineno-35-183" name="__codelineno-35-183" href="#__codelineno-35-183"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x02</span><span class="p">)</span> <span class="c1"># power off</span>
</span><span id="__span-35-184"><a id="__codelineno-35-184" name="__codelineno-35-184" href="#__codelineno-35-184"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">WaitUntilIdle</span><span class="p">()</span>
</span><span id="__span-35-185"><a id="__codelineno-35-185" name="__codelineno-35-185" href="#__codelineno-35-185"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_command</span><span class="p">(</span><span class="mh">0x07</span><span class="p">)</span> <span class="c1"># deep sleep</span>
</span><span id="__span-35-186"><a id="__codelineno-35-186" name="__codelineno-35-186" href="#__codelineno-35-186"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">send_data</span><span class="p">(</span><span class="mh">0xa5</span><span class="p">)</span>
</span><span id="__span-35-187"><a id="__codelineno-35-187" name="__codelineno-35-187" href="#__codelineno-35-187"></a>
</span><span id="__span-35-188"><a id="__codelineno-35-188" name="__codelineno-35-188" href="#__codelineno-35-188"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'TS_FINAL_IMG.pbm'</span><span class="p">,</span> <span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="__span-35-189"><a id="__codelineno-35-189" name="__codelineno-35-189" href="#__codelineno-35-189"></a>    <span class="n">fb_smile1</span> <span class="o">=</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">FrameBuffer</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()[</span><span class="mi">12</span><span class="p">:]),</span> <span class="n">EPD_WIDTH</span><span class="p">,</span> <span class="n">EPD_HEIGHT</span><span class="p">,</span> <span class="n">framebuf</span><span class="o">.</span><span class="n">MONO_HLSB</span><span class="p">)</span>
</span><span id="__span-35-190"><a id="__codelineno-35-190" name="__codelineno-35-190" href="#__codelineno-35-190"></a>
</span><span id="__span-35-191"><a id="__codelineno-35-191" name="__codelineno-35-191" href="#__codelineno-35-191"></a><span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s1">'__main__'</span><span class="p">:</span>
</span><span id="__span-35-192"><a id="__codelineno-35-192" name="__codelineno-35-192" href="#__codelineno-35-192"></a>    <span class="n">epd</span> <span class="o">=</span> <span class="n">EPD_7in5</span><span class="p">()</span>
</span><span id="__span-35-193"><a id="__codelineno-35-193" name="__codelineno-35-193" href="#__codelineno-35-193"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>
</span><span id="__span-35-194"><a id="__codelineno-35-194" name="__codelineno-35-194" href="#__codelineno-35-194"></a>
</span><span id="__span-35-195"><a id="__codelineno-35-195" name="__codelineno-35-195" href="#__codelineno-35-195"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mh">0x00</span><span class="p">)</span>
</span><span id="__span-35-196"><a id="__codelineno-35-196" name="__codelineno-35-196" href="#__codelineno-35-196"></a>
</span><span id="__span-35-197"><a id="__codelineno-35-197" name="__codelineno-35-197" href="#__codelineno-35-197"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">fb_smile1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="__span-35-198"><a id="__codelineno-35-198" name="__codelineno-35-198" href="#__codelineno-35-198"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">epd</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
</span><span id="__span-35-199"><a id="__codelineno-35-199" name="__codelineno-35-199" href="#__codelineno-35-199"></a>
</span><span id="__span-35-200"><a id="__codelineno-35-200" name="__codelineno-35-200" href="#__codelineno-35-200"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"sleep"</span><span class="p">)</span>
</span><span id="__span-35-201"><a id="__codelineno-35-201" name="__codelineno-35-201" href="#__codelineno-35-201"></a>    <span class="n">epd</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>
</span></code></pre></div>
<p>I cleared the epaper before I finished working on it, and I'm considering simply drawing it one time then not writing to it anymore and only using the Pico for controlling the servo and BLE communication. Also that was I didn't have to worry about using the shield with other wiring, as well, and a power source. But this also wouldn't be any better than a piece of paper, so I'm leaning against it.</p>
<p><em>All of the code used MicroPython 1.20.0</em></p>
<h2 id="rechargeable-batteries">Rechargeable Batteries</h2>
<p>I want to use a rechargeable battery both for the cup holder and display electronics. I have a <a href="https://m.aliexpress.com/i/2255800311222146.html?gatewayAdapt=4itemAdapt">HW-357</a> module and a <a href="https://www.amazon.com/gp/product/B06WGZB2N4/ref=ppx_yo_dt_b_search_asin_image?ie=UTF8&amp;psc=1">Lipo battery</a>, and when I measured the output voltage of the battery, it was <code>1.7V</code>, so I let it charge inside of a <a href="https://www.amazon.com/DerBlue-Fireproof-Explosionproof-Battery-Bag%EF%BC%88185x75x60mm%EF%BC%89/dp/B01GCHBQJS">Derblue Lipo Safe Bag</a>.</p>
<p>The potentiometer didn't work - even after charging always ~1.7v - soldered a different one called a <a href="https://www.amazon.com/Lind-Kitchen-Charging-Lithium-Battery/dp/B0BVFK5T2Z/ref=sr_1_1_sspa?crid=F5AMEBLJSMUO&amp;keywords=tp4056&amp;qid=1685987558&amp;s=hi&amp;sprefix=tp4056%2Ctools%2C75&amp;sr=1-1-spons&amp;psc=1&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUFGNlRaQUkzMVZFMjImZW5jcnlwdGVkSWQ9QTA1MDI4NDMxSzVDTElBOUFXOUxLJmVuY3J5cHRlZEFkSWQ9QTAwMTU2NjIxMlBZQkQ0SzhMWkFTJndpZGdldE5hbWU9c3BfYXRmJmFjdGlvbj1jbGlja1JlZGlyZWN0JmRvTm90TG9nQ2xpY2s9dHJ1ZQ==">TP4056 Lithium Battery Charger Module</a>.</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/potentiometer.jpeg"></p>
<p>When I hooked up the servo, it worked!</p>
<p><img alt="wiring pic" src="../../../assets/images/stem/disability-forewarning-system/wir.jpeg"></p>
<video src="../../../assets/images/stem/disability-forewarning-system/vvid.mp4" controls="controls" style="max-width: 730px;">
</video>

<p><a href="../display-mechanics/#putting-it-together">Here's where I put it together!</a></p>
<p>Sometimes the servo motor would become jitery, but I believe this was the result of a bad connection in the wiring, as after combining the electronics this problem disappeared.</p>
<h2 id="combining-with-hat">Combining With HAT</h2>
<p>I put it in the e-paper HAT, and I couldn't connect to it in Thonny. I realized I placed it one too many over to the side, and after changing that, it worked!</p>
<p><a href="https://www.waveshare.com/wiki/Pico-ePaper-7.5#:~:text=DEV_Digital_Read(UWORD%20Pin)%3B-,SPI%20transmits%20data,-void%20DEV_SPI_WriteByte(UBYTE)">This page</a> leads me to believe that the e-paper uses SPI, so GP21 and UART 0 shouldn't be a problem!</p>
<p>I found switching between the angles 0 and 100 was optimal.</p>
<p>Now it was time to design the PCB board.</p>
<h3 id="display-electronics-pcb">Display Electronics PCB</h3>
<h4 id="designing-in-eaglecad">Designing in EagleCAD</h4>
<h5 id="iteration-1">Iteration 1</h5>
<p><strong>Note</strong> I used <code>right-click &gt; Mirror</code> to mirror the pico footprints since I inserted the board from the back using through-hole milling.</p>
<p>I used these two different footprints for pads:</p>
<ul>
<li><em>wirepad</em> &gt; <strong>SMD5</strong></li>
<li><em>wirepad</em> &gt; <strong>SMD2</strong></li>
</ul>
<p><img alt="Schematic Draft" src="../../../assets/images/stem/disability-forewarning-system/sc-draft.jpg"></p>
<p><img alt="Layout Draft" src="../../../assets/images/stem/disability-forewarning-system/ly-draft.jpg"></p>
<p><img alt="3D PCB Draft" src="../../../assets/images/stem/disability-forewarning-system/3d-draft.jpg"></p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/m2m.jpeg"></p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/mm1.jpeg"></p>
<p>This didn't work until I soldered the wire on it because I realized that the <code>VSYS</code> pin only works when the board is powered via USB.</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/pico-wire-solder.jpeg"></p>
<h5 id="iteration-2">Iteration 2</h5>
<p>I redesigned the board to fix the <code>VSYS</code> problem. I played with milling different routing patterns, some of which failed to mill because of too-small trace widths (see below).</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/trace.jpeg"></p>
<p>In terms of milling bits, I ended up using a <code>0.8mm</code> flat end mill.</p>
<p><img alt="v2 Board Layout" src="../../../assets/images/stem/disability-forewarning-system/v2-b.jpg"></p>
<p><code>VBUS</code> didn't completely solve the problem.</p>
<p>I redid it. It stripped when I tried to unsolder a couple of times, so I had to re-mill the board. Then it worked!</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/xy1.jpeg"></p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/xy2.jpeg"></p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/xy3.jpeg"></p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/working.jpeg"></p>
<video src="../../../assets/images/stem/disability-forewarning-system/xy4.mp4" controls="controls" style="max-width: 730px;">
</video>

<h3 id="iteration-3">Iteration 3</h3>
<p>To modify the wiring, I had to add a <code>0ohm</code> resistor to jump one trace over another. Now the design was fully functional!</p>
<p><img alt="" src="../../../assets/images/stem/disability-forewarning-system/jump.jpeg"></p>
<video src="../../../assets/images/stem/disability-forewarning-system/fw.mp4" controls="controls" style="max-width: 730px;">
</video></div>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.indexes", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>